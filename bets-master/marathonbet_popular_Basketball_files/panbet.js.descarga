function $$(){for(var e=new Array,t=0,n=arguments.length;t<n;t++){var a=arguments[t];if("string"==typeof a&&(a=document.getElementById(a)),1==n)return a;e.push(a)}return e}function pad(e){return e<10?"0"+e:e.toString()}function getFormElementsHash(e){var t={},n=e.getElementsByTagName("*");for(i=0;i<n.length;i++)if(n[i].name)switch(n[i].tagName){case"INPUT":switch(n[i].type){case"hidden":case"text":case"password":t[n[i].name]=n[i].value;break;case"checkbox":t[n[i].name]=n[i].checked?1:0;break;case"radio":n[i].checked&&(t[n[i].name]=n[i].value)}break;case"TEXTAREA":t[n[i].name]=n[i].innerHTML;break;case"SELECT":t[n[i].name]=n[i].value}return t}function serializeForm(e){var t="",n=getFormElementsHash(e);for(var a in n)t.length>0&&(t+="&"),t+=encodeURIComponent(a)+"="+encodeURIComponent(n[a]);return t}function getValue(e){return e.options[e.selectedIndex].value}function isInternetExplorer(){return!!$.browser.msie}function parseMoneyString(e){var e=e.replace(",","");return parseFloat(e)}function getOffset(e){return e.getBoundingClientRect?getOffsetRect(e):getOffsetSum(e)}function getOffsetRect(e){var t=e.getBoundingClientRect(),n=document.body,a=document.documentElement,i=window.pageYOffset||a.scrollTop||n.scrollTop,r=window.pageXOffset||a.scrollLeft||n.scrollLeft,o=a.clientTop||n.clientTop||0,s=a.clientLeft||n.clientLeft||0,c=t.top+i-o,l=t.left+r-s;return{top:Math.round(c),left:Math.round(l)}}function getOffsetSum(e){for(var t=0,n=0;e;)t+=parseInt(e.offsetTop),n+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:t,left:n}}function filterTopLinks(e){for(var e=e||"main_container",t=$("#"+e).find("._top"),n=0,a=0,i=t.length;a<i;a++){var r=$(t[a]),o=r.position().top;o-n>500&&(r.css("visibility","visible"),r.addClass(" top"),n=o)}}function closeMessengerNote(e){$("#"+e).css("display","none")}function redrawSelectionsButtons(e){e?($(".but-clear").css("visibility","hidden"),$(".but-show").css("visibility","hidden")):($(".but-clear").css("visibility","visible"),$(".but-show").css("visibility","visible"))}function hideConnextraImage(){$("body > img[src*='zz.connextra.com']").hide()}function isPage(e){var t=document.location.pathname;return-1!==t.indexOf(e,t.length-e.length)}function panbetValidate(e,t){var n=t||{};n.ignore="",n.messages=PanbetBaseMessages,n.onfocusout||(n.onfocusout=function(e){var t=$(e);t.is("[name=nickname]")&&(t.valid(),$(this.currentForm).find("[name=authtype]").valid())}),n.onclick=function(e){var t=$(e);t.is("[name=authtype]")&&(t.valid(),$(this.currentForm).find("[name=nickname]").valid()),t.is("[name=municipalityItaly]")&&t.val()&&t.valid(),t.is("[type='checkbox']")&&t.valid()},n.onkeyup=function(e,t){if(void 0===t.keyCode||13!=t.keyCode){this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass);var n=$(e).closest("[data-datepicker]");n.length&&(e=$("input[type=hidden]",n).get(0)),this.addWrapper(this.errorsFor(e)).hide()}},n.highlight=function(e,t,n){var a=$(e).closest("[data-datepicker]");switch(a.length&&(e=$("input[type=hidden], input[type=text]",a).add(a)),e.id){case"number_document":var i=$("#"+e.id+"_valid");i.length&&i.addClass("hidden");break;case"documentIssueValidationDateField":$("#form_documentIssueDay, #form_documentIssueMonth, #form_documentIssueYear").addClass(t).removeClass(n);break;case"documentExpiryValidationDateField":$("#form_documentExpiryDay, #form_documentExpiryMonth, #form_documentExpiryYear").addClass(t).removeClass(n)}if($(e).is("[name=nickname]")){var r=_.find(this.errorList,function(e){return $(e.element).is("[name=nickname]")});r&&("nicknameAvailable"===r.method?getJoinHelper().createAvailableNicknamesMenu($(e)):getJoinHelper().removeAvailableNicknamesMenu($(e)))}$(e).addClass(t).removeClass(n)},n.unhighlight=function(e,t,n){var a=$(e).closest("[data-datepicker]");switch(a.length&&(e=$("input[type=hidden], input[type=text]",a).add(a)),e.id){case"number_document":var i=$("#"+e.id+"_valid");0==i.length&&(i=$("<label></label>").attr("id",e.id+"_valid").addClass("valid"),$(e).after(i)),i.html("&#10004;").removeClass("hidden");break;case"documentIssueValidationDateField":$("#form_documentIssueDay, #form_documentIssueMonth, #form_documentIssueYear").removeClass(t).addClass(n);break;case"documentExpiryValidationDateField":$("#form_documentExpiryDay, #form_documentExpiryMonth, #form_documentExpiryYear").removeClass(t).addClass(n)}$(e).is("[data-show-validation-error-in-tooltip][data-hasqtip]")&&$(e).qtip().hide(),$(e).is("[name=nickname]")&&getJoinHelper().removeAvailableNicknamesMenu($(e)),$(e).removeClass(t).addClass(n)},n.errorPlacement||(n.errorPlacement=function(e,t){var n=$(t),a=n.parent().find("[data-validation-error-after]");a.length?a.first().html(e):n.is("[data-show-validation-error-in-tooltip]")?n.PanbetTooltip("tooltipForValidationError",e.text()):n.is("[type=radio")?e.insertAfter(n.parent()):e.insertAfter(n)}),isPage(PAGES.JOIN)&&(n.onkeyup=function(e,t){$(e).is("[name=nickname]")&&this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass)},n.onfocusout=function(e){$(e).valid()},n.rules=$.extend({},n.rules||{},{number_document:{validDocumentNumber:!0}}));var a=["firstname","surname","surname2","middlename"],i={};return isPage(PAGES.ID_UPLOAD)||(i={firstname:{keyboardLayout:a},surname:{keyboardLayout:a},surname2:{keyboardLayout:a},middlename:{keyboardLayout:a}}),n.rules=$.extend({},n.rules||{},i,{confirmpassword:{equalTo:"#form_password"},aemail2:{equalTo:"#form_aemail"},birthdayValidationDateField:{checkAge:!0},documentIssueValidationDateField:{dateInPast:!0},documentExpiryValidationDateField:{dateInFuture:!0},nickname:{nicknameAndAuthType:!0,nicknameAvailable:!0},authtype:{checkAuthType:!0},ccsanswer:{remote:{depends:function(){return $("#form_ccsecquestions").find(":selected").data("needValidation")},param:{type:"POST",url:initData.checkSecretAnswerUrl,data:{questionId:function(){return $("#form_ccsecquestions").val()||""},questionAnswer:function(){return $("#form_ccsanswer").val()||""},phone:function(){return $("#form_maskedPhone").val()||""},postcode:function(){return $("#form_postcode").val()||""},birthDate:function(){return $("#birthday").val()||""},hash:function(){return $("#form_hash").val()||""}}}}}}),e.validate(n)}function panbetModal(e,t){(t=t||{}).position=["20%"],e.modal(t)}function showMessage(e,t,n){var a=$("#"+e);void 0!==t&&null!==t&&a.find("P._message").html(t),panbetModal(a,n)}function showMessageInQueue(e,t,n){var a=$("#"+e);void 0!==t&&null!==t&&a.find("P._message").html(t),a.addModalToViewQueue(n)}function showLogin(e,t){$.modal.close(),panbetModal($("#login")),new PopupLoginView(new LoginController(t));var n=$("#login_form");return $("input[name=captcha]",n).defaultValue(),e&&n.find("input[name=placebet]").val(!0),n}function showProgressModal(){PROGRESS_DIALOG.show()}function closeModal(){PROGRESS_DIALOG.hide(),$.modal.close()}function showModalDialogById(){showMessage($(this).data("show-modal-dialog-by-id"))}function getBrowserVersion(e){var t=navigator.userAgent;try{return parseFloat(t.substring(t.indexOf(e)+e.length+1))}catch(e){return-1}}function convertCurrency(e,t,n){var a=$$(n);if(-1==a.className.indexOf("error")){var i=$$(t),r=i.options[i.selectedIndex].value.split("-");$$(e).innerHTML=r[1]+" "+Math.round(r[2]*a.value*100)/100}else $$(e).innerHTML=""}function trimFields(){jQuery("input[type='text']").focusout(function(){var e=jQuery.trim(this.value);jQuery(this).val(e)})}function updateBalance(e){var t=initData.showPunterBalanceDetails||!1,n={loggerName:"HeaderBalance",containerId:t?"header_balance_details":"header_balance",totalBalanceContainerId:"header_balance",updateTotalBalance:t};window.PanbetPunterBalance.updateBalance("main",e,n)}function getUrlVars(){for(var e,t={},n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),a=0;a<n.length;a++)t[(e=n[a].split("="))[0]]=e[1];return t}function getUrlVar(e){return getUrlVars()[e]}function contains(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function findOffsetTop(e){var t=0;do{t+=e.offsetTop}while(e=e.offsetParent);return t}function queryString(){for(var e={},t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var a=t[n].split("=");if(void 0===e[a[0]])e[a[0]]=a[1];else if("string"==typeof e[a[0]]){var i=[e[a[0]],a[1]];e[a[0]]=i}else e[a[0]].push(a[1])}return e}function removeURLParameter(e,t){var n=e.split("?");if(n.length>=2){for(var a=encodeURIComponent(t)+"=",i=n[1].split(/[&;]/g),r=i.length;r-- >0;)-1!==i[r].lastIndexOf(a,0)&&i.splice(r,1);e=n[0]+(i.length>0?"?"+i.join("&"):"")}return e}function isWideScreen(){var e=!0;try{$(".sidebar-right").is(":visible")||(e=$(".categories").offset()?$(".categories").offset().left+$(".categories").outerWidth()<$("#betslip-content").offset().left:$("#container_EVENTS").offset()?$("#container_EVENTS").offset().left+$("#container_EVENTS").outerWidth()<$("#betslip-content").offset().left:$(".category-container").offset().left+$(".category-container").outerWidth()<$("#betslip-content").offset().left)}catch(e){}return e}function closeTopbar(e,t,n){return $(e).remove(),checkView(),$.cookie(t,!0,{expires:n}),!1}function getHttpsUrl(e){return!initData.isTestMode&&e.length&&-1==e.indexOf("https://")?-1!=e.indexOf("http://")?e.replace(/^http:\/\//i,"https://"):initData.httpsPort?"https://"+window.location.host+":"+initData.httpsPort+e:"https://"+window.location.host+e:e}function resizeBannerIframe(e){var t=$(e);t.length&&t.height(t.contents().find("html").height())}function positionStickySupported(){var e=document.createElement("div");e.style.cssText="position:sticky",e.style.position.match("sticky")?initData.cssPosSticky=!0:initData.cssPosSticky=!1,e=null}function stickyNotSupported(){return window.initData.hasOwnProperty("cssPosSticky")&&!1===window.initData.cssPosSticky}function openPersonalDetails(){location.href=initData.personalDetailsPageUrl}function extractSum(e,t,n){var a=e.value;/,/g.test(a)&&(a=a.replace(/,/g,"."));var i="[0-9]*";t>0?i+="\\.?[0-9]{0,"+t+"}":t<0&&(i+="\\.?[0-9]*"),i=n?"^-?"+i:"^"+i,i+="$",new RegExp(i).test(a)&&0==a.indexOf(".")&&(a="0"+a);var r="[^0-9"+(0!=t?".":"")+(n?"-":"")+"]",o=new RegExp(r,"g");if(o.test(a)&&(a=a.replace(o,"")),n){var s=a.length>0&&"-"==a.charAt(0),c=/-/g;c.test(a)&&(a=a.replace(c,"")),s&&(a="-"+a)}if(0!=t){var l=/\./g,u=l.exec(a);if(null!=u){var d=a.substring(u.index+u[0].length);d=d.replace(l,""),d=t>0?d.substring(0,t):d,a=a.substring(0,u.index)+"."+d}}if(0==a.indexOf(".")&&(a="0"+a),""!==a&&e.prev){var h=parseFloat(a);(isNaN(h)||Betslip.STAKE_LIMIT<h)&&(a=e.prev,e.prev=!1)}e.value!=a&&(e.value=a)}function checkPaste(e,t,n,a,i){var r=e.value,o=t.clipboardData&&t.clipboardData.getData?t.clipboardData.getData("text/plain"):!(!window.clipboardData||!window.clipboardData.getData)&&window.clipboardData.getData("Text");if(!o)return!0;var s=getSelectionRange(e),c=s.start,l=s.end;return c>=0&&l>=0&&(r=r.substring(0,c)+o+r.substring(l,r.length)),checkValue(r,n,a,i)}function checkChar(e,t,n,a,i){var r,o,s=!1,c=!1,l=e.value;if(window.event?(s=window.event.shiftKey,c=window.event.ctrlKey,r=t.keyCode):(t.which||t.keyCode)&&(s=t.shiftKey,c=t.ctrlKey,r=t.which?t.which:t.keyCode),isNaN(r))return!0;var u=8==r,d=46==r;if(!hasValue(r)||u||d)return!0;o=String.fromCharCode(r);var h=!!a&&(o&&"-"==o&&-1==l.indexOf("-")),p=!!n&&(o&&"."==o&&-1==l.indexOf(".")),f=s&&45==r||c&&("v"==o||"V"==o),_=/[\d,]+/;if(!(h||p||o&&_.test(o)))return f?""===(l=e.value)||!!checkValue(l,n,a,i)&&(e.prev=l,!0):!!c;var g=l.length,E=getSelectionRange(e),m=E.start,v=E.end,A=m>=0&&v>=0;return!!(A&&m<v)||(A&&m===v&&m<g?l=l.substring(0,m)+o+l.substring(v,g):l+=o,checkValue(l,n,a,i))}function checkValue(e,t,n,a){var i="[^0-9"+(t&&0!=a?".":"")+(n?"-":"")+"]";if(new RegExp(i,"g").test(e))return!1;if(a&&a>0){var r=/\./g,o=r.exec(e);if(null!=o){var s=e.substring(o.index+o[0].length);if((s=s.replace(r,"")).length>a)return!1}}var c=parseFloat(e);return!(isNaN(c)||Betslip.STAKE_LIMIT<c)}function betslipFormatValue(e){return 0==e?PanbetConst.Betslip.DEF_MONEY_VAL:betslipFormatMoney(Math.round(100*e)/100,2,".",",")}function betslipFormatMoney(e,t,n,a){var t=isNaN(t=Math.abs(t))?2:t,n=void 0==n?",":n,a=void 0==a?".":a,i=e<0?"-":"",r=parseInt(e=Math.abs(+e||0).toFixed(t))+"",o=(o=r.length)>3?o%3:0;return i+(o?r.substr(0,o)+a:"")+r.substr(o).replace(/(\delimeter1{3})(?=\delimeter1)/g,"$1"+a)+(t?n+Math.abs(e-r).toFixed(t).slice(2):"")}function isStake(e,t){Log.isDebugEnabled()&&Log.debug("function isStake() - called, oInput="+$("<div>").append($(e).clone()).remove().html());var n=$.trim(e.value),a=$.trim($(e).attr("rel"));if(Log.isDebugEnabled()&&Log.debug("function isStake() - sValue="+n+",hint="+a),""!=n&&"."!=n&&n!=a){Log.isDebugEnabled()&&Log.debug("function isStake() - sValue != '' && sValue != '.' && sValue != hint"),n=n.replace(/,/g,"");var i=parseFloat(n);return i>=0&&i==n?(Log.isDebugEnabled()&&Log.debug("function isStake() - returns true, sValue="+n),!0):($("#invalid_stake_dialog").modal({position:["20%"]}),Log.isDebugEnabled()&&Log.debug("function isStake() - returns false, sValue="+n),!1)}return Log.isDebugEnabled()&&Log.debug("function isStake() - sValue == '' || sValue == '.' || sValue == hint"),t&&(e.value=a),Log.isDebugEnabled()&&Log.debug("function isStake() - returns true, sValue="+a),!0}function getEl(e){return"string"==typeof e&&(e=$$(e)),e}function isEmpty(e){var t=!1;"string"==typeof e&&0==e.indexOf("#")&&(t=!0),e=t?$("[id='"+e.substring(1)+"']"):$(e);var n=$.trim(e.val()),a=$.trim(e.attr("rel"));return n==a||(""==n||"."==n)&&(e.val(a),!0)}function getSUrlByInputs(e,t){var n=[];if(!e)return n;e.length||(e=[e]);var a,i;e.length;return $.each(e,function(e,r){if(!(a=$(r).attr("id")))return!1;i=a.replace(t,""),n.push(i)}),n}function hasValue(e){switch(e){case 9:case 13:case 16:case 17:case 18:case 19:case 20:case 27:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:return!1;default:return!0}}function noValue(e){var t;if(!e)var e=window.event;return e.keyCode?t=e.keyCode:e.which&&(t=e.which),!hasValue(t)}function setValue(e,t){try{$(e).val(parseFloat(t))}catch(e){}}function getSelectionRange(e){var t,n,a,i,r,o=-1,s=-1;return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?(o=e.selectionStart,s=e.selectionEnd):(n=document.selection.createRange())&&n.parentElement()==e&&(i=e.value.length,t=e.value.replace(/\r\n/g,"\n"),(a=e.createTextRange()).moveToBookmark(n.getBookmark()),(r=e.createTextRange()).collapse(!1),a.compareEndPoints("StartToEnd",r)>-1?o=s=i:(o=-a.moveStart("character",-i),o+=t.slice(0,o).split("\n").length-1,a.compareEndPoints("EndToEnd",r)>-1?s=i:(s=-a.moveEnd("character",-i),s+=t.slice(0,s).split("\n").length-1))),{start:o,end:s}}function showHalfPlaceWarning(e){var t=$$("half-palace-msg"),n=$$("half-place-dialog");if(n&&t){var a=formatHalfPlaceMsg(e);$.modal.close(),$(t).html(a),$(n).modal({position:["20%"]})}}function formatHalfPlaceMsg(e){for(var t="",n=PanbetConst.Betslip.HALFPLACE_BET,a=0,i=e.length,r=null,o=!0;a<i;a++)r=e[a],o?o=!1:t+="<br>",t+=formatTemplateMsg(n,r.name,r.win,r.place);return t}function formatTemplateMsg(e){for(var t=1,n=arguments.length;t<n;t++)e=e.replace("{"+(t-1)+"}",arguments[t]);return e}function isOneClickChecked(){return hasAttr($$("bet-in-one-click-checked"),"checked")}function hasAttr(e,t){if(!(e=$(e)))return!1;var n=e.attr(t);return void 0!==n&&!1!==n}function showHideBetslipPlaceModeBlock(){$(BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR).is(":visible")?($(BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR).hide(),$.cookie(BETSLIP_PLACE_MODE_BLOCK_COOKIE,!1,{expires:15330,path:"/"})):($(BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR).show(),$.cookie(BETSLIP_PLACE_MODE_BLOCK_COOKIE,!0,{expires:15330,path:"/"})),rightColumnPaddingTop()}function setupBetslipPlaceModeBlockVisibility(){"true"==$.cookie(BETSLIP_PLACE_MODE_BLOCK_COOKIE)?$(BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR).show():$(BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR).hide(),rightColumnPaddingTop()}function showStakeNo(){($("[id='stakeNoWideScreenId']").length>0||$("[id='stakeNoNotWideScreenId']").length>0)&&(isWideScreen()?($("[id='stakeNoWideScreenId']").show(),$(".bet-slip").removeClass("betslip-not-wide-screen")):($("[id='stakeNoNotWideScreenId']").show(),$(".bet-slip").addClass("betslip-not-wide-screen"))),rightColumnPaddingTop()}function toggleStakeNo(){var e=$("#stakeNoWideScreenId"),t=$("#stakeNoNotWideScreenId");e.is(":visible")||t.is(":visible")?(e.hide(),t.hide(),$(".bet-slip").removeClass("betslip-not-wide-screen")):showStakeNo();var n=$("#betslip-container");n.is(":not(.coupon-not-wide)")||0==e.length&&0==t.length?(n.removeClass("with-bottom-border"),$("#coupon_body").show()):n.addClass("with-bottom-border")}function showNoOpenBetsMessage(){$("li[data-open-bet-id]").length<1?$("#no_open_bets").show():$("#no_open_bets").hide()}function refreshBetslipView(e){$.each($("#open_bets_list").find("li"),function(t,n){var a=$(n).next(".open-bet-details");-1!=$.inArray($(n).data("openBetId"),e)?(a.removeClass("hidden"),a.show()):(a.addClass("hidden"),a.hide())}),adjustScroll()}function getCorrectTimeInMillis(time){var correctTime=getClock().applyMonthFormat(time);return eval("new Date("+correctTime+")").valueOf()}function rightColumnPaddingTop(){var e=$(".banners"),t=$(".betslip-wrapper"),n=$(".main-panel-container");if(e.css({"padding-top":0}),e.length&&t.length&&n.length){var a=t.height()-n.height()+10;e.css({"padding-top":a+"px"})}else e.length>0&&$("[id='stakeNoWideScreenId']").is(":visible")?e.css({"padding-top":$("[id='stakeNoWideScreenId']").height()+"px"}):e.length>0&&$("[id='stakeNoNotWideScreenId']").is(":visible")?e.css({"padding-top":$("[id='stakeNoNotWideScreenId']").height()+"px"}):e.css({"padding-top":"10px"});var i=$("[data-scrollable-container]");i.length&&i.trigger("scroll")}function onclickVip(e,t){$("[id='stake_type']").focus(),isEmpty(e)||("#accumulator.stake"==e?getBetslip().checkBet(getBetslip().getSUrl("bet_type_selection")):getBetslip().checkBet(t))}function getHighlightedSelectionUIDs(e){var t=initData.isLogged,n=[];return e.forEach(function(e){var a=$("input[value='"+e+"']"),i=a.data("acceptedSelectionUid"),r=a.data("acceptedSelectionType");t&&e!==i||n.push({selection:e,type:r})}),n}function onclickEw(e,t){if("single"==e){var n="[id='stake."+t+"']";$(n).focus()}"accumulator"==e?getBetslip().checkBet(getBetslip().getSUrl("bet_type_selection")):getBetslip().checkBet(t)}function getBetPlacingMode(){return $("#betPlacingModeRadio_"+BetPlacingModes.GreaterOrEqualsToCurrent).prop("checked")?BetPlacingModes.GreaterOrEqualsToCurrent:$("#betPlacingModeRadio_"+BetPlacingModes.Any).prop("checked")?BetPlacingModes.Any:$("#betPlacingModeRadio_"+BetPlacingModes.EqualsToCurrent).prop("checked")?BetPlacingModes.EqualsToCurrent:void 0}function setupBetPlacingModeHandler(){var e=$("#betPlacingModeRadioBlockId").find("input");e.click(function(){var t=$(this).val(),n=null;if(e.each(function(e){$(this).val()!=t&&$(this).is(":checked")&&(n=$(this).val())}),n){$(this).prop("checked",!1);var a={url:resolveBetslipUrl("PLACING_MODE_URL"),type:"POST",dataType:"json",data:{betPolicy:t},success:function(){e.each(function(e){$(this).val()==t?$(this).prop("checked",!0):$(this).prop("checked",!1)}),$(document).trigger({type:"placingmodechanged",val:t})}};a.error=function(t){var i=function(){e.each(function(e){$(this).val()==n?$(this).prop("checked",!0):$(this).prop("checked",!1)})};switch(t.status){case 405:initData.isUseBetslip2=JSON.parse(t.getResponseHeader("isUsebetslip2")),a.url=resolveBetslipUrl("PLACING_MODE_URL"),a.error=function(e){i()},$.ajax(a);break;default:i()}},$.ajax(a)}})}function isMustApplyChanges(e,t){return!(!e||"REPLACE"!==t)||("INCREASE"===t&&e==BetPlacingModes.EqualsToCurrent||"DECREASE"===t&&(e==BetPlacingModes.EqualsToCurrent||e==BetPlacingModes.GreaterOrEqualsToCurrent))}function isNeedApplyChanges(e,t){if(e)for(var n=0;n<t.length;n++)if(isMustApplyChanges(e,t[n]))return!0;return!1}function isOpenBetsTab(){return"openbets"===$("#betslip-content").data("betslipTab")}function getOpenBetsTimeout(){return parseFloat($("[id='openBetsTimeout']").val())}function isPriceChangesSubscriptionEnabled(){var e=$("[id='isPriceChangesSubscriptionEnabled']").val();return e&&"true"==e}function isPriceChangesSubscriptionAvailable(){return isPriceChangesSubscriptionEnabled()}function setupPlaceBetAvailability(){var e=getBetPlacingMode(),t=!1,n=!1;e&&$("[id^='choice.status.']").each(function(){t||(t=isMustApplyChanges(e,$(this).val())),n||(n="REMOVE"===$(this).val())});var a=$("#betslip_placebet_btn_id");t?($("#betslip_has_removed_choices_block").hide(),$("#betslip_apply_choices_block").show(),a.data("enabled",!1).addClass("btn-place-bet-disabled")):($("#betslip_apply_choices_block").hide(),a.data("enabled",!0).removeClass("btn-place-bet-disabled"),n&&$("#betslip_has_removed_choices_block").show()),n||$("#betslip_has_removed_choices_block").hide()}function adjustScroll(){var e=$(".header").outerHeight(!0)+parseInt($(".betslip-wrapper").css("padding-top")),t=$(".scroll-selections");if(t.css({"max-height":""}),$("table.select-bet > tbody > tr").size()>4){for(var n=0,a=0;a<4;a++)n+=$(".select-bet > tbody > tr").eq(a).outerHeight();t.css({"max-height":n+"px"});for(var i=0,a=0;a<4;a++)i+=$(".select-bet > tbody > tr").eq(a).outerHeight();n<i&&t.css({height:i+"px"})}if($(".open-bet-scroll-selections").size()>0){var r=$(window).height()-$("#betslip-content").offset().top-$(".betslip-content .table-header").outerHeight(!0)-parseInt($(".betslip-content").css("padding-top"));$(".open-bet-scroll-selections").css({"max-height":r+"px"})}var o=$(".betslip-wrapper"),s=$(window).height();if(o.outerHeight(!0)+e>s){var c=s-o.outerHeight(!0)-e,l=$("table.select-bet > tbody > tr:eq(0)").outerHeight(!0);r=(r=t.height()+c)>l?r:l,t.css({"min-height":l+"px","max-height":r+"px"})}rightColumnPaddingTop()}function rightColumnPaddingScrollWidth(){var e=$(".betslip-wrapper");if(e.length)if($(window).width()>=3922)e.css("width","").css("width","480px !important").css("right",0);else{var t=0,n=$(".grid-rightbar");if(n.length&&n.is(":visible"))t=n.get(0).offsetWidth-n.get(0).clientWidth;else{var a=$("[data-scrollable-container]");a.length&&(t=a.get(0).offsetWidth-a.get(0).clientWidth)}var i=$(".main-panel-container"),r=(100-100*i.width()/i.offsetParent().width()).toFixed(4);r&&e.css("width","calc("+r+"% - "+t+"px)").css("right",t)}}function displaySelectionName(){$("[id^='selection.name.']").each(function(e,t){$(t).width()>=$(t).parent().width()?$(t).removeClass("display-inline"):$(t).addClass("display-inline")})}function resolveBetslipUrl(e){var t=void 0,n=function(e,t){return initData.base_dir+"/"+(initData.isUseBetslip2?t:e)};switch(e){case"REMOVE_URL":t=n("betslip/remove.htm","betslip/remove2.htm");break;case"ADD_URL":t=n("betslip/add.htm","betslip/add2.htm");break;case"PLACING_MODE_URL":t=n("betslip/updatebetplacingmode.htm","betslip/updatebetplacingmode2.htm");break;case"CLEAR_URL":t=n("betslip/clear.htm","betslip/clear2.htm");break;case"PLACEBET_URL":t=n("betslip/placebet.htm","betslip/placebet2.htm");break;case"SAVE_URL":t=n("betslip/save.htm","betslip/save2.htm");break;case"ACCUMULATOR_VIEW":t=n("betslip/accumulator.htm","betslip/accumulator2.htm");break;case"ANTIEXPRESS_VIEW":t=n("betslip/antiexpress.htm","betslip/antiexpress2.htm");break;case"MULTIPLE_VIEW":t=n("betslip/multiple.htm","betslip/multiple2.htm");break;case"SHORT_VIEW":t=n("betslip/short.htm","betslip/short2.htm");break;case"SINGLES_VIEW":t=n("betslip/singles.htm","betslip/singles2.htm");break;case"FREEBET_VIEW":t=n("betslip/freebet.htm","betslip/freebet2.htm");break;case"BONUS_VIEW":t=n("betslip/bonusbet.htm","betslip/bonusbet2.htm");break;case"RETAIN_URL":t=n("betslip/retain.htm","betslip/retain2.htm");break;case"PLACEBET_ONECLICK_URL":t=n("betslip/placebetinoneclick.htm","betslip/placebetinoneclick2.htm");break;case"UPDATE_URL":t=n("betslip/updatebetinoneclick.htm","betslip/updatebetinoneclick2.htm");break;case"PLACETICKET_URL":t=n("betslip/placeticket.htm","betslip/placeticket2.htm");break;case"LOAD_URL":t=n("betslip/view/current.htm","betslip/current2.htm");break;case"UPDATE_CHOICES":t=n("betslip/updatechoices.htm","betslip/updatechoices2.htm");break;case"APPLY_ACTUAL_CHOICES":t=n("betslip/applyactualchoices.htm","betslip/applyactualchoices2.htm");break;case"CALC_CREDIT":t=n("betslip/calccredit.htm","betslip/calccredit2.htm")}return t}function _validateDate(e){if(!new RegExp("[0-9]{4}-[0-9]{2}-[0-9]{2}").test(e.value))return!0;var t=e.value.match(/(\d+)/g),n=new Date(t[0],t[1]-1,t[2]),a=new Date;e.diff&&a.setFullYear(a.getFullYear()+e.diff);var i=e.inThePast?a>n:a<n,r=$(e.element).parent().find("select");return i?e.settings.unhighlight(r,e.settings.errorClass,e.settings.validClass):e.settings.highlight(r,e.settings.errorClass,e.settings.validClass),i}function resizeCalc(){checkView()}function panbetInit(e){IS_MARATHON_CLIENT=void 0!==$("body").data("marathonClient"),IS_MARATHON_CLIENT||(resizeCalc(),$(window).resize(_.throttle(resizeCalc,300))),setPanbetAJAXSettings(),e&&window.setInterval("updateLoginTime()",1e3),IS_MARATHON_CLIENT||(getSessionControl().initSessionUpdate(),e&&getSessionControl().registerProlongateClientSessionOnAjax()),initFormValidator(),filterTopLinks();var t=!1;if(initData.persData){var n=new evercookie;for(var a in initData.persData)n.set(a,initData.persData[a]),a==Panbet.BONUS_MARK&&(t=!0)}e||t||(n=new evercookie).get(Panbet.BONUS_MARK,function(e,t){void 0!==e&&n.set(Panbet.BONUS_MARK,e)},1),showRedirectMessage(),initSyncTime()}function initSyncTime(){SyncTime.init({method:"POST",url:initData.syncTimeUrl,resyncInterval:initData.timeResyncInterval}),SyncTime.scheduleSync()}function sendDeliveryTime(e,t){initData.deliveryTimeTrackingEnabled&&setTimeout(function(){try{if(t&&t.timestamp){var n={type:e,destination:t.destination,time:SyncTime.getTime()-t.timestamp,length:t["content-length"]};$.post(initData.deliveryTimeUrl,n,null,"json")}}catch(e){}},0)}function showRedirectMessage(){$("#errorRedirectInfo").size()>0&&$("#errorRedirectInfo").modal({position:["20%"]})}function initFormValidator(){for(var e=document.forms,t=0;t<e.length;t++)-1==jQuery.inArray(e[t].id,Panbet.EXCLUDE_FORM)&&panbetValidate($(e[t]))}function setPanbetAJAXSettings(){$.ajaxSetup({cache:!1});var e=0;$(document).ajaxError(function(t,n,a,i){switch(e=n.status){case 403:return void handle403Error()}}),Panbet.punterKeyExist=$.cookie("PUNTER_KEY_EXISTS"),$.ajaxPreSuccess(function(e){return!(!e||!e.clickLogoutButton)||(!initData.isLogged||Panbet.punterKeyExist==$.cookie("PUNTER_KEY_EXISTS")||(Panbet.punterKeyExist=$.cookie("PUNTER_KEY_EXISTS"),Panbet.replaceTimeout=setTimeout("replacePage();",1e4),getAsyncDispatcher().getHideProgressHandler()(),$.modal.close(),$("#session_close_notification").modal({position:["20%"],escClose:!1}),!1))})}function handle403Error(){$.modal.close(),$("#forbidden").find("button").click(replacePage),$("#forbidden").modal({position:["20%"],escClose:!1})}function checkView(){var e=$("#js_topbar_messages");$("[data-topbar-fix]").each(function(){var t=$(this);if(t.css("top",""),e.length&&e.find("div").length){var n=e.outerHeight(),a=parseInt(t.css("top"),10);t.css({top:a+n},1e3),e.css("display","block")}})}function openWindow(e,t){var n=t.width||840,a=screen.width-n-20,i=t.height||.65*screen.height;return w=open(e,t.name||"help","location=0,menubar=0,toolbar=0,scrollbars=yes,resizable=yes,top=0,left="+a+",height="+i+",width="+n),w.focus(),w}function showHelp(e){if(!IS_MARATHON_CLIENT){var t=$(e);return t.data("showHelpLink")||(t.data("showHelpLink",!0),t.bind("showHelpWindow",function(e){e.preventDefault(),window.open(t.attr("href"),"help","width=1040, height=600, resizable=yes, scrollbars=yes").focus()})),t.trigger("showHelpWindow"),$.browser.msie&&parseInt($.browser.version,10)<9&&(event.returnValue=!1),!1}return!0}function showHelpForURL(e){window.open(e,"help","width=1040, height=600, resizable=yes, scrollbars=yes").focus()}function showChat(e,t){var n=screen.width/2-300;return e.stopPropagation(),e.preventDefault(),window.open($(t).attr("href"),"chat","width=600,height=600,top=0,left="+n),!1}function initAgreeTermsDialog(){$(document).on("click","#agree-terms-dialog [data-agree-dialog-ok]",function(){if(!this.agree){var e=this;e.agree=!0,$.post(initData.base_dir+"/agreeterms.htm").always(function(){e.agree=!1,location.reload(!0)})}}),$(document).on("click","#agree-terms-dialog [data-agree-dialog-cancel]",function(){$.modal.close()});var e=$("#agree-terms-dialog");e.length&&e.addModalToViewQueue(),$(document).delegate("[data-show-help]","click",function(e){if(!IS_MARATHON_CLIENT)return e.preventDefault(),window.open($(this).attr("data-show-help"),"help","width=1040, height=600, resizable=yes, scrollbars=yes").focus(),!1}),$(document).delegate("[data-show-link]","click",function(e){if(!IS_MARATHON_CLIENT)return e.preventDefault(),window.open($(this).attr("data-show-link"),"_blank"),!1})}function startAirbrakeClient(){if(initData.isAirbrakeClientEnabled)try{new airbrakeJs.Client({projectId:185599,projectKey:"7d54cb700ee05d483e2dd168401542d4"}).addFilter(function(e){return e.context.environment="production",e})}catch(e){}}function preventPrecedingToPasswordInputAutocomplete(e){var t=navigator.userAgent.toLowerCase();(t.indexOf("chrome")>=0||t.indexOf("mozilla")>=0)&&$('input[type=password][name="'+e+'"]:not(.hidden)').each(function(){for(var e=this.form,t=$("input",e),n=t.index(this);n>0;){var a=t.eq(--n);if("text"==a.attr("type")||"tel"==a.attr("type")){if("off"==a.attr("autocomplete")){a.after('<input type="text" class="hidden">');break}if(a.hasClass("hidden"))break}}})}function updateLoginTime(){initData.logintime++;var e=1*initData.logintime,t=Math.floor(e/3600),n=Math.floor((e-60*t*60)/60),a=Math.floor(e-60*t*60-60*n);(initData.isAlderney||initData.isSpain||initData.isItaly)&&0==a&&0==n&&showNotification(t)}function showNotification(e){getSessionControl().alertWindowOpened()||($("#on_line_notification_value").html(e),$("#on_line_notification").modal({position:["20%"]}))}function updateOnlineChatVisibility(){var e=$("#online_chat");if(e){var t=function(){initData.remainingSecondsToShowChat>0?(e.is(":hidden")&&e.show(),initData.remainingSecondsToShowChat--,setTimeout(t,1e3)):e.hide()};t()}}function updateFreebetHint(e){var t=!e||!e.freeBets||0==e.freeBets.length;$("#freebet-bonus-info").toggleClass("freebet-bonus-info-hide",t),$(document).trigger("headerHintFreeBetsModelUpdated",[e])}function convertJsonToArrayOfPairsNameValue(e){var t=[];return $.each(e,function(e,n){t.push({name:e,value:n})}),t}function createFormAndRedirect(e,t,n){var a=$("<form>").attr({method:t,action:getHttpsUrl(e)});$.each(n,function(){$("<input>").attr({type:"hidden",name:this.name,value:this.value}).appendTo(a)}),a.appendTo("body").submit()}function authInit(){new LoginView(new LoginController)}!function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(n){function a(){!e&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;e=!0;var r=new this;e=!1;for(var o in n)r[o]="function"==typeof n[o]&&"function"==typeof i[o]&&t.test(n[o])?function(e,t){return function(){var n=this._super;this._super=i[e];var a=t.apply(this,arguments);return this._super=n,a}}(o,n[o]):n[o];return a.prototype=r,a.constructor=a,a.extend=arguments.callee,a}}(),function(){try{if(Log)return}catch(e){}var e=function(){function n(e,t){"object"!=typeof window.console[e]?c[e.toUpperCase()]=a(t):c[e.toUpperCase()]=i(t)}function a(e){return function(t){window.console[e].apply(window.console,$.isArray(t)?t:[t])}}function i(e){return function(t){Function.prototype.call.call(window.console[e],window.console,t)}}function r(e,t){return e>=t}function o(e,t){var n=c[e],a=s[e];if(n&&r(l,a)){try{var i=Array.prototype.slice.call(arguments);return i.shift(),void n.apply(this,i)}catch(e){}try{return void n(t)}catch(e){}}}var s={TRACE:65536,DEBUG:4096,INFO:256,WARN:16,ERROR:1,DISABLED:0},c={},l=initData&&initData.isTestMode?s.DEBUG:s.WARN;try{void 0!==window.console&&$.each(["trace","debug","info","warn","error"],function(e,t){void 0!==window.console[t]?n(t,t):void 0!==window.console.log&&n(t,"log")})}catch(e){}return{TRACE:s.TRACE,DEBUG:s.DEBUG,INFO:s.INFO,WARN:s.WARN,ERROR:s.ERROR,DISABLED:s.DISABLED,trace:function(e){o("TRACE",e)},debug:function(e){o("DEBUG",e)},info:function(e){o("INFO",e)},warn:function(e){o("WARN",e)},error:function(e){o("ERROR",e)},setLogLevel:function(e){l=e},setLevelDisabled:function(){this.setLogLevel(this.DISABLED)},setLevelTrace:function(){this.setLogLevel(this.TRACE)},setLevelDebug:function(){this.setLogLevel(this.DEBUG)},setLevelInfo:function(){this.setLogLevel(this.INFO)},setLevelWarn:function(){this.setLogLevel(this.WARN)},setLevelError:function(){this.setLogLevel(this.ERROR)},isDisabled:function(){return l==this.DISABLED},isTraceEnabled:function(){return r(l,this.TRACE)},isDebugEnabled:function(){return r(l,this.DEBUG)},isInfoEnabled:function(){return r(l,this.INFO)},isWarnEnabled:function(){return r(l,this.WARN)},isErrorEnabled:function(){return r(l,this.ERROR)},getLogLevel:function(){return l},getLogger:function(n,a){return n?(a||t[n]||(t[n]=new e),t[n]):t.GLOBAL}}},t={GLOBAL:new e};window.Log=t.GLOBAL}(),showWarnDialog=function(e){$("#"+e).modal({position:["20%"]}),$("#"+e).find(".no").focus()},Function.prototype.bind||(Function.prototype.bind=function(e){if(arguments.length<2&&void 0===e)return this;var t=this,n=Array.prototype.slice.call(arguments);return n.shift(),function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),PAGES={JOIN:"join.htm",ID_UPLOAD:"idupload.htm"},$(document).on("blur","#form_maskedPhone",function(){panbetValidate($(this))}),function(){var e=[];jQuery.fn.extend({addModalToViewQueue:function(t){var n=this;if(n.length){var a=(t=t||{}).onClose;t.onClose=function(){if($.isFunction(a)?a():this.close(),e.shift(),e.length>0){var t=e[0];panbetModal(t.element,t.settings)}},e.push({element:n,settings:t}),1==e.length&&(closeModal(),panbetModal(n,t))}}})}(),PROGRESS_DIALOG=function(){var e=!1;return{show:function(){e||($("#progress_dialog").addModalToViewQueue({position:["20%"]}),e=!0)},hide:function(){e&&($.modal.close(),e=!1)}}}(),$(document).ready(function(){$(".blink").each(function(){var e=$(this),t="blinkState";setInterval(function(){e.hasClass(t)?e.removeClass(t):e.addClass(t)},1e3)}),$.browser.msie&&parseInt($.browser.version)<9&&($("#js_topbar_optimum_browser").show(),checkView()),positionStickySupported(),$(document).on("click","[data-show-modal-dialog-by-id]",showModalDialogById)}),function(e){var t=Class.extend({MAX_REQUEST_ATTEMPTS:5,PROGRESS_TIMEOUT:1e3,REQUEST_TIMEOUT:18e4,SHOW_PROGRESS:!0,QUEUE_NAME:"request_queue",_progressTimers:[],_failedRequests:{},init:function(e){if(e)for(var t in e){var n=e[t];n instanceof Function||(this[t]=n)}},postAndParseAdv:function(e){this.postAndParse(e.url,e.data,e.success,e.beforeSend,e.error,e.error405,e.showProgress,e.hideProgress)},postAndParse:function(e,t,n,a,i,r,o,s){var c=this._getResponseErrHandler(e,t,n,a,i,r,o,s);this.post(e,t,function(e){var t=null;try{t=JSON.parse(e)}catch(e){t={error:"Fail to parse responce."}}t.error?(i||c)(t):n(t)},a,i,r,o,s)},post:function(e,t,n,a,i,r,o,s){this.showProgress(o),this._post(e,t,n,a,i,r,s)},hasActiveCalls:function(e){var t=this.QUEUE_NAME;if(document.ajaxq&&document.ajaxq.q&&document.ajaxq.q[t]&&0!=document.ajaxq.q[t].length){q=document.ajaxq.q[t];for(i in q){var n=q[i].context;if(!n.exhausted)return e&&(n.onResponse=e),!0}}return!1},destroy:function(){e.ajaxq(this.QUEUE_NAME)},getHideProgressHandler:function(e){var t=this._progressTimers,n=this;return function(){if(n.SHOW_PROGRESS){if(e)return e(),!0;if(t&&t.length>0){for(i in t)window.clearTimeout(t[i]);t=[],PROGRESS_DIALOG.hide()}}}},showProgress:function(e){var t=this._progressTimers;if(this.SHOW_PROGRESS){if(e)return e(),!0;t.push(window.setTimeout(function(){showProgressModal()},this.PROGRESS_TIMEOUT))}},_post:function(t,n,a,i,r,o,s){var c=this._getDefaultErrHandler(t,n,a,i,r,s),l=this.getHideProgressHandler(s),u=!!r&&function(e,t,n){l(),r(e,t,n)},d={contentType:"application/x-www-form-urlencoded",dataType:"text",timeout:this.REQUEST_TIMEOUT,type:"POST",url:t,context:{},data:n,success:function(e){this.exhausted=!0,l(),a(e),this.onResponse&&this.onResponse()},error:function(e,t,n){switch(this.exhausted=!0,e.status){case 503:l();break;case 405:l(),o?o(e):c(e,t,n);break;default:(u||c)(e,t,n)}}};i&&(d.beforeSend=i),e.ajaxq(this.QUEUE_NAME,d)},_getResponseErrHandler:function(e,t,n,a,i,r,o){var s=this.getHideProgressHandler(o),c=this._getResend(e,t,n,a,i,r,o);return function(e){e&&e.error&&"string"==typeof e.error?(s(),alert(e.error)):c()}},_getDefaultErrHandler:function(e,t,n,a,i,r,o){var s=this._getResend(e,t,n,a,i,r,o);return function(e,t,n){s()}},_getResend:function(e,t,n,a,i,r,o){var s=this.getHideProgressHandler(o),c=this._failedRequests,l=this;return function(){c[e]||(c[e]={attempts:1});var u=c[e].attempts;return l.MAX_REQUEST_ATTEMPTS-1>u?(c[e].attempts++,void l._post(e,t,n,a,i,r,o)):l.MAX_REQUEST_ATTEMPTS-1===u?(c[e].attempts++,void l._post(e,t,n,a,i,r,o)):void(l.MAX_REQUEST_ATTEMPTS!==u||s())}}}),n=null;window.AsyncDispatcher=t,window.getAsyncDispatcher=function(){return n||(n=new AsyncDispatcher),n}}(jQuery),Clock=function(){this.currentTime={},this.onTimerTick=function(){this.currentTime instanceof Date||this.setServerTimeString(initData.serverTime,initData.tzPrefix),this.currentTime.setSeconds(this.currentTime.getSeconds()+1),this.displayTime()},this.setServerTimeString=function(sServerTime,sServerTZ){Clock.TIME_MASK=Clock.TIME_MASK.replace("{tz}",sServerTZ);var oDate=eval("new Date("+this.applyMonthFormat(sServerTime)+")");this.currentTime=oDate},this.applyMonthFormat=function(e){var t=e.split(",");return t[1]=t[1]-1,t.join()},this.displayTime=function(){var e=Clock.TIME_MASK;e=(e=(e=(e=(e=e.replace("{d}",this.pad(this.currentTime.getDate()))).replace("{m}",this.pad(this.currentTime.getMonth()+1))).replace("{y}",this.pad(this.currentTime.getFullYear()%100))).replace("{h}",this.pad(this.currentTime.getHours()))).replace("{mi}",this.pad(this.currentTime.getMinutes()));var t=$("#timer");t.length?(t[0].innerHTML="",t[0].appendChild(document.createTextNode(e))):clearInterval(Clock.TIMER)},this.pad=function(e){return(e<10?"0":"")+e}},$(document).ready(function(){Clock.TIME_MASK="{d}.{m}.{y}, {h}:{mi} ({tz})",Clock._instance=new Clock,Clock.TIMER=setInterval("Clock._instance.onTimerTick()",1e3),window.getClock=function(){return Clock._instance}}),function(e,t){t(document).ready(function(){var e=!1;t(document).on("click",".js-credit-calc-button",function(){if(e)return!1;e=!0,t(this).hide(),t(".js-credit .loading").show();var n=function(){e=!1,t(".js-credit .loading").hide(),setTimeout(function(){t(".js-credit-calc-button").css("display","")},1500)},a=function(){return{url:resolveBetslipUrl("CALC_CREDIT"),type:"POST",success:function(e){var a=t(e);t(".js-credit-calc-button",a).hide(),t(".js-credit").html(a),n()}}},i=a();return i.error=function(e,i,r){switch(e.status){case 405:initData.isUseBetslip2=JSON.parse(e.getResponseHeader("isUsebetslip2"));var o=a();t.ajax(o);break;default:n()}},t.ajax(i),!1})})}(window,jQuery);var OpenBetsInfo;OpenBetsInfo||(OpenBetsInfo={}),OpenBetsInfo.Controller=function(){var e=[];this.getCalculatedBets=function(){return _.filter(e,function(e){return!_.isNull(e.payoutTime)&&!_.isUndefined(e.payoutTime)})},this.getNotPayoutBetIds=function(){return _.filter(e,function(e){return _.isNull(e.payoutTime)||_.isUndefined(e.payoutTime)})},this.removeBetInfo=function(t){e=_.reject(e,function(e){return e.betId===t})},this.setOpenBetsInfo=function(t){e=_.map(t,function(e){return{betId:e.betId,payoutTime:e.payoutTime}})},this.setBetInfoFromHeaders=function(t){e=_.map(t,function(e){return{betId:e.betId,payoutTime:e.payoutTime,betResult:e.betResult}})},this.getOpenBetIds=function(){return _.map(e,function(e){return e.betId})}};var WebLocalStorage;WebLocalStorage||(WebLocalStorage={}),WebLocalStorage.Controller=function(){function e(){return t in window&&null!=window[t]}var t="localStorage";this.getParsedItem=function(t){if(e()){var n=localStorage.getItem(t);if(n&&""!=n)return JSON.parse(n)}return null},this.saveObject=function(t,n){e()&&(n=null!==n&&void 0!==n?JSON.stringify(n):"",localStorage.setItem(t,n))},this.remove=function(t){e()&&t&&localStorage.removeItem(t)}};var BetslipStorageFacade;BetslipStorageFacade||(BetslipStorageFacade={}),BetslipStorageFacade.Controller=function(){var e=new WebLocalStorage.Controller,t={KEY_IS_BETSLIP_ACTIVE:"isBetslipActive",KEY_IS_COUPON_OPEN:"isCouponOpen",KEY_VISIBLE_OPEN_BET_IDS:"openBetIds"};this.isOpenCoupon=function(){return!0===e.getParsedItem(t.KEY_IS_COUPON_OPEN)},this.isBetslipActive=function(){return!0===e.getParsedItem(t.KEY_IS_BETSLIP_ACTIVE)},this.getVisibleOpenBetIds=function(){var n=e.getParsedItem(t.KEY_VISIBLE_OPEN_BET_IDS);return null!=n?n:[]},this.setIsOpenCoupon=function(n){e.saveObject(t.KEY_IS_COUPON_OPEN,n)},this.setIsBetslipActive=function(n){e.saveObject(t.KEY_IS_BETSLIP_ACTIVE,n)},this.addVisibleOpenBetId=function(n){var a=this.getVisibleOpenBetIds();a.push(n),e.saveObject(t.KEY_VISIBLE_OPEN_BET_IDS,a)},this.removeVisibleOpenBetId=function(n){var a=this.getVisibleOpenBetIds(),i=$.inArray(n,a);-1!=i&&(a.splice(i,1),e.saveObject(t.KEY_VISIBLE_OPEN_BET_IDS,a))},this.clearCouponStateStorage=function(){_.values(t).forEach(function(t){e.remove(t)})},this.toggleOpenBets=function(){this.isBetslipActive()?(this.setIsBetslipActive(!1),this.setIsOpenCoupon(!0)):this.setIsOpenCoupon(!this.isOpenCoupon())},this.toggleBetslip=function(){this.isBetslipActive()?this.setIsOpenCoupon(!this.isOpenCoupon()):(this.setIsBetslipActive(!0),this.setIsOpenCoupon(!0))},function(){var n=this;null==e.getParsedItem(t.KEY_IS_BETSLIP_ACTIVE)&&n.setIsBetslipActive(!0),null==e.getParsedItem(t.KEY_IS_COUPON_OPEN)&&n.setIsOpenCoupon(isWideScreen()),null==e.getParsedItem(t.KEY_VISIBLE_OPEN_BET_IDS)&&e.saveObject(t.KEY_VISIBLE_OPEN_BET_IDS,[])}.call(this),this.toggleOpenBet=function(e){$.inArray(e,this.getVisibleOpenBetIds())>-1?this.removeVisibleOpenBetId(e):this.addVisibleOpenBetId(e)}},BetslipStorageFacade.controller=new BetslipStorageFacade.Controller;var OpenBetsStyle;OpenBetsStyle||(OpenBetsStyle={}),OpenBetsStyle.Controller=function(){function e(){return $("li[data-open-bet-id]")}function t(t){return _.find(e(),function(e){return $(e).data("openBetId")===t})}var n=new BetslipStorageFacade.Controller;this.updateCoupon=function(){function e(e,t){$(e).addClass("active"),$(t).removeClass("active")}var t=$("#coupon_body");if(!n.isOpenCoupon()){t.hide();var a=$("#betslip-container");return a.is(".coupon-not-wide")&&a.addClass("with-bottom-border"),void adjustScroll()}n.isBetslipActive()?(e($("#header_bet_slip"),$("#header_open_bets")),toggleStakeNo()):(e($("#header_open_bets"),$("#header_bet_slip")),showNoOpenBetsMessage(),refreshBetslipView(n.getVisibleOpenBetIds()),t.show()),adjustScroll(),displaySelectionName()},this.synchronizedVisibleOpenBets=function(){var t=_.map(e(),function(e){return $(e).data("openBetId")});n.getVisibleOpenBetIds().forEach(function(e){_.contains(t,e)||n.removeVisibleOpenBetId(e)})},this.hideOpenBet=function(a){n.removeVisibleOpenBetId(a),$(t(a)).next(".open-bet-details").remove(),$(t(a)).remove(),0===e().length&&$("#no_open_bets").show(),$("#open_bets_count").text(e().length),adjustScroll(),rightColumnPaddingScrollWidth()},this.updateBetStatuses=function(e){n.isBetslipActive()||e.forEach(function(e){var t=$("[data-bet-result='"+e.betId+"']");t.find("[data-bet-result-unsettled]").hide(),t.find("[data-bet-result-paid]").show(),t.find("[data-bet-result-holder]").show().text(" "+e.betResult),$("[data-payout-return='"+e.betId+"']").find(".bet-text-value").text(e.betResult).removeClass("hidden-important"),$("[data-potential-return='"+e.betId+"']").addClass("hidden-important")})},this.refreshOpenBets=function(e){if(!BetslipStorageFacade.controller.isBetslipActive()){var t=this;$("[data-open-bet-id]").each(function(){var n=$(this).data("openBetId");_.contains(e.getOpenBetIds(),n)||t.hideOpenBet(n)})}$("#open_bets_count").text(e.getOpenBetIds().length),adjustScroll()}},OpenBetsStyle.controller=new OpenBetsStyle.Controller;var CashOut;CashOut||(CashOut={}),CashOut.Renderer=function(){function e(e,t){$("[data-cashout-betid='"+e+"']").find(".bet-label").text(t)}function t(e,t){var n=_.findWhere(c,{type:e.getStatus()});n&&($("[data-cashout-betid="+e.getBetId()+"]").attr("data-cashout-status",n.type),_.each(n.actions,function(n){n(e,t)}))}function n(e,t){("REJECTED"==e.getStatus()||"OFFER_CHANGE_REJECTED"==e.getStatus()&&"OFFER_MISMATCH"==e.getCause())&&a(e,t)}function a(e,t){var n=$("[data-cashout-betid='"+e.getBetId()+"']").find("[data-warning-icon]");n.data("cashoutHint",function(e){return"OFFER_MISMATCH"==e?_cashoutTexts.CASHOUT_CHANGED:_cashoutTexts.CASHOUT_REJECTED}(e.getCause())),t&&n.trigger("cashout.changed")}function i(e){$("[data-cashout-betid='"+e.getBetId()+"']").find(".cashout-button").find(".bet-text-value").text(e.getPayout())}function r(e){$("[data-cashout-betid='"+e+"']").find(".cashout-button, [data-cashout-info]").removeClass("hidden-important")}function o(e){$("[data-cashout-betid='"+e+"']").find(".cashout-button, [data-cashout-info]").addClass("hidden-important")}function s(e){return"PLACEMENT"==e.getStatus()||"REJECTED"!=e.getStatus()&&0!=e.getPayout()?r:o}var c=[{type:"PLACEMENT",actions:[]},{type:"REJECTED",actions:[n]},{type:"OFFER_CHANGE",actions:[]},{type:"PAID",actions:[function(t){e(t.getBetId(),_cashoutTexts.CASHOUT_PAID);var n=$("[data-bet-result='"+t.getBetId()+"']");n.find("[data-bet-result-unsettled]").hide(),n.find("[data-bet-result-paid]").show(),n.find("[data-bet-result-holder]").show().text(" "+t.getPayout()),$("[data-potential-return='"+t.getBetId()+"']").addClass("hidden-important")}]},{type:"DELAY2",actions:[function(t){e(t.getBetId(),_cashoutTexts.CASHOUT_ORDERED)}]},{type:"DELAY1",actions:[]},{type:"OFFER_CHANGE_REJECTED",actions:[n,function(t){e(t.getBetId(),_cashoutTexts.CASHOUT)}]}];this.hideCashout=function(e){o(e)},this.renderOffer=function(e,n){t(e,n),i(e),s(e)(e.getBetId())},this.renderOffers=function(e,t){var n=this;$.each(e,function(e,a){n.renderOffer(a,t)})}},CashOut.renderer=new CashOut.Renderer,function(e){var t=Class.extend({depositButton:null,resultDialog:null,printButton:null,depositMsg:null,betresult:null,okButton:null,detailResultContent:null,detailResult:null,placeChangedTerms:null,placeAmendedStake:null,cancelButton:null,init:function(){this.resultDialog=e("#result\\-dialog"),this.betresult=e("#betresult"),this.detailResult=e("#detail\\-result"),this.detailResult.hide(),this.detailResultContent=e("#detail\\-result\\-content"),this.depositMsg=e("#deposit\\-msg"),this.depositMsg.hide(),this.placeChangedTerms=this.bindButton("#place\\-changed\\-terms"),this.placeAmendedStake=this.bindButton("#place\\-amended\\-stake"),this.depositButton=this.bindButton("#deposit\\-button"),this.cancelButton=this.bindButton("#cancel\\-button"),this.printButton=this.bindButton("#print\\-bet"),this.okButton=this.bindButton("#ok\\-button")},show:function(e){this.init()},bindButton:function(t){var n=e(t);return n.unbind("click"),n.hide(),n}}),n=t.extend({init:function(){this._super()},show:function(e){this._super(e),this.okButton.click(function(){closeModal()}),this.okButton.show(),this.printButton.click(function(){getBetslip().printBet(e.ticket_id)}),this.printButton.show(),this.betresult.html(e.messages[0]),this.resultDialog.addModalToViewQueue({position:["20%"]})}}),a=t.extend({init:function(){this._super()},show:function(e){this._super(e);var t=e.messages,n=t&&t.length>0?t.splice(0,1)[0]:e.error?e.error:!!e.ERROR&&e.ERROR;if(!n)return!1;this.betresult.html(n),t&&t.length>0?(this.detailResultContent.html(this.format(t)),this.detailResult.show()):this.detailResult.hide(),e.oom&&(this.depositButton.show(),this.depositMsg.show())},format:function(e){for(var t="",n=0,a=e.length;n<a;n++)t+=e[n]+"<br/>";return t.substr(0,t.length-5)}}),i=a.extend({init:function(){this._super()},show:function(e){this._super(e);this.detailResult,this.depositButton,this.depositMsg;this.okButton.click(function(){closeModal(),e.refresh&&location.reload()}),this.okButton.show(),this.resultDialog.addModalToViewQueue({position:["20%"]})}}),r=a.extend({init:function(){this._super()},show:function(e){this._super(e);var t=this.cancelButton;t.click(function(){closeModal()}),t.show();var n=this.placeChangedTerms;n.click(function(){e.oneClickChoice?getOneClick().retry(e.oneClickChoice):getBetslip().continuePlaceBet(initData.isLogged),closeModal()}),n.show(),this.resultDialog.addModalToViewQueue({position:["20%"]})}}),o={AMENDED_STAKE_ERROR:new(a.extend({init:function(){this._super()},show:function(e){this._super(e);var t=this.cancelButton;t.click(function(){closeModal()}),t.show();var n=this.placeAmendedStake;n.click(function(){e.minmoney&&getBetslip().fixStake(e.minmoney),e.maxmoney&&getBetslip().fixStake(e.maxmoney),e.oneClickChoice?getOneClick().retry(e.oneClickChoice):getBetslip().continuePlaceBet(initData.isLogged),closeModal()}),n.show(),this.resultDialog.addModalToViewQueue({position:["20%"]})}})),CHANGED_TERMS_ERROR:new r,BET_ERROR:new i,OK:new n};window.showResultDialog=function(e,t){var n=o[String(e)];n&&(n.init(),n.show(t))}}(jQuery),function(e){function t(e){f=Boolean(e)}function n(e){if(!e)return!1;_=String(e)}function a(e){if(!e)return!1;g=String(e)}function i(e){m=Boolean(e)}function r(e){if(!e)return!1;v=String(e)}function o(e){if("string"==typeof e)try{E=jQuery.parseJSON(e)}catch(e){E=[]}else E=e}function s(e){A=Boolean(e)}function c(e){return e.error||e.ERROR}function l(){var t=e("#bet_in_one_click_checkbox_state").data("checked");null!=t&&void 0!=t&&e("#bet-in-one-click-checked").prop("checked",t)}function u(t){updateFreebetHint(t.availableFreebets);var i=null,r=null,o=null;if(!(o=t.content)||!(r=t.currentpage)||!(i=p[r]))return!1;e("#betslip\\-container").html(o),a(t.previouspage),n(r),adjustScroll(),setupBetPlacingModeHandler();var s=t.selectionuids,c=e.isArray(s)?getHighlightedSelectionUIDs(s):[],u=t.openbetsinfo?t.openbetsinfo:[];return e(document).trigger("betslip.loaded",[c,u,t.serverTime]),OpenBetsStyle.controller.updateCoupon(),l(),i._activate(),i}function d(e){betslipAjaxPost({postAction:e,data:{},success:function(e){loadBetslipContent(e)}})}function h(t){var n=e(t).data("sel"),a=e("span[data-selection-key]:first",t).data("selectionKey").split("@");return n.mid=a[0],n.u=a[0]+","+a[1],n.en=e(t).parents("[data-event-name]:first").data("eventName"),n.l=e(t).parents("[data-event-name]:first").data("live"),n}PLACETICKET_URL="PLACETICKET_URL",PLACEBET_URL="PLACEBET_URL",REMOVE_URL="REMOVE_URL",RETAIN_URL="RETAIN_URL",CLEAR_URL="CLEAR_URL",LOAD_URL="LOAD_URL",ADD_URL="ADD_URL",SAVE_URL="SAVE_URL",PLACEBET_ONECLICK_URL="PLACEBET_ONECLICK_URL",UPDATE_URL="UPDATE_URL",SHORT_VIEW="SHORT_VIEW",SINGLES_VIEW="SINGLES_VIEW",ACCUMULATOR_VIEW="ACCUMULATOR_VIEW",ANTIEXPRESS_VIEW="ANTIEXPRESS_VIEW",MULTIPLE_VIEW="MULTIPLE_VIEW",BONUS_VIEW="BONUS_VIEW",FREEBET_VIEW="FREEBET_VIEW";var p={},f=!1,_="SHORT",g="SHORT",E=[],m=!1,v=null,A=!1;window.loadCurrentBetslipPage=function(){betslipAjaxPost({postAction:LOAD_URL,data:{firstLoad:!0},success:function(e){loadBetslipContent(e)}},!0)},window.betslipAjaxPost=function(e,t){e.url=resolveBetslipUrl(e.postAction),e.error405=function(n){initData.isUseBetslip2=JSON.parse(n.getResponseHeader("isUsebetslip2")),e.url=resolveBetslipUrl(e.postAction),e.error405=void 0,t?new AsyncDispatcher({SHOW_PROGRESS:!1}).postAndParseAdv(e):getAsyncDispatcher().postAndParseAdv(e)},t?new AsyncDispatcher({SHOW_PROGRESS:!1}).postAndParseAdv(e):getAsyncDispatcher().postAndParseAdv(e)},window.loadBetslipContent=function(e){if(null==e)return!1;if(c(e))return showResultDialog("BET_ERROR",e),!1;var n=null;if(n=u(e)){o(e.halfplaced),r(e.puntermsg);var a=e.confirmplacebet,i=e.cansettlebets,l=e.isLogged;return t(i),s(l),i&&a&&n.confirmPlaceBet(l,!0),setupBetslipPlaceModeBlockVisibility(),showStakeNo(),!0}return!1};var T=Class.extend({LIVE_CHECK_DELAY:500,REQUEST_TIMEOUT:18e4,QUEUE_NAME:"bet_save_queue",_blockPlaceBetButton:!1,_placeBetTransaction:!1,_contentUrl:null,_saveTimeouts:{},placeBet:function(e,t){},checkBet:function(e){},calcBets:function(){},hasAnyStake:function(){return!1},_activate:function(){},init:function(e){this._contentUrl=e},_abortPlace:function(t){t&&(e("#common_messenger_msg").html(t),e("#common_messenger").addModalToViewQueue({position:["20%"]}))},confirmPlaceBet:function(t,n){if(0==e("#betslip_placebet_btn_id").data("enabled"))return!1;if(n&&(m=n),!m)return!1;if(!f)return this._abortPlace(v),!1;var a=this;if(getAsyncDispatcher().hasActiveCalls(function(){a._enablePlaceBetButton()}))return this._disablePlaceBetButton(),!1;t&&(A=t);var r=e("#total_cost"),o=r?r.html():null;o&&(o=o.replace(/(,)/g,"")),isNaN(o)||o<=0?this.hasAnyStake()?this.showInvalidStakeDialog():this.showEnterStakeDialog():E&&E.length>0?showHalfPlaceWarning(E):this.continuePlaceBet(A),i(!1)},continuePlaceBet:function(e){if(!this._placeBetTransaction)if(e&&(A=e),A){var t=this._betPlacingSuccess,n=this._betPlacingFailure;this._placeBetTransaction=!0,this.placeBet(t,n)}else showLogin(!0)},printBet:function(e){var t=initData.base_dir+"/printbet.htm?ticketId="+e;window.open(t)},_betPlacingFailure:function(e){var t=getBetslip();switch(t.resetPlaceBetTransaction(),e.status){case 401:t.handlers.LOGIN_REQUIRED();break;default:t.handlers.ERROR({messages:[PanbetConst.Betslip.PLACE_BET_ERROR_MESSAGE]})}},handlers:{OK:function(e){return TrackingEngine.trigger(TrackingEngine.EVENT.BET_PLACED,e.eventIdsInTicket),getBetslip()._processOk(e,e.balance),!0},LIVE_DELAY:function(e){return getBetslip()._processDelay(e.ticket_id,e.delay),!1},ERROR:function(e){var t=e.placebetdelay;return null!=t&&0!=t?(getBetslip()._processRepeatDelayPlacebet(t),!1):(TrackingEngine.trigger(TrackingEngine.EVENT.BET_ABORTED,e.eventIdsInTicket),getBetslip()._processError(e),!0)},LOGIN_REQUIRED:function(e){closeModal(),i(!0),s(!1),getBetslip().confirmPlaceBet()}},_betPlacingSuccess:function(e){var t=getBetslip(),n=e.result;t.resetState&&t.resetState(),t.handlers[n](e)&&t.resetPlaceBetTransaction()},_processOk:function(e,t){try{updateBalance(t),u(e)}catch(e){Log.error(e)}showResultDialog("OK",e)},_processDelay:function(e,t){if(!isNaN(t)&&null!=e){showProgressModal();var n=this;window.setTimeout(function(){n.placeTicket(e)},t)}},_processError:function(e){try{u(e)}catch(e){Log.error(e)}e.amendedstake&&!e.oom?showResultDialog("AMENDED_STAKE_ERROR",e):e.changedterms&&!e.oom?showResultDialog("CHANGED_TERMS_ERROR",e):e.showPunterLegalAgreementDialog?(PunterLegalAgreementDialogHelper.setConfirmationRequired(!0),PunterLegalAgreementDialogHelper.showLegalAgreementPopup()):showResultDialog("BET_ERROR",e)},_processRepeatDelayPlacebet:function(e){isNaN(e)||(getBetslip().resetPlaceBetTransaction(),showProgressModal(),window.setTimeout(function(){getBetslip().confirmPlaceBet(initData.isLogged,!0)},e))},placeTicket:function(e){var t=this._betPlacingSuccess,n=this._betPlacingFailure;betslipAjaxPost({postAction:PLACETICKET_URL,data:{t:e},success:t,beforeSend:!1,error:n})},addRemove:function(e){var t=null;try{t=window.location.href}catch(e){}var n=h(e);"SHORT"==_&&BetslipStorageFacade.controller.isOpenCoupon()&&!isWideScreen()&&BetslipStorageFacade.controller.setIsOpenCoupon(!1),BetslipStorageFacade.controller.setIsBetslipActive(!0),BetslipRemoveChoiceManager.controller.contains(n.u)?this.remove(n.u):betslipAjaxPost({postAction:ADD_URL,data:{ch:JSON.stringify(n),url:t,ws:!0},success:function(e){loadBetslipContent(e),TrackingEngine.trigger(TrackingEngine.EVENT.BETSLIP_CHOICE_ADDED,n.u)}})},remove:function(e){var t={url:e,page:_};betslipAjaxPost({postAction:REMOVE_URL,data:t,success:function(t){loadBetslipContent(t),TrackingEngine.trigger(TrackingEngine.EVENT.BETSLIP_CHOICE_REMOVED,e)}}),this._resetStates()},removeAll:function(){betslipAjaxPost({postAction:CLEAR_URL,data:{},success:function(e){loadBetslipContent(e),TrackingEngine.trigger(TrackingEngine.EVENT.BETSLIP_ALL_CHOICES_REMOVED)}}),this._resetStates()},noSelections:function(){e.modal.close(),e("#no_selections").modal({position:["20%"]})},setRetain:function(t){var n={type:"POST",url:resolveBetslipUrl(RETAIN_URL),data:{retain:t},error:function(t){405==t.status&&(initData.isUseBetslip2=JSON.parse(t.getResponseHeader("isUsebetslip2")),n.url=resolveBetslipUrl(RETAIN_URL),e.ajax(n))}};e.ajax(n)},hideCursor:function(){var t=e(".js-focusable:focus");t&&(t.addClass("js-focused"),t.blur())},showCursor:function(){var t=e(".js-focused");t&&(t.removeClass("js-focused"),t.css("position","fixed").focus().css("position","static"))},_resetStates:function(){for(var e in p)p[e].resetState&&p[e].resetState()},_placeBetButton:function(){var t=e("#but\\-place\\-bet");return!!t&&e(t)},_disablePlaceBetButton:function(){this._blockPlaceBetButton=!0;var e=this._placeBetButton();e&&(e.removeAttr("href"),e.addClass("disabled"))},_enablePlaceBetButton:function(){this._blockPlaceBetButton=!1;var e=this._placeBetButton();e&&(e.attr("href","javascript://"),e.removeClass("disabled"))},showEnterStakeDialog:function(){e.modal.close(),e("#enter_stake_dialog").modal({position:["20%"]})},showInvalidStakeDialog:function(){e.modal.close(),e("#invalid_stake_dialog").modal({position:["20%"]})},_abortSave:function(t){var n=this._saveTimeouts[t];window.clearTimeout(n),e.ajaxq(this.QUEUE_NAME)},_queueSave:function(e,t){this._saveTimeouts[e]&&window.clearTimeout(this._saveTimeouts[e]);var n=this;this._saveTimeouts[e]=window.setTimeout(function(){n._save(t)},this.LIVE_CHECK_DELAY)},_save:function(t){0==t.st&&delete t.st;var n={timeout:this.REQUEST_TIMEOUT,url:resolveBetslipUrl(SAVE_URL),type:"POST",context:{},data:t,success:function(e){Log.debug("Betslip state saved successfuly.")},error:function(t,a,i){405==t.status?(initData.isUseBetslip2=JSON.parse(t.getResponseHeader("isUsebetslip2")),n.url=resolveBetslipUrl(SAVE_URL),e.ajax(n)):Log.warn("Fail to save betslip state")}};e.ajaxq(this.QUEUE_NAME,n)},_stake:function(t){var n=null,a=null,i=this._stakeEl(t);return i&&(i=e(i),n=e.trim(i.attr("value")),a=e.trim(i.attr("rel"))),this._stakeVal(n,a)},_stakeVal:function(e,t){if(e&&t&&""!=e&&"."!=e&&e!=t){e=e.replace(/,/g,"");var n=parseFloat(e);if(!isNaN(n)&&n>=0&&n==e)return n}return 0},_isew:function(e){return hasAttr(this._isewEl(e),"checked")},_isvip:function(e){return hasAttr(this._isvipEl(e),"checked")},_totalReturns:function(t){e("#total_returns").html(betslipFormatValue(t))},_expressBonus:function(t){var n=e("#total_express_container");n&&t>0?(e("#total_express").html(betslipFormatValue(t)),n.show()):n&&n.hide()},_totalCost:function(t){e("#total_cost").html(betslipFormatValue(t))},_disableEl:function(t){return!!t&&(e(t).attr("disabled","disabled"),!0)},_enableEl:function(t){return!!t&&(e(t).removeAttr("disabled"),!0)},_hideEl:function(t){if(!t)return!1;e(t).hide()},_showEl:function(t){if(!t)return!1;e(t).show()},_uncheckEl:function(t){if(!t)return!1;e(t).removeAttr("checked")},_checkEl:function(t){if(!t)return!1;e(t).attr("checked","checked")},_hasVip:function(e,t){var n=this._vipavaliable(e),a=this._maxStake(e),i=this._minVip(),r=this._vipenabled(e);return this._isNum(t)&&n&&r&&this._isNum(i)&&this._isNum(a)&&i<=t&&t>a},_vipavaliable:function(e){var t=$$("vip.avaliable."+e);return!!t&&"true"===t.value},_vipenabled:function(e){var t=$$("vip.enabled."+e);return!!t&&"true"===t.value},_maxStake:function(e){var t=$$("max."+e);return this._parseFloat(t)},_minVip:function(){var e=$$("min.vip");return this._parseFloat(e)},_bonusSelectionsCount:function(){var e=$$("bonus.selections.count");return this._parseFloat(e)},_bonusMaxPercent:function(){var e=$$("bonus.max.percent");return this._parseFloat(e)},_parseFloat:function(t){if(t){var n=parseFloat(e(t).val());return!isNaN(n)&&n}return!1},_isNum:function(e){return"number"==typeof e},_putCursor:function(t){if(!t)return!1;t.length&&t.length>0&&(t=t[0]),isEmpty(t)?t.id&&setTimeout(function(){$$(t.id).focus()},10):e(t).putCursorAtEnd()},_vipBetHint:function(){e(".vip-bet .hint").hover(function(){var t=e(this).position(),n=t.left-103,a=t.top+16;e(this).next(".window-message").css({left:n,top:a,margin:"0"})}),e("#vip-bet-container-singles .hint").hover(function(){var t=e(this).position(),n=t.left-103+37+50,a=t.top+16;e(this).next(".window-message").css({left:n,top:a,margin:"0 !important"})})},fixStake:function(e){},resetPlaceBetTransaction:function(){this._placeBetTransaction=!1}}),S=T.extend({UPDATE_DELAY:null,_state:{checked:null,stake:null},_try:{ch:null},INPUT_STAKE_ID:"#bet_in_one_click_stake",BUTTON_CONFIRM_STAKE_ID:"#button_confirm_stake",CONFIRMED_STAKE_DATA_ATTR:"confirmedStakeValue",DEFAULT_VALUE_DATA_ATTR:"defaultValue",PREVIOUS_VALID_STAKE:e(this.INPUT_STAKE_ID).data(this.CONFIRMED_STAKE_DATA_ATTR),init:function(){this.UPDATE_DELAY=300,e(document).on("betslip.loaded",e.proxy(this.initEventHandlers,this))},addRemove:function(e){if(!f)return T.prototype._abortPlace.call(this,v),!1;this.place(JSON.stringify(h(e)))},update:function(){var t=isOneClickChecked(),n=0;try{n=this._stake()}catch(e){n=0}if(this._hasNotChanged(t,n))return!1;var a={chd:t,st:n},i=this,r={postAction:UPDATE_URL,data:a,success:function(t){u(t),showStakeNo(),i.updateState(),i._state.checked&&setTimeout(function(){var t=e("#bet\\-in\\-one\\-click\\-stake");return!!t&&(isEmpty(t)||t.putCursorAtEnd(),t.focus(function(){isEmpty(t)&&t.val("")}),!0)},100)}};betslipAjaxPost(r)},retry:function(e){var t=e||this._try.ch;this.place(t)},place:function(e){if(getAsyncDispatcher().hasActiveCalls())return!1;var t=isOneClickChecked();if(!t)return!1;this.setNotConfirmedStakeForPlaceBet();var n=-1;try{n=this._stake()}catch(e){return this._abortPlace(),!1}this._try={ch:e};var a={ch:e,st:n,chd:t},i=this._betPlacingSuccess,r=this._betPlacingFailure;betslipAjaxPost({postAction:PLACEBET_ONECLICK_URL,data:a,success:i,beforeSend:!1,error:r,error405:void 0,showProgress:showProgressModal,hideProgress:closeModal})},placeTicket:function(e){var t=this._betPlacingSuccess,n=this._betPlacingFailure;betslipAjaxPost({postAction:PLACETICKET_URL,data:{t:e,oneClick:!0},success:t,beforeSend:!1,error:n})},updateState:function(){var e=0;try{e=this._stake()}catch(t){e=0}var t=isOneClickChecked();t&&BetslipStorageFacade.controller.setIsBetslipActive(t),this.setState(t,e)},setState:function(e,t){this._state.checked=e,this._state.stake=t},remove:function(e){},removeAll:function(){},_betPlacingSuccess:function(e){var t=getBetslip(),n=e.result;t._setConfirmedStateForStakeValue(!0,e.oneClickStake),t.handlers[n](e)&&t.resetPlaceBetTransaction()},_processOk:function(e,t){updateBalance(t),showResultDialog("OK",e)},_processError:function(e){e.amendedstake&&!e.oom?showResultDialog("AMENDED_STAKE_ERROR",e):e.changedterms&&!e.oom?showResultDialog("CHANGED_TERMS_ERROR",e):showResultDialog("BET_ERROR",e)},_abortPlace:function(){e("#enter_stake_dialog").addModalToViewQueue({position:["20%"]})},_hasNotChanged:function(e,t){return!this._hasChanged(e,t)},_hasChanged:function(e,t){var n=this._state;return n.checked!=e||n.stake!=t},_checked:function(){isOneClickChecked()},_stake:function(){var t=e(this.INPUT_STAKE_ID).get(0);if(t){if(!isEmpty(t))return extractSum(t),isStake(t)?t.value:-1;throw"ZERO_STAKE"}return-1},placeBet:function(e,t){if(!f)return T.prototype._abortPlace.call(this,v),!1;this.place(this._try.ch)},checkBet:function(e){Log.debug("not implemented OneClickController.checkBet")},calcBets:function(){Log.debug("not implemented OneClickController.calcBet")},hasAnyStake:function(){return!1},_activate:function(){Log.debug("not implemented OneClickController._activate")},fixStake:function(t){e(this.INPUT_STAKE_ID).val(t)},_setConfirmedStateForStakeValue:function(t,n){var a=e(this.BUTTON_CONFIRM_STAKE_ID),i=e(this.INPUT_STAKE_ID);t?(i.removeClass("not-confirmed"),a.prop("disabled",!0)):(i.addClass("not-confirmed"),a.prop("disabled",isEmpty(i)||0==i.val())),n&&(i.val(n),i.data(this.CONFIRMED_STAKE_DATA_ATTR,n))},checkOneClickStake:function(){var t=e(this.INPUT_STAKE_ID);if(isEmpty(t))this._setConfirmedStateForStakeValue(!1),e(t).val(""),this.PREVIOUS_VALID_STAKE="";else{var n=e(t).val();if(checkValue(n,!0,!1,2)){var a=t.data(this.CONFIRMED_STAKE_DATA_ATTR)==n;this.PREVIOUS_VALID_STAKE=n,this._setConfirmedStateForStakeValue(a)}else e(t).val(this.PREVIOUS_VALID_STAKE)}},setNotConfirmedStakeForPlaceBet:function(){this.isConfirmedStake()||(e(this.INPUT_STAKE_ID).val(this.getConfirmedStake()),this.checkOneClickStake())},isConfirmedStake:function(){return!e(this.INPUT_STAKE_ID).hasClass("not-confirmed")},getConfirmedStake:function(){return e(this.INPUT_STAKE_ID).data(this.CONFIRMED_STAKE_DATA_ATTR)},initEventHandlers:function(){var t=this;e(this.INPUT_STAKE_ID).on("input",e.proxy(t.checkOneClickStake,t)),e(this.INPUT_STAKE_ID).on("blur",function(){isEmpty(this)&&e(this).val(e(this).data(t.DEFAULT_VALUE_DATA_ATTR))}),e(this.INPUT_STAKE_ID).on("focus",function(){isEmpty(this)&&e(this).val("")}),e(this.BUTTON_CONFIRM_STAKE_ID).on("click",function(){var n=e(t.INPUT_STAKE_ID).get(0);n&&(extractSum(n,2,!1),isStake(n)&&getOneClick().update())})}}),b=T.extend({init:function(){this._super(SHORT_VIEW)},placeBet:function(e,t){Log.debug("not implemented ShortController.placeBet")},checkBet:function(e){Log.debug("not implemented ShortController.checkBet")},calcBets:function(){Log.debug("not implemented ShortController.calcBet")},hasAnyStake:function(){return!1},_activate:function(){Log.debug("not implemented ShortController._activate")}}),C=T.extend({init:function(){this._super(SINGLES_VIEW),this._betCalc=new O},hasAnyStake:function(){var e=this._checkEachBet(this._isSingles());for(url in e)if(e[url].stake)return!0;return!1},placeBet:function(t,n){var a=this,i=this._isSingles(),r=[];if(i){var o=this._stake("SINGLES"),s=this._isvip("SINGLES"),c=this._isew("SINGLES");this._abortSave("SINGLES"),r.push({url:"SINGLES",stake:o,vip:s,ew:c,schd:i})}else this._eachChoise(function(e,t,n,i,o,s,c,l){if(o<=0)return!1;a._abortSave(i),r.push({url:i,stake:o,vip:l,ew:c})});Log.isDebugEnabled()&&Log.debug("SinglesController, placing bet at "+(new Date).getTime());var l=[];this._eachChoise(function(t,n,a,i,r){if(r<=0)return!1;var o=parseFloat(e("[id='eprice."+i+"']").val())+1,s=e("[id='cfId."+i+"']").val();l.push({selectionUid:i,cfId:s,eprice:o})}),betslipAjaxPost({postAction:PLACEBET_URL,data:{p:_,b:JSON.stringify(r),choices:JSON.stringify(l)},success:t,beforeSend:!1,error:n})},selectSingles:function(e){e?this._selSingles():this._unselSingles()},checkBet:function(e){this._checkBet(e)},calcBets:function(){this._resetBets()},_activate:function(){Log.debug("executed SinglesController._activate"),this._putCursor(this._stakeElArr()),this._resetBets(),this._vipBetHint()},_resetBets:function(){this._silentCheck(this._isSingles()?"SINGLES":"ALL")},_checkBet:function(e){var t=this._stakeEl(e),n=t.attr("rel"),a=this._stakeVal(t.val(),n),i=this._isewEl(e),r=!!i&&!!hasAttr(i,"checked"),o=this._isvipEl(e),s=!!o&&!!hasAttr(o,"checked");Log.isDebugEnabled()&&Log.debug("SinglesController, saving state at "+(new Date).getTime()),this._queueSave(e,{schd:this._isSingles(),u:e,st:a,ew:r,p:"SINGLES",v:s}),this._silentCheck(e)},_silentCheck:function(t){var n="SINGLES"==t,a=this._checkEachBet(n),i=null,r=null,o=null,s=null,c=null,l=this._isew("SINGLES"),u=!0;for(_sUrl in a){if(i=a[_sUrl],o=this._isewEl(_sUrl),s=this._isvipEl(_sUrl),!(c=this._stakeEl(_sUrl)))return;r=c.attr("rel"),_sUrl!=t&&n&&c.val(r),_sUrl!=t&&i.showhint&&c.val(r),n&&i.ewenabled&&(l?this._checkEl(o):this._uncheckEl(o)),i.hasvip&&n||(i.hasvip&&!n?this._enableEl(s):!i.hasvip&&n?u=!1:i.hasvip),i.hasvip&&!n||(this._uncheckEl(s),this._disableEl(s)),this._betReturns(_sUrl,i.payout)}if(n){var d=this._isvipEl("SINGLES");u?this._enableEl(d):(this._disableEl(d),this._uncheckEl(d))}var h=this;e.when(h._calcResult(a)).done(function(e){h._totalReturns(e.payout),h._totalCost(e.cost)})},_checkEachBet:function(e){var t=this,n={},a=this._stake("SINGLES"),i=this._isew("SINGLES"),r=null,o=null;return this._eachChoise(function(s,c,l,u,d,h,p,f){r=e?a:d,o=e?!!i&&t._ewenabled(u):p,r?(n[u]=t._calcBet(u,r,o),n[u].hasvip=t._hasVip(u,r)):n[u]={showhint:!0,payout:0,cost:0},e&&(n[u].ewenabled=t._ewenabled(u))}),n},_calcResult:function(e){var t=null,n=0,a=0,i=!1,r=[];for(sUrl in e)a+=(t=e[sUrl]).payout,n+=t.cost,t.halfplaced&&r.push(t.halfplaced),t.uncalc&&(i=!0);return o(r),i&&(a=0),{payout:a,cost:n}},_calcBet:function(t,n,a){var i=this._eprice(t),r=this._halfplace(t),o=[{eprice:i,halfplace:r,ewfraction:this._ewfraction(t)}],s=!!(a&&r<n)&&{name:e($$("selection.name."+t)).text(),win:n,place:n/2},c=this._betCalc.calc(o,n,a);return{halfplaced:s,uncalc:i<0,stake:n,payout:c.payout,cost:c.cost}},_selSingles:function(){var t=this,n=!1;if(this._eachChoise(function(e,a,i,r,o,s,c,l){e.val(s),t._disableEl(e),i&&(t._uncheckEl(i),t._disableEl(i)),a&&(t._uncheckEl(a),t._disableEl(a),n=!0),t._showEl($$("max-stake-inactive-"+r)),t._hideEl($$("max-stake-"+r)),t._betReturns(r,0)}),this._enableEl(e("#singles\\-bet")),n){var a=e("#singles\\-ew\\-container"),i=this._isewEl("SINGLES");this._enableEl(i),this._showEl(a)}this.checkBet("SINGLES")},_unselSingles:function(){var t=this._stake("SINGLES"),n=this._isvip("SINGLES"),a=this._isew("SINGLES"),i=this;this._eachChoise(function(e,r,o,s,c,l,u,d){t>0&&e.val(t),i._enableEl(e),o&&i._hasVip(s,t)&&(n&&i._checkEl(o),i._enableEl(o)),r&&(a&&i._checkEl(r),i._enableEl(r)),i._hideEl($$("max-stake-inactive-"+s)),i._showEl($$("max-stake-"+s))});var r=this._stakeEl("SINGLES");r.val(r.attr("rel")),this._disableEl(r);var o=this._isvipEl("SINGLES");this._disableEl(o),this._uncheckEl(o);var s=e("#singles\\-ew\\-container"),c=this._isewEl("SINGLES");this._hideEl(s),this._uncheckEl(c),this._checkBet("SINGLES")},_eachChoise:function(t){var n=this;e("input[id*='stake.']").each(function(a,i){var r=(i=e(i)).attr("id").replace("stake.",""),o=i.attr("rel"),s=n._stakeVal(i.val(),o),c=n._isvipEl(r),l=!!c&&!!hasAttr(c,"checked"),u=n._isewEl(r),d=!!u&&!!hasAttr(u,"checked");t(i,u,c,r,s,o,d,l)})},_betReturns:function(t,n){var a=$$("returns.singles."+t);a&&e(a).html(betslipFormatValue(n))},_stakeElArr:function(){var t=e(this._isSingles()?"#singles-bet":"input[id*='stake.']");return!!t&&e(t)},_stakeEl:function(t){var n="SINGLES"==t?e("#singles\\-bet"):$$("stake."+t);return!!n&&e(n)},_isewEl:function(t){var n="SINGLES"==t?e("#singles\\-ew"):$$("ew."+t);return!!n&&e(n)},_isvipEl:function(t){var n="SINGLES"==t?e("#singles\\-vip"):$$("vip."+t);return!!n&&e(n)},_isvip:function(e){return hasAttr(this._isvipEl(e),"checked")},_isSingles:function(){return hasAttr(e("#singles\\-choose"),"checked")},_halfplace:function(e){var t=$$("halfplace."+e);return this._parseFloat(t)},_ewfraction:function(e){var t=$$("ew.fraction."+e);return this._parseFloat(t)},_ewenabled:function(e){var t=$$("ew.enabled."+e);return!!t&&"true"===t.value},_eprice:function(e){var t=$$("eprice."+e);return this._parseFloat(t)}}),I=T.extend({init:function(){this._super(ACCUMULATOR_VIEW),this._betCalc=new M},updateMinStake:function(){var t=e("#bet_type_selection").find(":selected").data("formattedMinStake");e("#min-stake").text(t)},changeBetType:function(e){this.updateMinStake(),this.checkBet(e)},checkBet:function(e){this._updateSubbetCount(e),this._checkBet(e)},calcBets:function(){this._resetBets(!0)},getSUrl:function(t){return e("#"+t).val()},_abortAccumulatorSave:function(){this._abortSave("@accumulators")},placeBet:function(e,t){var n=[{bettype:this.getSUrl("bet_type_selection"),stake:this._stake(),vip:this._isvip(),ew:this._isew()}];this._abortAccumulatorSave(),betslipAjaxPost({postAction:PLACEBET_URL,data:{p:_,b:JSON.stringify(n)},success:e,beforeSend:!1,error:t})},hasAnyStake:function(){return Boolean(this._stake())},_activate:function(){Log.debug("executed "+this._controllerName()+"._activate");var e=this._stakeEl();this._putCursor(e),this._resetBets(),this._vipBetHint()},_resetBets:function(e){var t=this.getSUrl("bet_type_selection");this._checkBet(t,e)},_getSubbetCount:function(t){var n=e("#subbetCount\\."+t);return n.length>0?parseInt(n.val()):null},_updateSubbetCount:function(t){var n=this._getSubbetCount(t);null!=n&&e("#accumulator\\.subbet\\-count").html(n)},_queueSaveAccumulator:function(e){this._queueSave("@accumulators",{p:"ACCUMULATORS",bt:e.bt,st:e.st,ew:e.ew,v:e.v})},_checkBet:function(e,t){var n=this._stakeEl();if(!n)return!1;var a=n.attr("rel"),i=this._stakeVal(n.val(),a),r=this._isew(),o=this._isvipEl(),s=!1;this._setupCurrentMaxStake(e),this._setupCurrentTotalPrice(e),this._hasVip(e,i)?(this._enableEl(o),s=this._isvip()):(this._disableEl(o),this._uncheckEl(o)),t||this._queueSaveAccumulator({bt:e,st:i,ew:r,v:s}),this._silentCheck(e,i,a,r)},_setupCurrentMaxStake:function(t){e("#max-stake a").attr("maxstakevalue",e("#max\\."+t).val()),e("#max-stake a").text(e("#max\\.formated\\."+t).val())},_setupCurrentTotalPrice:function(t){var n=e("#totalPrice\\."+t).val();n?(e("#total-price").text(n),e("#total-price-container").show()):(e("#total-price-container").hide(),e("#total-price").text(""))},_silentCheck:function(t,n,a,i){var r=this;e.when(r._calcResult(t,n,i)).done(function(e){r._totalReturns(e.payout-e.bonus),r._expressBonus(e.bonus),r._totalCost(e.cost)})},_calcResult:function(t,n,a){if(!n)return{payout:0,bonus:0,cost:0};var i=[],r=!1,s=0,c=this._halfplace(t),l=[];this._eachChoise(function(e,n,a,o){var c={ewfraction:a,eprice:n,isew:1!=a};"ANTIEXPRESS"==t&&(c.antiexpPrice=o),i.push(c),s+=1+n,n<0&&(r=!0)});var u=this._expresses(t),d=u.length?this._calcCombinations(u,i,t,n,a,c,r):this._calcAll(i,t,n,a,c,r);return a&&c<n&&l.push({name:e('option[value="'+t+'"]').text(),win:n,place:n/2}),o(l),{totalprice:s,uncalc:r,payout:d.payout,bonus:d.bonus,cost:d.cost}},_betsByIndexes:function(e,t){for(var n=[],a=0,i=e.length,r=null,o=null;a<i;a++){o={id:(r=e[a]).join(),choices:[]};for(var s=0,c=r.length,l=null;s<c;s++)l=r[s],o.choices.push(t[l]);n.push(o)}return n},_calcCombinations:function(e,t,n,a,i,r,o){Log.debug(this._controllerName()+"._calcCombinations, START");for(var s=(new Date).getTime(),c=0,l=0,u=0,d=!o,h=this._bonusSelectionsCount(),p=this._bonusMaxPercent(),f=e.length-1;f>=0;f--){var _=e[f],g=this._betsByIndexes(_,t);if(d){var E=this._betCalc.calcReturns(h,p,g,n,a,i,r),m=E.payout+E.bonus;m>c&&(c=m,l=E.bonus)}}var v=this._getSubbetCount(n);return u+=this._betCalc.calcCost(v,a,i,r),Log.debug(this._controllerName()+"._calcCombinations, END, "+((new Date).getTime()-s)+"ms"),{payout:c,bonus:l,cost:u}},_calcAll:function(e,t,n,a,i,r){Log.debug(this._controllerName()+"._calcAll, START");var o=(new Date).getTime(),s=[{choices:e.concat()}],c=this._betCalc.calcCost(s,n,a,i),l=this._bonusSelectionsCount(),u=this._bonusMaxPercent(),d=r?{payout:0,bonus:0}:this._betCalc.calcReturns(l,u,s,t,n,a,i);return Log.debug(this._controllerName()+"._calcAll, END, "+((new Date).getTime()-o)+"ms"),{payout:d.payout+d.bonus,bonus:d.bonus,cost:c}},_eachChoise:function(t){var n=this;e("input[id*='eprice.']").each(function(a,i){var r=(i=e(i)).attr("id").replace("eprice.",""),o=n._parseFloat(i),s=$$("ew.fraction."+r),c=n._parseFloat(s),l=$$("antiexp.fraction."+r),u=n._parseFloat(l);t(r,o,c,u)})},_ewEl:function(){var t=$$("accumulator.ew");return!!t&&e(t)},_isew:function(){return hasAttr(this._ewEl(),"checked")},_stakeEl:function(){var t=$$("accumulator.stake");return!!t&&e(t)},_stake:function(){var t=null,n=null,a=this._stakeEl();return a&&(a=e(a),t=e.trim(a.attr("value")),n=e.trim(a.attr("rel"))),this._stakeVal(t,n)},_isvipEl:function(){var t=$$("accumulator.vip");return!!t&&e(t)},_isvip:function(){return hasAttr(this._isvipEl(),"checked")},_halfplace:function(e){var t=$$("halfplace."+e);return this._parseFloat(t)},_expresses:function(t){var n=$$("systemExpresses."+t);if(n)try{return JSON.parse(e(n).val())}catch(e){}return[]},_controllerName:function(){return"AccumulatorsController"}}),R=I.extend({init:function(){this._contentUrl=ANTIEXPRESS_VIEW,this._betCalc=new B},getSUrl:function(){return"ANTIEXPRESS"},_abortAccumulatorSave:function(){this._abortSave("@antiexpresses")},_queueSaveAccumulator:function(e){this._queueSave("@antiexpresses",{p:"ANTIEXPRESSES",bt:e.bt,st:e.st,ew:e.ew,v:e.v})},_controllerName:function(){return"AntiexpressesController"}}),D=T.extend({_bets:{},init:function(){this._contentUrl=MULTIPLE_VIEW,this._betCalc=new P},placeBet:function(e,t){var n=[];this._eachBet(function(e,t,a,i){n.push({bettype:e,stake:t,vip:i,ew:a})}),this._abortSave("@multiples"),betslipAjaxPost({postAction:PLACEBET_URL,data:{p:_,b:JSON.stringify(n)},success:e,beforeSend:!1,error:t})},checkBet:function(e){this._checkBet(e)},calcBets:function(){this._resetBets()},hasAnyStake:function(){var e=0;return this._eachBet(function(t,n,a,i){e++}),e>0},_activate:function(){this._putCursor(this._stakeElArr()),this._resetBets(),this._calcReturns(),this._vipBetHint()},_resetBets:function(){var e=this;this._bets={},this._eachBet(function(t,n,a,i){e._checkBet(t)},!0),this._eachBet(function(t,n,a,i){e._checkBet(t),e._bets[t]=e._calcResult(t,n,a)})},_checkBet:function(e){var t=this._stakeEl(e);if(!t)return!1;var n=t.attr("rel"),a=this._stakeVal(t.val(),n),i=this._isew(e),r=this._isvipEl(e),o=!1;this._hasVip(e,a)?(this._enableEl(r),o=this._isvip(e)):(this._disableEl(r),this._uncheckEl(r)),this._queueSave("@multiples",{p:"MULTIPLES",bt:e,st:a,ew:i,v:o}),this._silentCheck(e,a,n,i)},_calcReturns:function(){var e=this._bets,t=!1,n=0,a=0,i=0;for(type in e){var r=e[type];r.uncalc?(t=!0,this._betreturns(type,0),this._betbonus(type,0)):(this._betreturns(type,r.payout-r.bonus),this._betbonus(type,r.bonus)),t||(n+=r.payout,a+=r.bonus),i+=r.cost}t&&(n=0,a=0),this._totalReturns(n-a),this._expressBonus(a),this._totalCost(i)},_silentCheck:function(e,t,n,a){this._bets[e]=this._calcResult(e,t,a),this._calcReturns()},_calcResult:function(t,n,a){if(!n)return{payout:0,bonus:0,cost:0};var i=[],r=!1,s=0,c=this._halfplace(t),l=[];this._eachChoise(function(e,t,n){i.push({ewfraction:n,eprice:t,isew:1!=n}),s+=1+t,t<0&&(r=!0)});var u=this._calcAll(i,t,n,a,c,r);return a&&c<n&&l.push({name:e('option[value="'+t+'"]').text(),win:n,place:n/2}),o(l),{totalprice:s,uncalc:r,payout:u.payout,bonus:u.bonus,cost:u.cost}},_calcAll:function(t,n,a,i,r,o){Log.debug("MultiplesController._calcAll, START");var s=(new Date).getTime(),c=this._betCalc.combine(t,n),l=this._betCalc.calcCost(c,a,i,r),u=this._bonusSelectionsCount(),d=this._bonusMaxPercent(),h=null;h=o||c.N?{payout:0,bonus:0}:c.specialN?this._betCalc.calcReturns(u,d,c.combinations,n,a,i,r):this._betCalc.calcReturns(u,d,c,n,a,i,r),Log.debug("MultiplesController._calcAll, END, "+((new Date).getTime()-s)+"ms");var p=h.payout+h.bonus;return"true"!=e("[id='bonus.luckyBonusAvailable']").val()||isNaN(p)||isNaN(this._betCalc.getLuckyBonuses()[n])||(p+=(p-l)*this._betCalc.getLuckyBonuses()[n]),{payout:p,bonus:h.bonus,cost:l}},_eachBet:function(t,n){var a=this;void 0===n&&(n=!1),e(this._stakeElArr()).each(function(i,r){var o=(r=e(r)).attr("rel"),s=a._stakeVal(r.val(),o);if(s||n){var c=r.attr("id").replace("multiples.stake.",""),l=a._isvip(c),u=a._isew(c);t(c,s,u,l)}})},_eachChoise:function(t){var n=this;e("input[id*='eprice.']").each(function(a,i){var r=(i=e(i)).attr("id").replace("eprice.",""),o=n._parseFloat(i),s=$$("ew.fraction."+r),c=n._parseFloat(s);t(r,o,c)})},_betreturns:function(t,n){var a=$$("multiples.returns."+t);a&&e(a).html(betslipFormatValue(n))},_betbonus:function(t,n){var a=$$("multiples.bonus."+t);a&&e(a).html(betslipFormatValue(n));var i=$$("multiples.bonus."+t+"_container");i&&0===n?e(i).hide():i&&e(i).show()},_halfplace:function(e){var t=$$("halfplace."+e);return this._parseFloat(t)},_stakeElArr:function(){return e("input[id*='multiples.stake.']")},_stakeEl:function(t){var n=$$("multiples.stake."+t);return!!n&&e(n)},_ewEl:function(t){var n=$$("multiples.ew."+t);return!!n&&e(n)},_isew:function(e){return hasAttr(this._ewEl(e),"checked")},_isvipEl:function(t){var n=$$("multiples.vip."+t);return!!n&&e(n)},_isvip:function(e){return hasAttr(this._isvipEl(e),"checked")}}),L=C.extend({init:function(){this._contentUrl=FREEBET_VIEW,this._betCalc=new k},showEnterStakeDialog:function(){e.modal.close(),e("#no_selected_freebets").modal({position:["20%"]})},placeBet:function(t,n){var a=e(".freebet\\-radio:checked").val();null!=a&&"undefined"!==a||(e.modal.close(),e("#no_selected_freebets").modal({position:["20%"]}));var i=[{freebetindex:a,ew:this._isew(a)}];this._abortSave("@freebets"),betslipAjaxPost({postAction:PLACEBET_URL,data:{p:"FREEBETS",b:JSON.stringify(i)},success:t,beforeSend:!1,error:n})},_activate:function(){Log.debug("executed FreebetsController._activate"),this._vipBetHint(),this._resetBets()},checkBet:function(e){var t=this._isew(e);this._queueSave("@freebets",{fi:e,p:"FREEBETS",ew:t}),this._resetBets()},_resetBets:function(){var t=!1,n=this;e("[id^='freebet.radio.']").each(function(){var a=e(this).prop("checked");n._recalculateFreebet(e(this).val(),a),t|=a}),this._printFreebetTotals(!t,0,0)},_stake:function(t){var n=$$("freebet.stake."+t);return!!n&&e(n).val()},_isew:function(e){return hasAttr($$("freebet.ew."+e),"checked")},_recalculateFreebet:function(e,t){var n=this._stake(e),a=this._isew(e),i=this._calcBet("freebet",n,a),r=this._calcResult([i]);this._freebetReturn(e,r.payout),this._printFreebetTotals(t,r.cost,r.payout)},_freebetReturn:function(t,n){var a=$$("freebet.returns."+t);a&&e(a).html(betslipFormatValue(n))},_printFreebetTotals:function(e,t,n){e&&(this._totalReturns(n),this._totalCost(t))}}),w=C.extend({init:function(){this._contentUrl=BONUS_VIEW,this._betCalc=new k}}),y=Class.extend({iterate:function(e,t,n){for(var a=0,i=0,r=0,o=e.length,s=null;r<o;r++)a+=t((s=e[r]).eprice,s.ewfraction,s.halfplace),i+=n(s.eprice,s.ewfraction,s.halfplace);return{payout:a,cost:i}}}),O=y.extend({calc:function(e,t,n){return t=Number(t),n=Boolean(n),this.iterate(e,function(e,a,i){return e<=0?0:(e+1)*t+(n?(e*a+1)*(i<t?t/2:t):0)},function(e,a,i){return t+(n?i<t?t/2:t:0)})}}),k=O.extend({calc:function(e,t,n){var a=this._super(e,t,n);return a.payout-=a.cost,a}}),M=y.extend({calcCost:function(e,t,n,a){return("number"==typeof e?e:e.length)*(t+(n?a<t?t/2:t:0))},calcReturns:function(e,t,n,a,i,r,o){for(var s,c=o<i,l=0,u=0,d=0,h=0,p=0,f=0,_=0,g=n.length-1;g>=0;g--){h=i,p=i;for(var E,m,v,A,T,S=(s=n[g].choices).length-1;S>=0;S--){if(E=s[S],_=E.ewfraction,f=E.eprice,A=!0===E.isAnyToComePart,T=A?1:0,f<=0&&!E.atc&&1!=s.length)return 0;m=f+1-T,v=f*_+1-T,c&&(p/=2),h*=m,p*=v}l+=h,u+=r?p:0,d+=this._calcBonus(e,t,s,i,h)}return{payout:l+u,bonus:d}},_calcBonus:function(e,t,n,a,i){if(!e||!t)return 0;var r=n.length;if(r<e)return 0;r>t&&(r=t);var o=i-a;return o<0?0:o*(r/100)}}),B=M.extend({calcReturns:function(t,n,a,i,r,o,s){return{payout:parseFloat(e("[id='ANTIEXPRESS_TOTAL_PRICE']").val())*r,bonus:0}}}),P=M.extend({getLuckyBonuses:function(){return{LUCKY15:.1,LUCKY31:.2,LUCKY63:.25}},_withsingles:{PATENT:!0,LUCKY15:!0,LUCKY31:!0,LUCKY63:!0,ALPHABET:!0},withsingles:function(e){return Boolean(this._withsingles[e])},calcCost:function(e,t,n,a){return(e.specialN?e.specialN:e.N?e.N:e.length)*(t+(n?a<t?t/2:t:0))},combine:function(e,t){if(e){var n=e.length,a=function(e){for(var t=1,n=1;n<=e;n++)t*=n;return t};if("STRAIGHT_FORECAST"==t||"STRAIGHT_TRICAST"==t||"STRAIGHT_FORECAST_DOUBLES"==t)return{N:1};if("ANY_ORDER_FORECAST"==t||"ANY_ORDER_TRICAST"==t)return{N:1};if("REVERSE_FORECAST"==t)return{N:2};if("REVERSED_FORECAST_DOUBLES"==t)return{N:4};if("REVERSE_TRICAST"==t)return{N:6};if("COMBINATION_FORECAST"==t)return{N:2*a(n)/(a(2)*a(n-2))};if("COMBINATION_TRICAST"==t)return{N:6*a(n)/(a(3)*a(n-3))};if("SINGLE_STAKES_ABOUT"==t){if(2!=e.length)return{N:2};var i=[],r=jQuery.extend(!0,{},e[0]);r.atc=!0,(s=jQuery.extend(!0,{},e[0])).eprice=s.eprice-1,s.atc=!0;var o=jQuery.extend(!0,{},e[1]);return o.atc=!0,(c=jQuery.extend(!0,{},e[1])).eprice=c.eprice-1,c.atc=!0,i.push({choices:[s]}),i.push({choices:[o]}),i.push({choices:[c]}),i.push({choices:[r]}),{specialN:2,combinations:i}}if("DOUBLE_STAKES_ABOUT"==t){if(2!=e.length)return{N:2};var i=[],s=jQuery.extend(!0,{},e[0]),c=jQuery.extend(!0,{},e[1]);s.eprice+1>=2?(s.eprice=s.eprice-2,c.eprice=2*(c.eprice+1)-1):(c.eprice=(c.eprice+1)*(s.eprice+1)-1,s.eprice=-1),s.atc=!0,c.atc=!0,i.push({choices:[s]}),i.push({choices:[c]});s=jQuery.extend(!0,{},e[0]);return(c=jQuery.extend(!0,{},e[1])).eprice+1>=2?(c.eprice=c.eprice-2,s.eprice=2*(s.eprice+1)-1):(s.eprice=(s.eprice+1)*(c.eprice+1)-1,c.eprice=-1),s.atc=!0,c.atc=!0,i.push({choices:[c]}),i.push({choices:[s]}),{specialN:2,combinations:i}}if("ROUND_ROBIN"==t){for(var l=this.defaultCombine(e,t),u=!0,d=0;d<=3;d++)for(_=0;_<e.length;_++){var h=[],p=null;u?(p=jQuery.extend(!0,{},e[_])).isAnyToComePart=!0:(p=e[_]).isAnyToComePart=!1,h.push(p),l.push({choices:h}),u=!u}return{specialN:10,combinations:l}}if("FLAG"==t){for(var f=this.defaultCombine(e,t),u=!0,d=0;d<6;d++)for(var _=0;_<e.length;_++){var h=[],p=null;u?(p=jQuery.extend(!0,{},e[_])).isAnyToComePart=!0:(p=e[_]).isAnyToComePart=!1,h.push(p),f.push({choices:h}),u=!u}return{specialN:23,combinations:f}}if("UNION_JACK"==t){if(9!=e.length)return{N:8};var g=[];return g.push({choices:[e[0],e[1],e[2]]}),g.push({choices:[e[3],e[4],e[5]]}),g.push({choices:[e[6],e[7],e[8]]}),g.push({choices:[e[0],e[3],e[6]]}),g.push({choices:[e[1],e[4],e[7]]}),g.push({choices:[e[2],e[5],e[8]]}),g.push({choices:[e[0],e[4],e[8]]}),g.push({choices:[e[2],e[4],e[6]]}),g}return"YANKEE"==t?{specialN:11,combinations:this.defaultCombine(e,t)}:"SUPER_YANKEE"==t?{specialN:26,combinations:this.defaultCombine(e,t)}:"HEINZ"==t?{specialN:57,combinations:this.defaultCombine(e,t)}:"SUPER_HEINZ"==t?{specialN:120,combinations:this.defaultCombine(e,t)}:"GOLIATH"==t?{specialN:247,combinations:this.defaultCombine(e,t)}:this.defaultCombine(e,t)}},defaultCombine:function(e,t){for(var n=this.withsingles(t),a=null,i=[{choices:e}],r=1,o=Math.pow(2,e.length)-1;r<o;r++){a=[];for(var s=0;s<r;s++)r&Math.pow(2,s)&&a.push(e[s]);(1!==a.length||n)&&i.push({choices:a})}return i}});window.Betslip={},window.Betslip.STAKE_LIMIT=9999999999.99,e(document).ready(function(){p.ONECLICK=new S,p.ACCUMULATORS=new I,p.MULTIPLES=new D,p.FREEBETS=new L,p.SINGLES=new C,p.SHORT=new b,p.ANTIEXPRESSES=new R,p.BONUSBETS=new w,e(document).on("click","[data-coeff-uuid]",function(){var e=h(this);TrackingEngine.trigger(TrackingEngine.EVENT.MARKET_CHOICE_CLICKED,e.u),getBetslip().addRemove(this)}),e(document).on("click","[data-betslip-remove-choice]",function(){var t=e(this).data("betslipRemoveChoice");TrackingEngine.trigger(TrackingEngine.EVENT.BETSLIP_REMOVE_CHOICE_CLICKED,t),getBetslip().remove(t)}),window.toggleBetslipTab=function(e){var t=p[e||g];if(!t)return!1;d(t._contentUrl)},window.getOneClick=function(){return p.ONECLICK},window.getBetslip=function(){return p[_]},window.getBetslipCurrentPage=function(){return _},window.toggleBetslip=function(){BetslipStorageFacade.controller.toggleBetslip(),loadCurrentBetslipPage()},0!==e("#betslip-container").size()&&(BetslipStorageFacade.controller.isBetslipActive()?loadCurrentBetslipPage():initData.isOpenBetsEnabled&&initData.isLogged?loadOpenBets():toggleBetslip())})}(window.jQuery);var OpenBets;OpenBets||(OpenBets={}),OpenBets.Controller=function(){function e(e){$.ajax({url:initData.base_dir+"/updateopenbets.htm",type:"POST",data:{type:e},dataType:"json",success:function(t){t.success&&("SHORT"==e?g.setOpenBetsInfo(t.openBetsUpdates):"HEADER"==e&&(g.setBetInfoFromHeaders(t.openBetsUpdates),E.updateBetStatuses(g.getCalculatedBets())),a(),u())}})}function t(e){$.ajax({url:initData.base_dir+"/openbets.htm",type:"POST",dataType:"json",data:{betIds:JSON.stringify(e),type:"IDS"},success:function(e){if(e.success){var t=e.content;for(var n in t){var i=$("#openBetTypeId"+n).html();$("#openBetId"+n).html(t[n]),$("#openBetTypeId"+n).html(i)}a(),E.updateCoupon(),$(document).trigger("cashouts.loaded",[e.cashoutbetsinfo,_.keys(t)])}}})}function n(e,t){$.ajax({url:initData.base_dir+"/setupopenbetstate.htm",type:"POST",dataType:"json",data:{betId:e,state:t},success:function(t){t.success&&(g.removeBetInfo(e),E.refreshOpenBets(g),a())}})}function a(){var e=r();f.subscribeByKeys(e,function(e){v.setUpdate(e,d)}),f.unsubscribeIfAbsent(e),p.subscribeSingle(i)}function i(e){var t=JSON.parse(e.body);"string"==typeof t&&(t=JSON.parse(t)),_.contains(g.getOpenBetIds(),t.betId)&&v.setUpdate(e,h)}function r(){return _.chain(o()).map(function(e){return e.makeKey()}).uniq().value()}function o(){return _.chain(g.getNotPayoutBetIds()).map(function(e){return s(e.betId)}).flatten().value()}function s(e){return $.map($("[data-bet-id = "+e+"]"),function(e){return new l($(e).data("eventId"),$(e).data("selectionUid"))})}function c(e){return _.map($("[data-event-id='"+e+"']"),function(e){return $(e).data("betId")})}function l(e,t){this.eventId=e,this.selectionUID=t,this.makeKey=function(){return("sel."+e+"."+t).replace(/\//g,"%2f")}}function u(){g.getCalculatedBets().forEach(function(e){_.delay(function(){n(e.betId,!1)},1e3*getOpenBetsTimeout())})}var d=initData.stomp.selectionStateChangesDestination,h=initData.stomp.betStatusChangesDestination,p=null,f=null,g=new OpenBetsInfo.Controller,E=new OpenBetsStyle.Controller,m=new BetslipStorageFacade.Controller,v=new function(){function n(n,i){if(i==d)return function(){var e=n.headers.destination.split("/");t(c(e[e.length-1].split(".")[1]))};if(isOpenBetsTab()){var r=JSON.parse(n.body);return _.contains(a,r.state)&&t([r.betId]),function(){e("HEADER")}}return function(){e("SHORT")}}var a=["VOID","VIP_ACCEPTED"],i=null;this.setUpdate=function(e,t){i=n(e,t)},this.runUpdateListener=function(){setInterval(function(){_.isFunction(i)&&(i(),i=null)},1e3)}};this.hideOpenBet=function(e){n(e,!1)},window.loadOpenBets=function(){var e=m.getVisibleOpenBetIds(),t={url:initData.base_dir+"/openbets.htm",type:"POST",dataType:"json",data:{betIds:JSON.stringify(e),type:"ALL"},success:function(e){if(e.success){e.content&&$("#betslip\\-container").html(e.content),updateFreebetHint(e.availableFreebets),E.synchronizedVisibleOpenBets();var t=e.selectionuids,n=$.isArray(t)?getHighlightedSelectionUIDs(t):[];$(document).trigger("openbets.loaded",[n,e.openbetsinfo,e.serverTime]),$(document).trigger("cashouts.loaded",[e.cashoutbetsinfo,_.map(e.openbetsinfo,function(e){return e.betId})]),E.updateCoupon()}else toggleBetslip()},error:function(){toggleBetslip()}};initData.isOpenBetsEnabled&&initData.isLogged&&$.ajaxq(getAsyncDispatcher().QUEUE_NAME,t)},window.updateBetByHeaderClick=function(e){function n(){return $("li[data-open-bet-id]")}function i(e){return _.find(n(),function(t){return $(t).data("openBetId")===e})}!$(i(e)).next(".open-bet-details").is(":visible")?t([e]):($(i(e)).next(".open-bet-details").remove(),rightColumnPaddingTop(),a()),m.toggleOpenBet(e)},$(document).ready(function(){initData.isOpenBetsEnabled&&initData.isLogged&&(p=new StompSubscriptionsManager(h),f=new StompSubscriptionsManager(d),$(document).on("betslip.loaded openbets.loaded",function(e,t,n,i){g.setOpenBetsInfo(n),u(),a(),v.runUpdateListener(),$("#header_bet_slip").after(_.template($("#openBetsHeader").html())({openBetsCount:n.length}))}))})},OpenBets.controller=new OpenBets.Controller;var CashOut;CashOut||(CashOut={}),CashOut.Controller=function(){function e(e,n){$.ajax({url:initData.base_dir+"/placecashout.htm",type:"POST",dataType:"json",data:{betId:e,expectedCashout:n},beforeSend:function(){new a(c).placement(e)},success:function(n){!0!==n.success&&t(e)},error:function(){t(e)}})}function t(e){var t=_.find(c,function(t){return t.getBetId()==e});void 0!=t&&(t.setStatus("REJECTED"),o.renderOffer(t,!1))}function n(){s.subscribeSingle(function(e){var t=new a(c);c=t.handle(JSON.parse(e.body))})}function a(e){function t(e){return"REJECTED"==e||"OFFER_CHANGE_REJECTED"==e?"OFFER_CHANGE_REJECTED":"OFFER_CHANGE"}function n(e,t){return"REJECTED"==e&&"OFFER_MISMATCH"==t?"OFFER_CHANGE_REJECTED":e}function a(t){return _.find(e,function(e){return e.getBetId()==t})}function i(e){return 1==e.length?"0.0"+e:2==e.length?"0."+e:e.substring(0,e.length-2)+"."+e.substring(e.length-2,e.length)}var r=[{type:"co_o",handle:function(e,n){n.setPayout(i(e.o.toString())),n.setStatus(t(n.getStatus())),o.renderOffer(n,!0)},forbiddenStates:["PLACEMENT","PAID","DELAY1","DELAY2"]},{type:"co_br",handle:function(t,n){e=_.filter(e,function(e){return e.getBetId()!=t.b}),o.hideCashout(n.getBetId())},forbiddenStates:["PAID","DELAY1","DELAY2"]},{type:"co_rc",handle:function(e,t){t.setStatus(n(e.s,e.e)),t.setCause(e.e),t.setPayout(i(e.o.toString())),o.renderOffer(t,!0)},forbiddenStates:["PAID"]}];this.handle=function(t){var n=a(t.b);if(void 0!=n){var i=_.findWhere(r,{type:t["@t"]});i&&-1==_.indexOf(i.forbiddenStates,n.getStatus())&&i.handle(t,n)}return e},this.placement=function(e){var t=a(e);void 0!=t&&(t.setStatus("PLACEMENT"),o.renderOffer(t,!0))}}function i(e){var t=e.betId,n=e.payout,a=e.status,i=e.cause;this.getBetId=function(){return t},this.getPayout=function(){return n},this.setPayout=function(e){n=e},this.getStatus=function(){return a},this.setStatus=function(e){a=e},this.getCause=function(){return i},this.setCause=function(e){i=e}}function r(e,t){_.each(_.map(e,function(e){return new i(_.find(t,function(t){return t.betId==e})||{betId:e,payout:0})}),function(e){(c=_.filter(c,function(t){return t.getBetId()!=e.getBetId()})).push(e)})}var o=new CashOut.Renderer,s=null,c=[];$(document).ready(function(){s=new StompSubscriptionsManager(initData.stomp.cashoutChangesDestination),n(),$(document).on("cashouts.loaded",function(e,t,n){r(n,t),o.renderOffers(c,!1)}),$(document).on("click","[data-cashout-clickable-betid]",function(){var t=$(this).closest(".cashout-block"),n=t.data("cashoutStatus");-1!==["default","OFFER_CHANGE","REJECTED","OFFER_CHANGE_REJECTED"].indexOf(n)&&e(t.data("cashoutBetid"),$(this).find(".bet-text-value").text())})})},CashOut.controller=new CashOut.Controller;var BETSLIP_PLACE_MODE_BLOCK_COOKIE="betslipPlaceModeBlock",BETSLIP_PLACE_MODE_BLOCK_ID_SELECTOR="#betslipPlacingModeBlockId",BetPlacingModes={GreaterOrEqualsToCurrent:"GreaterOrEqualsToCurrent",Any:"Any",EqualsToCurrent:"EqualsToCurrent"};$(function(){function e(){var e=$("#betslip-container"),t=$("#stakeNoWideScreenId"),n=$("#stakeNoNotWideScreenId");isWideScreen()?(e.is(".coupon-not-wide")&&$("#coupon_body").show(),e.removeClass("coupon-not-wide with-bottom-border"),(t.length>0||n.length>0)&&(t.show(),n.hide())):(e.addClass("coupon-not-wide"),(t.length>0||n.length>0)&&(e.addClass("with-bottom-border"),$("#coupon_body").hide())),displaySelectionName(),rightColumnPaddingTop()}$(window).ready(function(){e(),rightColumnPaddingScrollWidth()}),$(window).resize(_.throttle(adjustScroll,300)),$(window).resize(_.throttle(rightColumnPaddingScrollWidth,100)),$(window).resize(_.throttle(e,300))});var BetslipChoiceManager;BetslipChoiceManager||(BetslipChoiceManager={}),BetslipChoiceManager.Controller=function(){this.getAccepted=function(){return $.map(e(),function(e){return e.accepted})},this.getActual=function(){return $.map(e(),function(e){return e.actual})},this.getActualWithPriceType=function(){return $.map(e(),function(e){return{selection:e.actual,type:e.priceType}})};var e=function(){var e=[];return $("[id^='actualSelection.']").each(function(){e.push(new t($(this).data("acceptedSelectionUid"),$(this).val(),$(this).data("acceptedSelectionType")))}),e},t=function(e,t,n){this.accepted=e,this.actual=t,this.priceType=n}};var BetslipRemoveChoiceManager;BetslipRemoveChoiceManager||(BetslipRemoveChoiceManager={}),BetslipRemoveChoiceManager.Controller=function(){this._activeSelectionUIDs=[],this.contains=function(e){return this._activeSelectionUIDs&&-1!=this._activeSelectionUIDs.indexOf(e.replace(",","@"))},$(document).ready(function(){$(document).on("betslip.loaded openbets.loaded",function(e,t,n,a){t&&(BetslipRemoveChoiceManager.controller._activeSelectionUIDs=[],$.each(t,function(e,t){BetslipRemoveChoiceManager.controller._activeSelectionUIDs.push(t.selection)}))})})},BetslipRemoveChoiceManager.controller=new BetslipRemoveChoiceManager.Controller;var BetslipStyleUpdater;BetslipStyleUpdater||(BetslipStyleUpdater={}),BetslipStyleUpdater.Controller=function(){this.updateBetslip=function(a,i){a.forEach(function(n){new e(n).updateBetslipPrice(),new t(n).updateBetslipChoice()}),i.forEach(function(e){new n(e).updateBet()})};var e=function(e){function t(){var t="",i="";switch(e.status){case"INCREASE":t="",i="updated-price";break;case"DECREASE":t="",i="updated-price";break;case"REPLACE":t=n(),i="updated-price"}return{arrow:a(t),background:i}}function n(){return"INCREASE"==e.replacedSelectionStatus?"":"DECREASE"==e.replacedSelectionStatus?"":""}function a(e){return e&&""!==e?$('<span class="sprice-arrow '+(""==e?"red":""==e?"green":"")+'">'+e+"</span>"):null}this.updateBetslipPrice=function(){var n=t(),a=$("[id='price.presentation."+e.selectionUID+"']");a.removeClass("updated-price").siblings(".sprice-arrow").remove(),a.addClass(n.background).text(e.price).after(n.arrow)}},t=function(e){function t(){$("[id='eprice."+e.selectionUID+"']").val(e.eprice),$("[id='choice.status."+e.selectionUID+"']").val(e.status),$("[id='selection.name."+e.selectionUID+"']").html(e.selectionName),$("[id='eprice.freebet']").val(e.eprice)}function n(){$("input[id = 'actualSelection."+e.selectionUID+"']").attr("value",e.replacedSelectionUID).data("data-accepted-selection-type",e.replacedSelectionType),"REPLACE"===e.status&&"NONE"===e.replacedSelectionStatus&&$("input[id = 'replacedAcceptedEprice."+e.selectionUID+"']").val(e.replacedAcceptedEprice)}function a(){"REMOVE"==e.status?$("[id='display.is_not_active."+e.selectionUID+"']").show():$("[id='display.is_not_active."+e.selectionUID+"']").hide()}this.updateBetslipChoice=function(){t(),n(),a()}},n=function(e){function t(){var t=$("[id='max-stake-"+e.type+"'] a");t.text(e.formatedMaxStake),t.data("maxStake",e.maxStake),$("[id='max."+e.type+"']").val(e.maxStake),$("[id='max-stake-inactive-"+e.type+"']").text(e.formatedMaxStake),$("[id='min-stake-"+e.type+"']").text(e.formatedMinStake)}function n(){if($("[id='max.formated."+e.type+"']").val(e.formatedMaxStake),"function"==typeof getBetslip().getSUrl&&getBetslip().getSUrl("bet_type_selection")==e.type){var t=$("[id='max-stake'] a");t.attr("maxstakevalue",e.maxStake),t.text(e.formatedMaxStake),$("[id='min-stake']").text(e.formatedMinStake),$("[id='total-price']").text(e.totalPrice)}$("[id='totalPrice."+e.type+"']").val(e.totalPrice),$("[id='ANTIEXPRESS_TOTAL_PRICE']").val(e.calcTotalPrice)}this.updateBet=function(){t(),n()}}};var ChoicesUpdater;ChoicesUpdater||(ChoicesUpdater={}),ChoicesUpdater.Controller=function(){function e(e,n,a,i,r){var o=i/r;if(n){var s=$("[id^='actualSelection.']").filter(function(t,n){return e===n.value}).data("accepted-selection-uid"),c=t(o,l=parseFloat($("[id='replacedAcceptedEprice."+s+"']").val()));return{selectionUID:s,price:a[window.initData.oddsType],status:"REPLACE",eprice:o,replacedSelectionStatus:c,replacedSelectionType:"CP",replacedSelectionUID:e,selectionName:$("[id='selection.name."+s+"']").html(),replacedAcceptedEprice:l}}var l=parseFloat($("[id='acceptedEprice."+e+"']").val()),c=t(o,l);return{selectionUID:e,price:a[window.initData.oddsType],status:c,eprice:o,replacedSelectionStatus:"NONE",replacedSelectionType:"CP",replacedSelectionUID:e,selectionName:$("[id='selection.name."+e+"']").html()}}function t(e,t){var n=t-e;return Math.abs(n)-.001<0?"NONE":n<0?"INCREASE":"DECREASE"}function n(e,t){return{type:e,formatedMaxStake:t,maxStake:t,formatedMinStake:$("[id='min-stake-"+e+"']").text()}}function a(e,t){return(parseFloat($("[id='max-stake-"+e+"'] a").data("maxStake"))*parseFloat($("[id='eprice."+e+"']").val())/t).toFixed(2)}this._activeSubscritions={},this._updateCandidates=[],this._updateTimer=null;var i=new BetslipChoiceManager.Controller;this.applyChoices=function(){$(document).trigger("betslip.choicesUpdated",[i.getActualWithPriceType()]);var e={url:resolveBetslipUrl("APPLY_ACTUAL_CHOICES"),type:"POST",dataType:"json",success:function(e){loadBetslipContent(e)}};e.error=function(t){switch(t.status){case 405:initData.isUseBetslip2=JSON.parse(t.getResponseHeader("isUsebetslip2")),e.url=resolveBetslipUrl("APPLY_ACTUAL_CHOICES"),e.error=function(e){},$.ajax(e)}},$.ajax(e)},this.subscribe=function(e){var t=this;t._activeSubscritions[e]||(t._activeSubscritions[e]=StompFactory.subscribe(initData.stomp.priceChangesDestination+e.replace(/\//g,"%2f").replace(",","@"),function(e){t.subscribeHandler(e.headers.destination,e.body)}))},this.subscribeHandler=function(t,i){var r=function(e){return-1===e.indexOf(".")?$("[id^='actualSelection."+e+"']"):$("[value='"+e+"']")},o=t.split("/"),s=o[o.length-1].replace("%2f",/\//g).replace("@",","),c=s.includes("."),l=this;if(c&&window.initData.isPatchingCoeffOfSingleBetEnable&&"SINGLES"==window.getBetslipCurrentPage()){var u=JSON.parse(i),d=0===$("[id='acceptedEprice."+s+"']").length,h=e(s,d,u.prices,u.numerator,u.denumerator),p=a(s,h.eprice),f=n(s,p);(new BetslipStyleUpdater.Controller).updateBetslip([h],[f]),setupPlaceBetAvailability(),getBetslip().calcBets(),d||$("[id='cfId."+s+"']").val(u.cfId)}else if(!c&&window.initData.isPatchingCoeffOfSingleBetEnable){var _="ACTIVE"===i?"NONE":"REMOVE";r(s).each(function(){var e=$(this).data("acceptedSelectionUid");"REMOVE"===_?$("[id='display.is_not_active."+e+"']").show():$("[id='display.is_not_active."+e+"']").hide(),$("[id='choice.status."+e+"']").val(_),setupPlaceBetAvailability(),-1!==s.search(/total|handicap/i)&&l._setUpdateCandidate(e)})}else r(s).each(function(){l._setUpdateCandidate($(this).data("acceptedSelectionUid"))})},this.unsubscribe=function(e){this._activeSubscritions[e]&&(this._activeSubscritions[e].unsubscribe(),delete this._activeSubscritions[e])},this._setUpdateCandidate=function(e){-1===$.inArray(e,this._updateCandidates)&&this._updateCandidates.push(e)},this._initUpdater=function(){var e=this;null==this._updateTimer&&(this._updateTimer=setInterval(function(){var t=e._updateCandidates;e._updateCandidates=[],t.length>0&&e._updateBetslip(t)},1e3))},this.actualizeSubscriptions=function(){var e=this,t=this.makeSubscribeList();t.forEach(function(t){e.subscribe(t)}),this.makeUnsubscribeList(t).forEach(function(t){e.unsubscribe(t)})},this.makeSubscribeList=function(){var e=[];return i.getActual().forEach(function(t){var n=t.split(",")[0];-1===$.inArray(n,e)&&e.push(n);var a=t.split(".")[0];a=-1!==a.search(/total|handicap/i)?a.replace(/\d*$/,""):a,-1===$.inArray(a,e)&&e.push(a),-1===$.inArray(t,e)&&e.push(t)}),e},this.makeUnsubscribeList=function(e){var t=[],n=this._activeSubscritions;for(var a in n)n.hasOwnProperty(a)&&-1===$.inArray(a,e)&&t.push(a);return t},this.unsubscribeAll=function(){var e=this;$.each(this._activeSubscritions,function(t){e.unsubscribe(t)})},this._updateBetslip=function(e){var t=this,n={url:resolveBetslipUrl("UPDATE_CHOICES"),type:"POST",dataType:"json",data:{selectionsJSON:JSON.stringify(e)},success:function(e){if(e){var n=e.UPDATE_WTO;if(n){var a=n.selections,r=n.bets;a&&a.length>0&&r&&r.length>0?((new BetslipStyleUpdater.Controller).updateBetslip(a,r),t.actualizeSubscriptions(),setupPlaceBetAvailability(),getBetslip().calcBets(),isNeedApplyChanges(getBetPlacingMode(),$.map(a,function(e){return e.status}))||$(document).trigger("betslip.choicesUpdated",[i.getActualWithPriceType()])):loadCurrentBetslipPage()}else loadCurrentBetslipPage()}}};n.error=function(e){switch(e.status){case 405:initData.isUseBetslip2=JSON.parse(e.getResponseHeader("isUsebetslip2")),n.url=resolveBetslipUrl("UPDATE_CHOICES"),n.error=function(e){},$.ajax(n)}},$.ajax(n)},function(){var e=this;$(document).ready(function(){$(document).on("betslip.loaded",function(t){isPriceChangesSubscriptionAvailable()&&(0!==i.getAccepted().length?(setupPlaceBetAvailability(),e.actualizeSubscriptions(),e._initUpdater()):e.unsubscribeAll())}),$("#betslip_apply_choices").live("click",function(){isPriceChangesSubscriptionAvailable()&&e.applyChoices()}),$(document).on("placingmodechanged",function(e){isPriceChangesSubscriptionAvailable()&&setupPlaceBetAvailability()})})}.call(this)},ChoicesUpdater.controller=new ChoicesUpdater.Controller,function(e){function t(){e("[data-highlighted=true]").attr("data-highlighted",!1).removeClass("price-highlighted")}function n(){0!==i.length&&e.each(i,function(t,n){e('[data-selection-key="'+n.selection+'"][data-prt="'+n.type+'"]').closest("[data-coeff-uuid]").attr("data-highlighted",!0).addClass("price-highlighted")})}function a(a){if(e.isArray(a)){i=e.map(a,function(e){return e.selection=e.selection.replace(",","@"),e}),t(),n();var r=e.map(i,function(e){return e.selection});e(document).trigger("selectionRowHeaderHighlighter.cleanAndHighlight",[r])}}var i=[];e(document).bind("content.loaded",function(t){n(),e(document).trigger("selectionRowHeaderHighlighter.highlight",[e.map(i,function(e){return e.selection})])}),e(document).bind("betslip.loaded betslip.choicesUpdated openbets.loaded",function(e,t){a(t)}),e(document).bind("futureMatches.opened",function(){n()})}(window.jQuery),function(e){function t(n,a){var i=e(n).prev(),r=e(i).attr(a);if(void 0!==r&&!1!==r)return i;if(i.index()>0)return t(i,a);var o=e("["+a+"]",e(n).parents("["+a+"-body]:first"));return o||e()}function n(){e("[data-header-highlighted]").removeClass("header-highlighted"),e("[data-market-header-highlighted]").removeClass("header-highlighted")}function a(n){var a=e('[data-header-highlighted-bounded] [data-selection-key="'+n+'"]').closest("[data-coeff-uuid]");e.each(a,function(n,a){var i=e(a);"none"!=i.css("display")&&(t(i,"data-header-highlighted").addClass("header-highlighted"),t(i,"data-market-header-highlighted").addClass("header-highlighted"))})}e(document).on("selectionRowHeaderHighlighter.cleanAndHighlight",function(t,i){n(),e.isArray(i)&&e.each(i,function(e,t){a(t)})}),e(document).on("selectionRowHeaderHighlighter.highlight",function(t,n){e.isArray(n)&&e.each(n,function(e,t){a(t)})}),e(document).on("mouseenter","[data-header-highlighted-bounded] [data-coeff-uuid]:not([data-stop-mouseleave='stop-mouseleave']), [data-plus-players='plus-players'], [data-selection-link='selection-link']",function(){t(e(this),"data-header-highlighted").addClass("header-highlighted-focused"),t(e(this),"data-market-header-highlighted").addClass("header-highlighted-focused")}),e(document).on("mouseleave","[data-header-highlighted-bounded] [data-coeff-uuid]:not([data-stop-mouseleave='stop-mouseleave']), [data-plus-players='plus-players'], [data-selection-link='selection-link']",function(){t(e(this),"data-header-highlighted").removeClass("header-highlighted-focused"),t(e(this),"data-market-header-highlighted").removeClass("header-highlighted-focused")})}(window.jQuery),function(e){var t=PanbetConst.Messages;e.extend(e.validator.messages,{required:t.FIELD_REQUIRED,remote:t.FIELD_REMOTE,url:t.URL_ERR,date:t.DATE,dateISO:t.DATE,number:t.NUMBER,digits:t.DIGITS,creditcard:t.CREDITCARD,equalTo:t.EQUALTO,accept:t.ACCEPT_EXT_ERR,maxlength:e.validator.format(t.MAX_LENGTH),minlength:e.validator.format(t.MIN_LENGTH),rangelength:e.validator.format(t.RANGE_LENGTH),range:e.validator.format(t.RANGE),max:e.validator.format(t.MAX),min:e.validator.format(t.MIN),nicknameAvailable:t.NICKNAME_TAKEN_ERROR});var n={validDateFormat:function(n,a){return e.validator.format(t.DATE_WITH_FORMAT_ERR,a.format)},validDateLimit:function(n,a){return e.validator.format(t.DATE_RANGE_ERR,a.fromFormDate,a.toFormDate)}},a={validDateFormat:function(e,n){return isPage(PAGES.JOIN)?t.DATE:t.DATE_OF_BITH_ERR},validDateLimit:function(n,a){return isPage(PAGES.JOIN)?a.isUpperLimit?t.BIRTH_DATE_LESS18_ERR:t.DATE:e.validator.format(t.DATE_RANGE_ERR,a.fromFormDate,a.toFormDate)}},i={validDateFormat:function(e,n){return t.DATE},validDateLimit:function(e,n){return n.isUpperLimit?t.DATE_IN_THE_PAST:t.DATE}},r={validDateFormat:function(e,n){return t.DATE},validDateLimit:function(e,n){return n.isUpperLimit?t.DATE:t.DATE_IN_THE_FUTURE}},o=function(){return initData.isRussia?t.REGEX_ERROR_RUSSIA:t.DEFAULT_FIELD_ERR};PanbetBaseMessages={street_header:t.STREET,age_less18:t.BIRTH_DATE_LESS18_ERR,date_in_past:t.DATE_IN_THE_PAST,date_in_future:t.DATE_IN_THE_FUTURE,dateISO:t.DATE,stake_limit_daily_field:{regex:t.DEFAULT_FIELD_ERR,accountLimitRequired:t.ACCOUNT_LOSS_LIMIT_REQUIRED},deposit_limit_daily_field:{regex:t.DEFAULT_FIELD_ERR,accountLimitRequired:t.ACCOUNT_DEPOSIT_LIMIT_REQUIRED},deposit_limit_weekly_field:{regex:t.DEFAULT_FIELD_ERR,accountLimitRequired:t.ACCOUNT_DEPOSIT_LIMIT_REQUIRED},deposit_limit_monthly_field:{regex:t.DEFAULT_FIELD_ERR,accountLimitRequired:t.ACCOUNT_DEPOSIT_LIMIT_REQUIRED},cvv:{regex:t.DEFAULT_FIELD_ERR},login:{regex:function(e,n){return-1!=n.value.indexOf("@")?t.USERNAME_INCORRECT:t.LOGIN_REGEXP_ERROR}},login_password:{regex:function(e,n){return t.PASSWORD_REGEXP_ERROR}},username:{regex:t.DEFAULT_FIELD_ERR},chineseFullName:{regex:t.CHINA_SYMBOL_REGEXP_ERROR,required:t.CHINESE_FULL_NAME_REQUIRED},check_password:{regex:t.DEFAULT_FIELD_ERR},password:{regex:function(e,n){return t.PASSWORD_REGEXP_ERROR}},oldpassword:{regex:t.PASSWORD_REGEXP_ERROR},confirmpassword:t.CONFIRM_PASSWORD_ERR,maskedPhone:{regex:t.PHONE_REQUIRED,format:t.PHONE_REQUIRED},phone2:{regex:t.DEFAULT_FIELD_ERR},nameoncard:{regex:t.DEFAULT_FIELD_ERR},wmpurse:{regex:t.DEFAULT_FIELD_ERR},amount:{regex:t.AMOUNT_FIELD_ERR},amount_manual:{regex:t.DEFAULT_FIELD_ERR},number_document:{regex:t.DEFAULT_FIELD_ERR,validDocumentNumber:t.DOCUMENT_NUMBER_ERROR},documentSeries:{regex:t.DEFAULT_FIELD_ERR},documentIssuedBy:{regex:t.DEFAULT_FIELD_ERR},documentDepartmentCode:{regex:t.DEFAULT_FIELD_ERR},aemail:{regex:t.EMAIL_REQUIRED},aemail2:t.CONFIRM_EMAIL_ERR,nickname:{minlength:t.NICKNAME_LENGTH_ERROR,regex:t.NICKNAME_REGEX_ERROR},secure_id:{regex:t.NETELLER_SECURE_ID_ERR},netellerpurse:{regex:t.DEFAULT_FIELD_ERR},moneta_purse:{regex:t.DEFAULT_FIELD_ERR},postcode:t.POSTCODE_REQUIRED,email_purse:{regex:t.DEFAULT_FIELD_ERR},promo:{regex:t.PROMO_REQUIRED},mobile_phone:{regex:t.MOBILE_PHONE_REQUIRED},qiwi_mobile_phone:{regex:t.PHONE_REGEXP_ERROR},oneclickbetstakevalue:{regex:t.DEFAULT_FIELD_ERR},agreement_checkbox:{required:t.AGREEMENT_REQUIRED},card_number:{regex:t.CARD_NUM_REQUIRED},nip:{regex:t.DEFAULT_FIELD_ERR},country:{required:t.COUNTRY_REQUIRED},surname:{regex:o(),required:t.SURNAME_REQUIRED},surname2:{required:t.SURNAME_REQUIRED},middlename:{regex:o(),required:isPage(PAGES.ID_UPLOAD)?t.MIDDLENAME_REQUIRED:t.FIELD_REQUIRED},fromDate:n,toDate:n,birthday:a,periodsefield:{validDateFormat:function(n,a){return e.validator.format(t.DATE_WITH_FORMAT_ERR,a.format)},validDateLimit:function(e,n){return t.SELFEXCLUSION_DATE_MIN}},address1:{required:t.ADDRESS_REQUIRED,regex:o()},address2:{regex:o(),required:t.DEFAULT_FIELD_ERR},county:{regex:o(),required:t.DEFAULT_FIELD_ERR},birthPlace:{regex:o()},street:{required:t.FIELD_REQUIRED,regex:t.DEFAULT_FIELD_ERR},town:{required:t.TOWN_REQUIRED,regex:o()},registrationRegion:{regex:o()},buildingnumber:{regex:t.DEFAULT_FIELD_ERR},registrationBuilding:{regex:t.DEFAULT_FIELD_ERR},registrationFlat:{regex:t.DEFAULT_FIELD_ERR},ccsanswer:{required:t.CCSANSWER_REQUIRED,regex:initData.isRussia?t.REGEX_ERROR_RUSSIA:t.CCSANSWER_REQUIRED},firstname:{regex:o(),required:t.FIRSTNAME_REQUIRED},walletonepurse:t.WALLET_ONE_PURSE_ERR,yandexpurse:{yandexPurseMainValid:t.YANDEX_PURSE_ALERT,yandexPursePrefixValid:t.YANDEX_PURSE_PREFIX_ALERT},weeklyDepositLimit:t.DIGITS,monthlyDepositLimit:t.DIGITS,taxCode:t.TAX_CODE_ERROR,easypay_card_number:t.EASYPAY_FIELD_ERR,ecoPayzPurse:t.DIGITS,captcha:{regex:function(){return t.ENTER_VERIFICATION_CODE}},openbettimeout:{regex:t.DEFAULT_FIELD_ERR},promoCodeField:{regex:t.DEFAULT_FIELD_ERR},pp_payment_field_error:function(t,n,a,i){return t&&t.length?!0===n?e.validator.format(t,a):t:i},pp_payment_field_default_field_error:t.DEFAULT_FIELD_ERR,pp_payment_field_default_required_error:t.FIELD_REQUIRED,documentIssue:i,documentExpiry:r};var s=PanbetConst.Date;DatepickerLocalization={days:[s.DAYS_SUN,s.DAYS_MON,s.DAYS_TUE,s.DAYS_WED,s.DAYS_THU,s.DAYS_FRI,s.DAYS_SAT,s.DAYS_SUN],daysShort:[s.DAYS_SH_SUN,s.DAYS_SH_MON,s.DAYS_SH_TUE,s.DAYS_SH_WED,s.DAYS_SH_THU,s.DAYS_SH_FRI,s.DAYS_SH_SAT,s.DAYS_SH_SUN],daysMin:[s.DAYS_MIN_SUN,s.DAYS_MIN_MON,s.DAYS_MIN_TUE,s.DAYS_MIN_WED,s.DAYS_MIN_THU,s.DAYS_MIN_FRI,s.DAYS_MIN_SAT,s.DAYS_MIN_SUN],months:[s.MONTH_JAN,s.MONTH_FEB,s.MONTH_MAR,s.MONTH_APR,s.MONTH_MAY,s.MONTH_JUN,s.MONTH_JUL,s.MONTH_AUG,s.MONTH_SEP,s.MONTH_OCT,s.MONTH_NOV,s.MONTH_DEC],monthsShort:[s.MONTH_SH_JAN,s.MONTH_SH_FEB,s.MONTH_SH_MAR,s.MONTH_SH_APR,s.MONTH_SH_MAY,s.MONTH_SH_JUN,s.MONTH_SH_JUL,s.MONTH_SH_AUG,s.MONTH_SH_SEP,s.MONTH_SH_OCT,s.MONTH_SH_NOV,s.MONTH_SH_DEC],weekMin:s.WEEK_MIN,dayWeekStart:s.FIRST_DAY_OF_WEEK-1,dateFormat:s.DATEPICKER_DATE_FORMAT,maskDay:s.DATE_MASK_DAY,maskMonth:s.DATE_MASK_SH_MONTH,maskYear:s.DATE_MASK_YEAR,monthsGenitive:s.MONTHS_GEN}}(jQuery),$.validator.addMethod("regex",function(e,t,n){return n.constructor!=RegExp?n=new RegExp(n):n.global&&(n.lastIndex=0),this.optional(t)||n.test(e)}),$.validator.addMethod("checkAge",function(e,t){return _validateDate({value:e,element:t,settings:this.settings,inThePast:!0,diff:-18})},PanbetBaseMessages.age_less18),$.validator.addMethod("dateInPast",function(e,t){return _validateDate({value:e,element:t,settings:this.settings,inThePast:!0,diff:0})},PanbetBaseMessages.date_in_past),$.validator.addMethod("dateInFuture",function(e,t){return _validateDate({value:e,element:t,settings:this.settings,inThePast:!1,diff:0})},PanbetBaseMessages.date_in_future),$.validator.addMethod("validDateFormat",function(e,t){var n="["+$.fn.PanbetDatepikerField.DATEPICKER_DATA_ATTR+"], ["+$.fn.PanbetDatepikerField.DATEPICKER_SELECT_DATA_ATTR+"]",a=$(t).closest(n).PanbetDatepikerField("isValid");return t.format=a.format,a.valid}),$.validator.addMethod("validDateLimit",function(e,t){var n="["+$.fn.PanbetDatepikerField.DATEPICKER_DATA_ATTR+"], ["+$.fn.PanbetDatepikerField.DATEPICKER_SELECT_DATA_ATTR+"]",a=$(t).closest(n).PanbetDatepikerField("isLimitValid");return a.valid||(t.fromFormDate=a.min,t.toFormDate=a.max,t.isUpperLimit=a.isUpperLimit),a.valid}),$.validator.addMethod("validDocumentNumber",function(e,t){return getDocumentValidator().validateDocumentNumber(e)}),jQuery.validator.addClassRules("date",{validDateFormat:!0,validDateLimit:!0}),jQuery.validator.addClassRules("checkPhone",{checkPhone:!0}),$.validator.addMethod("checkPhone",function(e,t){var n=$(t).intlTelInput("getSelectedCountryData");return intlTelInputUtils.isValid(n,e)},PanbetBaseMessages.maskedPhone.format),$.validator.addMethod("yandexPurseMainValid",function(e,t,n){return(n=new RegExp(n)).test(e)}),$.validator.addMethod("yandexPursePrefixValid",function(e,t,n){return(n=new RegExp(n)).test(e)}),$.validator.addMethod("accountLimitRequired",function(e,t,n){var a=!e,i=!$("[name="+n+"]").first().is(":checked");return(a?1:0)^(i?1:0)}),$.validator.addMethod("requiredLength",function(e,t,n){return e.length==n}),$.validator.addMethod("panbet-dateISO",function(e,t){var n=$.validator.methods.dateISO.call(this,e,t),a=$(t).parent().find("select");return n?this.settings.unhighlight(a,this.settings.errorClass,this.settings.validClass):this.settings.highlight(a,this.settings.errorClass,this.settings.validClass),n},PanbetBaseMessages.dateISO),$.validator.addMethod("nicknameAvailable",_.throttle(function(e,t,n,a){if(this.optional(t))return"dependency-mismatch";a="string"==typeof a&&a||"nicknameAvailable";var i,r,o=this.previousValue(t,a);return o.old===e?(initData.availableNicknames=o.availableNicknames,o.valid):(o.old=e,i=this,this.startRequest(t),r={nickname:e},$.ajax({url:initData.checkNicknameActionUrl,mode:"abort",port:"validate"+t.name,type:"POST",dataType:"json",data:r,context:i.currentForm}).done(function(e){var n,r=e&&(!0===e.valid||"true"===e.valid);r?(initData.availableNicknames=[],n=i.formSubmitted,i.resetInternals(),i.prepareElement(t),i.formSubmitted=n,i.successList.push(t),i.invalid[t.name]=!1,i.showErrors()):(initData.availableNicknames=e.available,i.formatAndAdd(t,{method:a}),o.message=i.errorMap[t.name],i.invalid[t.name]=!0,i.showErrors()),o.valid=r,o.availableNicknames=initData.availableNicknames,i.stopRequest(t,r)}),"pending")},300)),$.validator.addMethod("data-pp-validator-regexp",function(e,t,n){var a=$(t);if("cvv"===a.attr("name")||"cvv"===a.attr("data-ong-name")){var i=$('[name="cardtype"]');if(0==i.length&&(i=$('[data-ong-name="cardtype"]')),i.length&&"MC"===i.val()&&""===e)return!1}if(""===e)return!0;n=JSON.parse(n)||{};try{return new RegExp(n.regexp).test(e)}catch(e){return!0}},function(e,t){var n=(e=JSON.parse(e)||{}).msg,a=e.msgFormat,i=!0===a?$(t).val():"";return PanbetBaseMessages.pp_payment_field_error(n,a,i,PanbetBaseMessages.pp_payment_field_default_field_error)}),$.validator.addMethod("data-pp-validator-required",function(e,t,n){return""!==e&&$.trim(e).length>0},function(e,t){return e=JSON.parse(e)||{},PanbetBaseMessages.pp_payment_field_error(e.msg,null,null,PanbetBaseMessages.pp_payment_field_default_required_error)}),$.validator.addMethod("data-pp-validator-range",function(e,t,n){if(""===e)return!0;if(!e.match(/^\d+$/)&&!e.match(/^\d+\.\d+$/))return!1;var a=(n=JSON.parse(n)||{}).range||[],i=parseFloat(a[0]),r=parseFloat(a[1]),o=n.rangeMode||[],s=o[0],c=o[1];return e=parseFloat(e),!(!isNaN(i)&&("EXCLUSIVE"===s&&e<=i||e<i))&&!(!isNaN(r)&&("EXCLUSIVE"===c&&e>=r||e>r))},function(e,t){var n=(e=JSON.parse(e)||{}).msg,a=e.msgFormat,i=!0===a?$(t).val():"";return PanbetBaseMessages.pp_payment_field_error(n,a,i,PanbetBaseMessages.pp_payment_field_default_field_error)}),$.validator.addMethod("data-pp-validator-range-length",function(e,t,n){e=e.length;var a=(n=JSON.parse(n)||{}).range||[],i=parseInt(a[0],10),r=parseInt(a[1],10),o=n.rangeMode||[],s=o[0],c=o[1];return!(!isNaN(i)&&("EXCLUSIVE"===s&&e<=i||e<i))&&!(!isNaN(r)&&("EXCLUSIVE"===c&&e>=r||e>r))},function(e,t){var n=(e=JSON.parse(e)||{}).msg,a=e.msgFormat,i=!0===a?$(t).val():"";return PanbetBaseMessages.pp_payment_field_error(n,a,i,PanbetBaseMessages.pp_payment_field_default_field_error)}),$.validator.addMethod("keyboardLayout",function(e,t,n){var a=/[0-9$&?!|()@#+*{}<>%\/\\]/,i=null,r=null,o=function(e){var t=$.trim(e);return t.length<1||s(t)},s=function(e){if(!e)return!1;var t=$.trim(e);if(!t.length)return!1;for(var n=0;n<t.length;n++){var a=t.charAt(n);if(d(a))return!1;if(l(a)){if(null===i)i="RU";else if("RU"!==i)return i="RU",!1}else if(u(a)){if(null===i)i="GR";else if("GR"!==i)return i="GR",!1}else if(!c(a))if(null===i)i="COMMON";else if("COMMON"!==i)return i="COMMON",!1}return!0},c=function(e){return e.match("[ -]")},l=function(e){return e.match("[-]")},u=function(e){return e.match("[-]")},d=function(e){return e.match(a)},h=function(e,t){var n="";return"string"===$.type(t)&&(t=t.split(",")),"array"===$.type(t)&&($.each(t,function(e,t){n+="[name="+t+"],"}),n=n.substr(0,n.length-1)),e.find(n)}($(this.currentForm),n);if(!$(t).is(h[0])){var p=this.clean(h[0]);return this.toHide=this.toHide.add(this.errorsFor(p)),this.currentElements=this.currentElements.add($(p)),this.check(p)?delete this.invalid[p.name]:this.invalid[p.name]=!0,!0}var f=o(e);return!!f&&(r=i,$.each(h,function(){var e=$(this);e.is(h[0])||(i=r,f=f&&o(e.val()))}),f)},PanbetConst.Plugins.KeyboardLayout.ERROR_MESSAGE),$.validator.addMethod("nicknameAndAuthType",function(e,t){var n=$(t);return!("NICKNAME"===$(this.currentForm).find("[name=authtype]:checked").val()&&!n.val())},PanbetConst.Messages.NICKNAME_REQUIRED),$.validator.addMethod("checkAuthType",function(e,t){var n=$(this.currentForm),a=n.find("[name=nickname]"),i=n.find("[name=authtype]"),r=i.filter(":checked");return!(i.length>0&&0==r.length&&a.val())},PanbetConst.Messages.AUTHTYPE_REQUIRED),CashsourceHelper=function(){},CashsourceHelper.onDepositValueClick=function(e){isNaN(parseMoneyString(e))?($$(CashsourceHelper.AMOUNT_MANUAL_ID).disabled=!1,$$(CashsourceHelper.AMOUNT_ID).value=$$(CashsourceHelper.AMOUNT_MANUAL_ID).value):($$(CashsourceHelper.AMOUNT_MANUAL_ID).disabled=!0,$$(CashsourceHelper.AMOUNT_ID).value=e,$("#"+CashsourceHelper.AMOUNT_MANUAL_ID).removeClass("error")),CashsourceHelper._highlightCommonValue(e)},CashsourceHelper.onSubmitClick=function(){""==$$(CashsourceHelper.AMOUNT_ID).value&&($$(CashsourceHelper.AMOUNT_MANUAL_ID).disabled=!1)},CashsourceHelper._highlightCommonValue=function(e){$("[id^=c_value_]").removeClass("selected"),$("[id=c_value_"+e+"]").addClass("selected")},CashsourceHelper.showWindow=function(e){$("#"+e).modal({position:["20%"]}),$("#"+e).find(".no").focus()},CashsourceHelper.onWithdrawFormSubmit=function(){var e=parseMoneyString($$(CashsourceHelper.FORM_ID).amount.value);return initData.isAlderney&&(e=e.toFixed(2)),panbetValidate($("#"+CashsourceHelper.FORM_ID)).form()&&($("#withdraw_confirm .message_withdraw_sum").html(e),CashsourceHelper.showWindow("withdraw_confirm")),window.event&&(window.event.returnValue=!1),!1},CashsourceHelper.onDepositFormSubmit=function(){var e=parseMoneyString($$(CashsourceHelper.FORM_ID).amount.value);return initData.isAlderney&&(e=e.toFixed(2)),panbetValidate($("#"+CashsourceHelper.FORM_ID)).form()&&($("#deposit_confirm .message_deposit_sum").html(e),CashsourceHelper.showWindow("deposit_confirm")),window.event&&(window.event.returnValue=!1),!1},CashsourceHelper.onTransferFormSubmit=function(){var e=parseMoneyString($$(CashsourceHelper.FORM_ID).amount.value);return panbetValidate($("#"+CashsourceHelper.FORM_ID)).form()&&($("#deposit_confirm .message_deposit_sum").html(e),CashsourceHelper.showWindow("deposit_confirm")),window.event&&(window.event.returnValue=!1),!1},CashsourceHelper.onSimpleFormSubmit=function(){$$(CashsourceHelper.FORM_ID);return panbetValidate($("#"+CashsourceHelper.FORM_ID)).form()&&CashsourceHelper.showWindow("simple_confirm"),window.event&&(window.event.returnValue=!1),!1},CashsourceHelper.onMarathonSubmitForm=function(){var e=panbetValidate($("#"+CashsourceHelper.FORM_ID)).form();return e&&CashsourceHelper.showProgress(),window.event&&(window.event.returnValue=e),e},CashsourceHelper.proceedSubmitForm=function(){CashsourceHelper.showProgress(),initData.isCuracaoPlatform&&!initData.isItaly||$$(CashsourceHelper.FORM_ID).submit()},CashsourceHelper.simpleProceedSubmitForm=function(){CashsourceHelper.showProgress(),$$(CashsourceHelper.FORM_ID).submit()},CashsourceHelper.showProgress=function(){CashsourceHelper.SHOW_PROGRESS&&showProgressModal()},CashsourceHelper.hideProgress=function(){CashsourceHelper.SHOW_PROGRESS&&closeModal()},CashsourceHelper.updateCheckPromoCodeInputHidden=function(e){$("#"+CashsourceHelper.FORM_ID+' input[name="check_promo_code_on_deposit"]').val(e)},CashsourceHelper.FORM_ID="form",CashsourceHelper.AMOUNT_ID=CashsourceHelper.FORM_ID+"_amount",CashsourceHelper.AMOUNT_MANUAL_ID=CashsourceHelper.FORM_ID+"_amount_manual",CashsourceHelper.SHOW_PROGRESS=!0,$(document).on("click","#deposit_promo_code_alert_window_btn_yes",function(){CashsourceHelper.updateCheckPromoCodeInputHidden(!1),$("#"+CashsourceHelper.FORM_ID).submit()}),$(document).on("click","#deposit_promo_code_alert_window_btn_no[data-promo-code-error-type='DEPOSIT_VALUE_TOO_LOW']",function(){$("#"+CashsourceHelper.FORM_ID+"_amount").focus()}),$(document).ready(function(){var e=$("#deposit_promo_code_alert_window");e.length&&panbetModal(e)}),$(document).ready(function(){$(":radio[name = permanent]").click(function(){var e=1==this.value;e&&($("#"+CashsourceHelper.FORM_ID).validate().resetForm(),$("#"+CashsourceHelper.FORM_ID+" .error").removeClass("error")),$("["+$.fn.PanbetDatepikerField.DATEPICKER_DATA_ATTR+"]").PanbetDatepikerField("disabled",e)});var e=function(){$("#form").find("[data-punter-balance-value]").each(function(){var e=$(this),t=window.PanbetPunterBalance.getBalanceValue(e);e.parent().toggleClass("disabled",!t)})},t=function(e){var t=$("#form").find("[data-deposit-bonuses-blocked-sum]");if(!t.data("depositBonusesWithdrawForbidden")){var n=e-window.PanbetPunterBalance.parseBalanceValue(t.data("depositBonusesBlockedSum"));n<0&&(n=0),t.data("punterBalanceValue",n).html(window.PanbetPunterBalance.formatFloat(n))}},n=initData.showBalanceWithdrawRestrictions,a=initData.withdrawalBalanceEnabled;PunterBalanceRefreshSubscriber.subscribe({loggerName:"WithdrawPageWithdrawableBalanceRefresh",enabled:n,destination:a?initData.stomp.punterWithdrawableBalanceChangesPath:initData.stomp.punterMainBalanceChangesPath,containerId:"form",onBalanceUpdated:function(n,a,i){t(a),e()}}),n&&(e(),$(document).on("click","#form [data-withdraw-balance-link]",function(e){var t=$(this);if(!t.hasClass("disabled")){var n=window.PanbetPunterBalance.getBalanceValue(t.find("[data-punter-balance-value]")),a=$("#form_amount");window.PanbetPunterBalance.parseBalanceValue(a.val())!=n&&(a.val(n),a.trigger("amountFieldChanged"))}}))}),$(document).ready(function(){var e="undefined"!=typeof initData&&initData.commissionData||void 0;if(void 0!=e){var t=$("#form_amount"),n=$("[data-with-commission]"),a=e.commissions,i=e.minAmount,r=e.maxAmount,o=e.isBYR;t.length&&n.length&&void 0!=a&&a.length&&t.on("keyup amountFieldChanged",function(e){var s=e.keyCode||e.which;if("37"!=s&&"39"!=s){t.val(t.val().replace(/[^\d\.]/g,""));var c=parseFloat(t.val());if(!(void 0!=i&&c<i||void 0!=r&&c>r)){c>=i&&n.val(c.toFixed(2));for(var l=0;l<a.length;l++){var u=a[l],d=u.commissionThreshold,h=!0,p=void 0,f=void 0,_=void 0;if(void 0!=d){var g=parseFloat(d.threshold),E=d.strategy;"less"==E?h=c<g:"lessOrEqual"==E?h=c<=g:"more"==E?h=c>g:"moreOrEqual"==E&&(h=c>=g)}if(h)if("percent"==u.type?p=c*u.commission:"fixedValue"==u.type&&(p=u.commission),c>=i&&c>p){if(o){var m=p%100;m<=50?p-=m:p+=100-m}void 0!=u.minCommission&&p<(f=parseFloat(u.minCommission))&&(p=f),void 0!=u.maxCommission&&p>(_=parseFloat(u.maxCommission))&&(p=_),c-=p,n.val(c.toFixed(2))}else n.val("")}}}})}}),CashsourceHelper.onAmountKeyUp=function(e){var t=e.keyCode||e.which;if("37"!=t&&"39"!=t){var n=$("#form_type").val(),a=$("#form_amount");a.val(a.val().replace(/[^\d\.]/g,""));var i=a.val().length>0?a.val():"0";jQuery.ajax({method:"GET",data:{pageAction:"getCommissionInfo",amountValue:i,commissionTypeValue:n,csId:$('input[name="csId"]').val()},success:function(e){e&&($("[data-result-amount]").remove(),$("[data-result-amount-commissions]").remove(),$("[data-result-amount-after]").after(e))}})}},$(document).on("keyup amountFieldChanged","[data-pp-key-field]",_.throttle(CashsourceHelper.onAmountKeyUp,300)),CashsourceHelper.checkRemovalCashSourceToken=function(){var e=$("#removal_cashsource_token","#verify_remove_cashsource"),t=$("[data-remove-cashsource-token-error]","#verify_remove_cashsource"),n=e.val();if(!new RegExp(/^(?!\s*$).+/).test(n))return t.html(PanbetConst.Messages.FIELD_REQUIRED),e.addClass("error"),void t.show();var a=$('button[data-button-type="yes"]',"#verify_remove_cashsource");a.length&&(a.hide(),$("img[data-loading-img]","#verify_remove_cashsource").show()),jQuery.ajax({method:"GET",data:{pageAction:"deleteCashSourceAction",removeCashSourceHash:n,csId:$('input[name="csId"]').val()},success:function(e){e&&(console.log(e),$("#verify_remove_cashsource").html(e))}})},CashsourceHelper.redirectAfterCashSourceRemove=function(){window.location.replace(initData.base_dir+"/deposit.htm")},CashsourceHelper.closeRemoveCashSourcePopUp=function(){$.modal.close()},$(document).ready(function(){var e=$("#verify_remove_cashsource");e.length&&panbetModal(e,{})}),$(document).on("focus","#removal_cashsource_token",function(e){$(this).removeClass("error"),$("[data-remove-cashsource-token-error]").hide()}),function(){var e=function(){var e=function(){var e,t,n=!1;return{show:function(t,a){if(!this.isOpen()){n=!0,$.modal.close();var i=this;e=setTimeout(function(){i.hide(),$.isFunction(a)&&a()},initData.sessionAlertInterval),$("#session_timeout").modal({position:["20%"],escClose:!1}),$("#session_timeout [data-submit-btn]").click(function(){clearTimeout(e),i.hide(),$.isFunction(t)&&t()})}},hide:function(){this.isOpen()&&(n=!1,$.modal.close())},refresh:function(e,n){if(clearTimeout(t),initData.timeout&&0!=initData.timeout){var a=this;t=window.setTimeout(function(){a.show(e,n)},initData.timeout-initData.sessionAlertInterval-initData.sessionAlertDelay)}},isOpen:function(){return n}}}(),t=function(){e.refresh(i,function(){AuthHelper.logout()})},n=function(e){e&&(e.sessionExpire&&(initData.timeout=e.sessionExpire),e.serverTime&&e.tzPrefix&&getClock().setServerTimeString(e.serverTime,e.tzPrefix),t())},a=function(e){return $.ajax({type:"POST",dataType:"json",url:e}).done(function(e){n(e)})},i=function(){return a(initData.seance_prolongate_url)};return{initSessionUpdate:function(){var e=this;initData.seance_update&&initData.seance_update>0&&setInterval(function(){e.updateSession()},initData.seance_update),t()},registerProlongateClientSessionOnAjax:function(){$(document).ajaxComplete(function(e,t,a){if(t&&t.responseText)try{n($.parseJSON(t.responseText))}catch(e){}})},updateSession:function(){return a(initData.seance_preference_update_url)},prolongateSession:function(){return i()},alertWindowOpened:function(){return e.isOpen()}}}();window.getSessionControl=function(){return e}}(jQuery),function(e){e.StringBuilder=function(){function e(e){return null==e||void 0===e||e.length<=0}var t=[];return{append:function(n){return e(n)?this:(t[t.length]=n,this)},clear:function(){return t=[],this},isEmpty:function(){return 0==t.length},toString:function(){return t.join("")}}}}(window),function(e){function t(t){return 0!=e("[data-event-treeid="+t+"] .market-details-"+t+":last").length}function n(t){return e("[data-event-treeid="+t+"] [data-event-statistics-container]:first").hasClass("show-statistics")}function a(e,t){var n=Markets.getFoot(e);n.length>0&&n.css("display",t);var a=Markets.getDelimiter(e);a.length>0&&a.css("display",t)}Markets=function(){},Markets.ShortCutsLinksInfo=[],Markets.ATTRIBUTE_BLOCK_ID="blockid",Markets.ATTRIBUTE_EVENT_ID="eventid",Markets.ATTRIBUTE_TREE_ID="treeid",Markets.IMG_LOADING_POSTFIX="_loading",Markets.IMG_LOADING_ATTR="process",Markets.SHORTCUTS_ACTIVE="active-shortcut-menu-link",Markets.SHORTCUTS_DISABLED="not-clickable-menu-link",Markets.SHORTCUTS_LINK="shortcutLink_event",Markets.SHORTCUTS_TYPE="type",Markets.SHORTCUTS_BLOCK="block",Markets.SHORTCUTS_ID="shortcutsMenuTreeId",Markets.SHORTCUTS_ID_WRAPPED="[id^='shortcutsMenuTreeId']",Markets.SHORTCUTS_ALL="10",Markets.SHORTCUTS_SELECTED="11",Markets.SHORTCUTS_FIRST="1",Markets.SHORTCUTS_OTHER="9",Markets.SHORTCUTS_MARKET_ID="marketId",Markets.SLASH="/",Markets.COLON=":",Markets.SEMICOLON=";",Markets.COMMA=",",Markets.CHECKBOX="checkbox_",Markets.BLOCK_ID="blockId",Markets.ONLY_ONE_EVENT_OPEN_AM=!1,Markets.MORE_VIEW_PREF="event-more-view-",Markets.NEED_PROCESS_OPENED_MARKETS=!1,Markets.OPENED_MARKETS="am",Markets.APPLY_COUPON_MAIN_ROW_PREFERENCE_EVENT="preferences_couponMainRow_apply",Markets.UPDATE_COUPON_MAIN_ROW_EVENT="preferences_couponMainRow_update",Markets.MENU_LINK_SELECT_EVENT="shortcutMenu_menuLink_select",EventView=function(t){this.oView=t,this.getEventID=function(){return this.oView.getAttribute(Markets.ATTRIBUTE_EVENT_ID).split("_").shift()},this.getTreeID=function(){return this.oView.getAttribute(Markets.ATTRIBUTE_TREE_ID)},this.isLive=function(){var e=this.oView.getAttribute("isLive");return e&&"true"==e.toLowerCase()},this.isVisible=function(){return this.oView.eventState||(this.oView.eventState=0!=this.getDetails().length),this.oView.eventState},this.setVisibility=function(e){this.oView.eventState=e},this.close=function(){this.hideViewDetails(),this.setVisibility(!1)},this.show=function(){Markets.showProcess(this.oView),Markets.ONLY_ONE_EVENT_OPEN_AM?this.showViewDetails(this.hideOtherViewDetails):this.showViewDetails()},this.applyDetails=function(){Markets.showFoot(this.oView),Markets.hideProcess(this.oView),this.setVisibility(!0),e(document).trigger("content.loaded")},this.showViewDetails=function(t,n){var a=this,i=this.getTreeID(),r=function(){Markets.hideProcess(a.oView),e(a.oView).show(),e.isFunction(n)&&n.apply(a)};return e(document).trigger("beginAdditionalMarketsUpdate",[i,this.isLive()]),e.ajax({url:initData.base_dir+"/"+(this.isLive()?"live":"")+"markets.htm",type:"POST",dataType:"json",data:{treeId:this.getTreeID(),isChecked:e(a.oView).parents("[data-event-treeid]").first().find(".live-selection").prop("checked"),siteStyle:initData.siteStyle},success:function(n){if(!n)return r(),void e('[id*="'+Markets.MORE_VIEW_PREF+'"]',a.oView.parentNode).remove();if("COUNT"in n&&e(a.oView).find("span").text("+"+n.COUNT),"ADDITIONAL_MARKETS"in n){var o=e(n.ADDITIONAL_MARKETS);o=panbet.PreferencesApplier.applyOnAdditionalMarkets(o,i),e("[data-event-statistics-container]:first",e(a.oView).parents("[data-event-name]")).after(o),a.setVisibility(!0);var s=e(a.oView).parents("[data-event-treeid]:first");Markets.isNotLastEventRowInCoupone(s)&&Markets.createDelimiterAndMarketsHeader(s,'[class ^= "market-details-"]:last')}else e(a.oView).siblings().remove(),e(a.oView).remove();a.applyDetails(),e.isFunction(t)&&t.apply(a),Markets.addToOpenedIdsInTheUrl(i)},error:r}).always(function(){e(document).trigger("successAdditionalMarketsUpdate",[i,a.isLive()])})},this.getDetails=function(){return e("[data-market-details]",e(this.oView).parents("[data-event-treeid]:first"))},this.hideViewDetails=function(){this.getDetails().remove();var e=this.getTreeID();n(e)||Markets.hideFoot(this.oView),Markets.removeTreeIdFromOpenedIdsInTheUrl(e)},this.getViewDetailsHeight=function(){var t=0;this.getDetails().each(function(){t+=e(this).outerHeight()});var n=Markets.getFoot(this.oView);return null!=n&&(t+=n.outerHeight()),t},this.hideOtherViewDetails=function(){var t=this.getTreeID(),n=0,a=!0;if(e('[id*="'+Markets.MORE_VIEW_PREF+'"]').each(function(i,r){if(e(r).attr("treeid")!=t){var o=new EventView(r);o&&o.isVisible()&&(a&&(n+=o.getViewDetailsHeight()),o.close())}else a=!1}),n>0){var i=e(".main-container"),r=i.scrollTop()-n;i.scrollTop(0<r?r:0)}}},Markets.createDelimiterAndMarketsHeader=function(t,n){if(!e(".event-delimiter",t).length){var a=t.find(n),i=Markets.createDelimiter(t),r=t.data("eventTreeid");if(a.after(i),i.attr("data-event-header",r),!("SIMPLE"==initData.siteStyle&&t.data("live")||e(".market_footer",t).length)){var o=Markets.createLabels(t);i.after(o),o.attr("data-event-header",r)}}},Markets.showDelimiterAndMarketsHeaderForStatistics=function(t){var n=e(t).parents("[data-event-treeid]:first");Markets.isNotLastEventRowInCoupone(n)&&Markets.createDelimiterAndMarketsHeader(n,"[data-event-statistics-container]"),Markets.showFoot(t)},Markets.hideDelimiterAndMarketsHeaderForStatistics=function(e,n){t(n)||Markets.hideFoot(e)},Markets.isNotLastEventRowInCoupone=function(t){var n=e(t).parents(".foot-market-border").find("[data-event-treeid]:last");return e(t).filter(":last").attr("data-event-treeid")!=e(n).attr("data-event-treeid")},Markets.createLabels=function(t){var n=e(t).parents(".foot-market").find(".coupone-labels").clone();return e(n).removeClass("coupone-labels").addClass("market_footer"),Markets.restoreHtmlMarkupForTooltips(n),n},Markets.parseEventID=function(e){return e.split("_").shift()},Markets.getVisibleMarkets=function(){var t=[];return e('[id*="'+Markets.MORE_VIEW_PREF+'"]').each(function(e,n){var a=new EventView(n);a&&a.isVisible()&&t.push(a.getTreeID())}),t},Markets.applyView=function(e){var t=new EventView(e);this.isLoading(t)||(t.isVisible()?t.close():t.show())},Markets.openDetailsById=function(t){if(!isNaN(parseInt(t,10))){Markets.ONLY_ONE_EVENT_OPEN_AM&&e('[id*="'+Markets.MORE_VIEW_PREF+'"]').each(function(e,n){var a=new EventView(n);a&&a.isVisible()&&a.getTreeID()!=t&&a.close()});var n=document.getElementById(Markets.MORE_VIEW_PREF+t);if(null!=n){var a=new EventView(n);a.isVisible()||a.show()}}},Markets.cleanOldFooters=function(){e("[data-event-treeid]").filter(function(){var t=e(".details-description",this);return!t.length||""==e.trim(t.html())}).find(".event-delimiter, .market_footer, [data-market-details]").remove()},Markets.showFoot=function(e){a(e,"")},Markets.hideFoot=function(e){a(e,"none")},Markets.getFoot=function(t){return e(t).parents("[data-event-treeid]").find(".market_footer")},Markets.isLoading=function(t){return e(t.oView).hasClass("loading")},Markets.showProcess=function(t){e(t).addClass("loading")},Markets.hideProcess=function(t){e(t).removeClass("loading")},Markets.showModalPopup=function(t,n){(t=e.event.fix(t||window.event)).stopPropagation(),t.preventDefault();var a=t.target,i=e(a.parentNode).find(".score-popup"),r=i.find("IMG.score-popup-info"),o=i.find(".score-popup-content");if(panbetModal(i),n){var s=e("#"+n).html();o.html(s),Markets.applyScoreInfo(r,o)}else o.load(a.href,function(){Markets.applyScoreInfo(r,o)})},Markets.applyScoreInfo=function(t,n){t.css("display","none"),n.css("display","");var a=n.find(".scorecast-player-table").width();n.css("width",a),e(document).trigger("content.loaded")},Markets.closePopup=function(t){var n=e.event.fix(t||window.event);n.preventDefault();var a=e(n.target.parentNode).find(".score-popup-content");e.modal.close(),a.html("")},Markets.onChangeScorecastPlayer=function(e){Markets.hideScorecastPlayersTable(e),$$("scorecast_"+e.options[e.selectedIndex].value).style.display=""},Markets.hideScorecastPlayersTable=function(t){e(t).parent().parent().find(".scorecast-player-table").css("display","none")},Markets.onShortcutMenulinkSelect=function(t,n){e(document).trigger(Markets.MENU_LINK_SELECT_EVENT,[t,n]),n==Markets.SHORTCUTS_ALL&&TrackingEngine.trigger(TrackingEngine.EVENT.EVENT_OPEN_ALL_MARKETS)},Markets.getEventIdFormShortcutId=function(e){var t=e.indexOf(Markets.SHORTCUTS_TYPE);return e.substring(e.indexOf(Markets.SHORTCUTS_ID)+Markets.SHORTCUTS_ID.length,t>0?t:e.length)},Markets.setRowspans=function(t){var n={};e("td[data-id = '"+t+"']").parents("table").find("tr.rows-with-coeffs:visible").each(function(){var a=e(this).attr("data-type");if(!n[a]){var i=e("td[data-id = '"+t+"']").parents("table").find("tr.rows-with-coeffs:visible").filter("[data-type='"+a+"']").size();e(this).find("[data-left-column-name]").attr("rowspan",i),n[a]=a}})},Markets.showPlayersLink=function(t){e("#players-links-"+t).show()},Markets.hidePlayersLinks=function(){e("div[id ^= 'players-links-']").hide()},Markets.hideScorecastSelections=function(t){e("[data-selected-scorecast-code='"+t+"'] div[data-mutable-id]").addClass("scorecast-hidden")},Markets.showScorecastSelection=function(t){e(".scorecast-selections-holder [data-mutable-id='"+t+"']").removeClass("scorecast-hidden")},Markets.refreshMenuBars=function(){e("[data-selection-link='true']").removeClass("price-highlighted"),e("[data-selection-link='true']").has(".price-highlighted").addClass("price-highlighted")},Markets.markerActivePlayerLinks=function(){e(document).on("mouseenter",".players-links a",function(){e(this).addClass("active-scorer")}),e(document).on("mouseleave",".players-links a",function(){e(this).removeClass("active-scorer")}),e(document).on("mouseleave","div[id ^= 'players-links-']",function(){e(this).hide()})},Markets.restoreHtmlMarkupForTooltips=function(t){e(t).find("[data-tooltip-parent]").each(function(){var t=e(this);if(e(t).is("[data-hasqtip]")){t[0].isTooltip=!1;var n,a="#"+e(t).attr("data-aria-describedby")+"-content";n=e(a).children().clone().css("display","none"),e(t).attr("data-hasqtip",null).attr("data-aria-describedby",null),e(n).appendTo(e(t))}})},Markets.getURLState=function(){var t=e.URLCodec.toObject(e.Page.location().search.substr(1))[Markets.OPENED_MARKETS],n=[];if(t)for(var a=0;a<t.length;a++){var i=parseInt(t[a],10);isNaN(i)||-1!=e.inArray(i,n)||n.push(i)}return n},Markets.setURLState=function(t){var n=e.URLCodec.toObject(e.Page.location().search.substr(1));n[Markets.OPENED_MARKETS]=t,e.Page.pushState(null,null,{search:e.URLCodec.fromObject(n)})},Markets.clearURLState=function(){Markets.setURLState()},Markets.addToOpenedIdsInTheUrl=function(t){if(Markets.NEED_PROCESS_OPENED_MARKETS){t=parseInt(t,10);var n=Markets.getURLState();-1==e.inArray(t,n)&&n.push(t),Markets.setURLState(n)}},Markets.removeTreeIdFromOpenedIdsInTheUrl=function(t){if(Markets.NEED_PROCESS_OPENED_MARKETS){t=parseInt(t,10);var n=Markets.getURLState(),a=e.inArray(t,n);-1!=a&&n.splice(a,1),Markets.setURLState(n)}},Markets.eventIsLive=function(e){var t=e.getAttribute("isLive");return t&&"true"==t.toLowerCase()},Markets.isSeparatedButton=function(e){var t=e.getAttribute("isSeparatedButton");return t&&"true"==t.toLowerCase()},Markets.onMembersClick=function(t){var n=e(t).parents("[data-event-treeid]:first").data("eventTreeid"),a={preventDefault:!1,treeId:n};e(document).trigger("markets.members.click",[a]),!a.preventDefault&&e(t).data("hasAdditionalMarkets")&&Markets.applyView(document.getElementById("event-more-view-"+n))},Markets.onEventMoreViewClick=function(t){var n={preventDefault:!1,treeId:new EventView(t).getTreeID()};e(document).trigger("markets.event-more-view.click",[n]),n.preventDefault||Markets.applyView(t)},Markets.showSilks=function(){for(var t=e("IMG.silk"),n=0,a=t.length;n<a;n++){var i=t[n];i.setAttribute("src",i.getAttribute("src_load"))}e(t).load(function(){e(this).show()})},Markets.getDelimiter=function(t){return e(t).parents("[data-event-treeid]").find(".event-delimiter")},Markets.createDelimiter=function(){return e('<div class="coupon-row-item event-delimiter"></div>')},e(document).ready(function(){Markets.markerActivePlayerLinks(),Markets.showSilks()}),e(document).on("mouseover","[data-members]",function(){e("[data-members]",e(this).parents("[data-member-area]")).addClass("text-underline")}),e(document).on("mouseout","[data-members]",function(){e("[data-members]",e(this).parents("[data-member-area]")).removeClass("text-underline")}),e(document).on("click","[data-members]",function(){return Markets.onMembersClick(this),!1}),e(document).on("click","[data-member-link]",function(){return Markets.onMembersClick(e(this).parents("[data-members]")[0]),!1}),e(document).on("click","[data-event-more-view]",function(){return Markets.onEventMoreViewClick(this),!1}),e(document).on("click","[data-header-block-id]",function(){e(this).parent().find("[data-header-block-id]").removeClass("selected"),e(this).addClass("selected"),e(this).parents("[data-event-treeid]").find("[data-market-block-id]").hide(),e("[data-market-block-id="+e(this).data("header-block-id")+"]").show()})}(window.jQuery),function(e){window.SimpleLiveDropDownHelper=function(){function t(t,n){var a=e(t).parents("[data-event-name]").first(),i=!1,r=e(a).find("[data-hidden-views]"),o=e(a).find("[data-visible-views]");e(o).children().size()>0&&e(o).children().each(function(){e(this).data("market-type")!=n&&(i=!0,e(this).detach().appendTo(r))}),(i||0==e(o).children().size())&&e(r).children().each(function(){e(this).data("market-type")==n&&e(this).detach().appendTo(o)})}function n(t,n){e("[data-coupone-type]",n).each(function(){var n=e(this),a=n.data("coupone-type"),i=n.closest("[data-market-block]");a!=t?(n.removeClass("hidden"),i.removeAttr("data-cuopone-duplicated","true")):(1==i.find(".market-inline-block-table-wrapper").length&&(i.addClass("hidden"),i.attr("data-cuopone-duplicated","true")),n.addClass("hidden"))})}return _createDropdownItemState=function(e,t){return{eventId:e,couponMarketType:t}},_saveSelectedDropdownItemState=function(t,n){var a=_createDropdownItemState(t,n);e(document).trigger(Markets.UPDATE_COUPON_MAIN_ROW_EVENT,[a])},_showButtonsMenu=function(t,n){e("[data-coupone-depended-row]",n).hide(),e("[data-coupone-depended-row='"+t+"']",n).size()>0?e("[data-coupone-depended-row='"+t+"']",n).show():e("[data-coupone-depended-row='NONE']",n).size()>0&&e("[data-coupone-depended-row='NONE']",n).show()},_hideSelectedTypeInList=function(t){var n=e("[data-dt] [data-link]",t).data("coupon-market-type");e("[data-ul] [data-li]",t).each(function(){e("[data-link]",this).data("coupon-market-type")==n?e(this).hide():e(this).show()})},{setSimpleLiveBlocksState:n,getSelectedDropDownValue:function(t){return e("[data-dt] [data-link]",t).data("coupon-market-type")},setSelectedDropDownValue:function(a,i){e(a).each(function(){e("[data-dd] [data-link]",a).each(function(){if(e.trim(i)==e(this).data("coupon-market-type")){var r=e(this).clone();e("[data-dt]",a).html(r),e("[data-dd] [data-ul]",a).hide(),n(i,e(this).parents("[data-event-name]")),_showButtonsMenu(i,e(this).parents("[data-event-name]")),t(a,i)}})})},saveSelectedDropdownItemState:_saveSelectedDropdownItemState,setCouponSelectListState:t,showButtonsMenu:_showButtonsMenu,hideSelectedTypeInList:_hideSelectedTypeInList}}(),e(document).on("click","[data-dropdown-coupon] [data-dt] [data-link]",function(){var t=e(this).closest("[data-event-treeid]");if(e("[data-dropdown-coupon] [data-dd] [data-ul]").is(":visible"))e("[data-dropdown-coupon] [data-dd] [data-ul]").hide(),e(document).trigger("successAdditionalMarketsUpdate",[t.data("eventTreeid"),t.data("live")]);else{e(document).trigger("beginAdditionalMarketsUpdate",[t.data("eventTreeid"),t.data("live")]),e("[data-dropdown-coupon] [data-dd] [data-ul]").hide(),SimpleLiveDropDownHelper.hideSelectedTypeInList(e(this).parents("[data-dropdown-coupon]"));var n=e(this).parents("[data-dropdown-coupon]");n.find("[data-dd]").css("max-width",n.parent().width()-1),e("[data-dd] [data-ul]",n).toggle()}}),e(document).on("click","[data-dropdown-coupon] [data-dd] [data-ul] [data-li] [data-link]",function(){var t=e(this),n=t.html(),a=t.data("coupon-market-type"),i=t.closest("[data-dropdown-coupon]"),r=i.find("[data-dt] [data-link]");r.html(n),r.data("coupon-market-type",a),i.find("[data-dd] [data-ul]").hide();var o=i.closest("[data-event-treeid]"),s=o.data("eventTreeid"),c=o.data("live");SimpleLiveDropDownHelper.setSimpleLiveBlocksState(a,o),SimpleLiveDropDownHelper.showButtonsMenu(a,o),SimpleLiveDropDownHelper.saveSelectedDropdownItemState(s,a),SimpleLiveDropDownHelper.setCouponSelectListState(this,a),e(document).trigger("successAdditionalMarketsUpdate",[s,c])}),e(document).on("mouseleave","[data-dropdown-coupon]",function(){var t=e(this).closest("[data-event-treeid]"),n=e(this).find("[data-dd] [data-ul]");n.is(":visible")&&(n.hide(),e(document).trigger("successAdditionalMarketsUpdate",[t.data("eventTreeid"),t.data("live")]))}),e(document).on(Markets.APPLY_COUPON_MAIN_ROW_PREFERENCE_EVENT,function(t,n){if(!_.isUndefined(n)&&_.isArray(n)){var a={};n.forEach(function(e,t,n){_.isUndefined(e.couponMarketType)||(a[""+e.treeId]=e.couponMarketType),!_.isUndefined(e.callback)&&_.isFunction(e.callback)&&e.callback()});var i=_.keys(a);if(i.length){var r=_.map(i,function(e){return"[data-event-treeid ="+e+"] [data-dropdown-coupon]"}).join(", ");e(r).each(function(t,n){var i=""+e(n).parents("[data-event-treeid]:first").data("eventTreeid"),r=a[i];SimpleLiveDropDownHelper.setSelectedDropDownValue(e(n),r);var o=SimpleLiveDropDownHelper.getSelectedDropDownValue(e(n));r!=o&&SimpleLiveDropDownHelper.saveSelectedDropdownItemState(i,o)})}}})}(window.jQuery),Panbet={},Panbet.EXCLUDE_FORM=["auth","login_form","ticket_form","accountLimitsForm","global_countries_form","consent_withdrawal_form","changeEmailForm"],Panbet.BONUS_MARK="bonusMark",IS_MARATHON_CLIENT=!1,this.replacePage=function(){$.modal.close(),clearTimeout(Panbet.replaceTimeout),window.location.href=initData.home_http_url},$(document).ready(function(){initAgreeTermsDialog(),$("#nickname_suggestion").addModalToViewQueue()}),$(document).ready(function(){if(/(android)/i.test(navigator.userAgent)&&window.overthrow&&"none"===window.overthrow.support){var e=$("#header_container").css("z-index")-5||65;$(".grid-leftbar").niceScroll({cursoropacitymin:1,cursorcolor:"#c2c2c2",cursorwidth:"8px",background:"#f7f7f7",zindex:e}),$(".grid-main").niceScroll({cursoropacitymin:1,cursorcolor:"#c2c2c2",cursorwidth:"8px",background:"#f7f7f7",zindex:e})}}),$(document).ready(function(){$("body").css("touch-action","auto"),$(".grid-leftbar").css("touch-action","auto"),$(".grid-main").css("touch-action","auto")}),$(document).ready(function(){var e=$(".js-scroll-to-top",".js-top-panel");e.length&&$(".grid-main").PanbetScrollToTop({triggerAppendTo:e})}),function(e){var t=window.navigator.userAgent,n=t.indexOf("Edge")>0||t.indexOf("MSIE ")>0||!!t.match(/Trident.*rv\:11\./),a=t.match(/i(Phone|Pod|Pad)/i);n||a?e(document).ready(function(){e("[data-prevent-autocomplete]").each(function(){e(this).attr("readonly",!1)})}):(e(document).on("focus","[data-prevent-autocomplete]",function(){e(this).attr("readonly",!1)}),e(document).on("blur","[data-prevent-autocomplete]",function(){e(this).attr("readonly",!0)}),e(document).on("focus","input[type=password][autocomplete=off]",function(){e("input[type=text][data-prevent-autocomplete!=true], input[type=tel]",this.form).attr("readonly",!0)}),e(document).on("blur","input[type=password][autocomplete=off]",function(){e("input[type=text][data-prevent-autocomplete!=true], input[type=tel]",this.form).attr("readonly",!1)})),e(document).on("cut copy paste","[data-prevent-copy-paste]",function(e){e.preventDefault()})}(jQuery),Panbet.reloadCaptcha=function(e,t){var n=initData.base_dir+"/captcha.htm?"+(new Date).getTime();e[0].src=n,t.focus(),TrackingEngine.trigger(TrackingEngine.EVENT.CAPTCHA_VIEW)},$(document).on("click","[data-captcha-refresh-button]",function(){var e=$(this).data("captchaRefreshButton");Panbet.reloadCaptcha($(e+"_img"),$(e))}),$(document).ready(function(){$("[data-captcha-refresh-button]").each(function(){TrackingEngine.trigger(TrackingEngine.EVENT.CAPTCHA_VIEW)}),startAirbrakeClient()}),$(document).on("click","[data-notification-message-close]",function(){$("#js_topbar_notification_message").addClass("hidden"),checkView();var e=$(this).data("notificationMessage");$.ajax({url:initData.base_dir+"/hideNotificationMessage.htm",data:{messageId:e},type:"POST"})}),AuthHelper={},AuthHelper.onLogin=function(e){var t=function(e){var t=$(e),n=t.attr("regex");return new RegExp(n).test(t.val())},n=function(e,t){var n=$(e).attr("regex");return showMessage("any_message",t.regex(n,e)),window.event&&(window.event.returnValue=!1),!1},a=e.login;if(!t(a))return n(a,PanbetBaseMessages.login);var i=e.login_password;if(window.initData.isClientSidePasswordValidationEnable&&!t(i))return n(i,PanbetBaseMessages.login_password);var r=e.captcha;return!(!r.disabled&&!t(r))||n(r,PanbetBaseMessages.captcha)},AuthHelper.logout=function(e){var t=e||window.event;return t&&t.preventDefault&&t.preventDefault(),t&&(t.returnValue=!1),BetslipStorageFacade.controller.clearCouponStateStorage(),$.ajax({url:$.Page.location().href,data:{logout:!0,isLogoutByTimeout:void 0===e},type:"POST",dataType:"json"}).done(function(e){initData.isLogged=!1,TrackingEngine.trigger(TrackingEngine.EVENT.LOGOUT),e.redirect?$.Page.location().href=e.url:window.location.reload()}),!1},LoginView=Class.extend({init:function(e){this._controller=e,this._formEl=$("#auth"),$("input[name=login]",this._formEl).defaultValue(),$("input[name=login_password]",this._formEl).defaultValue(),initData.isRussia&&!initData.isLoginAndRegistrationOnRussiaEnabled&&$("#auth_login_password").next("[type=text]").attr("disabled","disabled"),this.initInputs(),this.initHandlers(),this._controller.setView(this)},initInputs:function(){this._captchaImgEl=$("img",this._formEl),this._captchaEl=$("input[name=captcha]",this._formEl),this._reloadBtnEl=$("button.btn-reload",this._formEl),this._captchaEl.prop("disabled","disabled"),this._captchaEl.defaultValue()},initHandlers:function(){var e=this;this._formEl.on("submit",function(t){e._onFormSubmit(t)}),this._reloadBtnEl.on("click",function(t){e.reloadCaptcha(t)})},showCaptcha:function(){this._captchaEl.removeProp("disabled"),this.reloadCaptcha(),$(".login-pass",this._formEl).hide(),$(".captcha",this._formEl).show(),this._captchaEl.focus()},hideCaptcha:function(){$(".login-pass",this._formEl).show(),$(".captcha",this._formEl).hide(),this._captchaEl.val(""),this._captchaEl.prop("disabled","disabled"),$("input[name=login]",this._formEl).focus()},showError:function(e){$.modal.close(),showMessage("any_message",e)},isFormValid:function(){var e=this._formEl.get(0);return AuthHelper.onLogin(e)},getLoginUrl:function(){return this._formEl.attr("action")},_onFormSubmit:function(e){if(e.preventDefault(),this.isFormValid()){var t=this._formEl.serializeArray();t.push({name:"loginUrl",value:this._formEl.attr("action")}),initData.productName&&t.push({name:"source",value:initData.productName}),this._controller.login(t)}},reloadCaptcha:function(){Panbet.reloadCaptcha(this._captchaImgEl,this._captchaEl)}}),PopupLoginView=LoginView.extend({init:function(e){this._controller=e,this._formEl=$("#login_form"),this.initInputs(),this.initHandlers(),this._controller.setView(this)},isFormValid:function(){return panbetValidate(this._formEl),this._formEl.valid()}}),LoginController=function(e){var t=!1;this.login=function(e){if(!t){t=!0;var n=this;$.ajax({url:this._getLoginUrl(),type:"POST",data:e,dataType:"json",success:function(t){n._onSuccess(e,t)},error:n._onError})}},this.setView=function(e){this._view=e},this._getLoginUrl=function(){return this._view.getLoginUrl()},this._onSuccess=function(n,a){t=!1,TrackingEngine.processServeSideTrackingEvents();var i=a.loginResult.toUpperCase()||null;if("SUCCESS"===i)return"function"==typeof e?void e():void window.location.reload();if("FAIL"===i)return this._view.hideCaptcha(),void this._view.showError(a.message);if("REDIRECT"!==i){if("CAPTCHA_EXPECTED"!==i)return"CAPTCHA_FAILED"===i?(this._view.reloadCaptcha(),void this._view.showError(a.message)):void 0;this._view.showCaptcha()}else{var r=a.redirectData;r&&r.url&&r.method&&createFormAndRedirect(r.url,r.method,convertJsonToArrayOfPairsNameValue(r.params||[]))}},this._onError=function(){t=!1},window.console&&(window.console.error?this._onError=function(e,n,a){t=!1,window.console.error("Error",n,a)}:window.console.log&&(this._onError=function(e,n,a){t=!1,window.console.log("Error",n,a)}))},$(document).ready(function(){updateOnlineChatVisibility()}),function(e){window.BaseUpdateHelper=function(){function t(e,t){return panbet.PreferencesApplier.apply(e,t)}function n(){var t=[];return e("[data-favorites-selector]",b()).each(function(){var n=FavoritesSelector.getState(this);n!=FavoritesSelector.UNCHECKED&&(t[e(this).data("favoritesSelector")]=n)}),t}function a(t){var n=e(t),a=I[I.length-1];return a&&(a=a.myFavorites,e("[data-favorites-selector]",n).each(function(t,n){var i=e(n).data("favoritesSelector"),r=a[i];r&&FavoritesSelector.setState(n,r)})),n}function r(e,t,n){return PriceHighlighter.highlightPrice({html:e,currentDomEl:t,inMainRow:n})}function o(){if(void 0!==window.ScorecastManager)return window.ScorecastManager.save()}function s(e){void 0!==window.ScorecastManager&&window.ScorecastManager.restore(e)}function c(t){for(var n=0;n<t.length;n++)e("#"+t[n]).find("a").click()}function l(){var t=[];return e(".mb-silk").not(":has(a)").each(function(){t.push(e(this).attr("id"))}),t}function u(){return e("#container_POPULAR_EVENTS",b())}function d(){return e("#container_EVENTS",b())}function h(){S=null,b=C}function p(n,i,o){if(!n.length)return!1;for(var s in i){var c=i[s],l=e('[data-mutable-id="'+c.id+'"]',n);if(!l.length)return!1;e(l).each(function(){"CHANGE"==c.op||"NEW"==c.op?e(this).replaceWith(t(a(r(c.html,this,!!c.mr)),o)):e(this).remove()})}return!0}function f(e,t){var n,a;do{n=e.shift(),a=T[n.type]}while(e.length&&!a);a||setTimeout(function(){t(!0)},0),setTimeout(function(){var i=!0;try{i=a(n)}catch(e){Log.error(e)}finally{!0===i&&e.length?f(e,t):setTimeout(function(){t(i)},0)}},0)}function _(e,t){(e=e||[]).length?(h(),f(e.slice(),t)):t(!0)}function g(e){return function(t){return FullCategoryLinks.updateState(t.treeId,e(),t.filteredCategory?FullCategoryLinks.STATE.SHOW_FULL_CATEGORY:FullCategoryLinks.STATE.HIDE,function(e){return e!=FullCategoryLinks.STATE.SHOW_SELECTED_EVENTS}),!0}}function E(n){return function(i){var o=e('[data-category-treeId="'+i.treeId+'"]',n());return o.length&&o.replaceWith(t(a(r(i.html,o)))),!!o.length}}function m(n){return function(i){var o=e('[data-sport-treeid="'+i.sportId+'"]',n());return o.length&&o.replaceWith(t(a(r(i.html,o)))),!!o.length}}function v(t){return e(document).trigger("liveUpdate.onModification",t),!0}function A(t){if(window.FullCategoryManager){var n=FullCategoryManager.getFullCategoriesIds();if(n.length){var a=/\/([\d,]+)\/?$/.exec(t);if(a&&a[1]){var i=a[1].split(",");return e(n).each(function(t,n){e(LiveViewHelper.getCategoriesEventTreeIds(n)).each(function(e,t){var n=i.indexOf(""+t);-1!=n&&delete i[n]})}),t.slice(0,a.index)+(i.length?"/"+i.join(","):"")}}}return t}var T={event:function(n){var i=e("[data-event-treeId="+n.treeId+"]",b());if(!i.length)return!1;if(i.html(t(a(r(n.html,i)),n.treeId)),"SIMPLE"!=initData.siteStyle&&i.find(".details-description").size()&&Markets.isNotLastEventRowInCoupone(i)){var o=Markets.createLabels(i);o.attr("data-event-header",n.treeId),i.append(o)}return!0},popularSport:m(u),popularCategory:E(u),popularCategoryEventsLink:g(d),sport:m(d),category:E(d),categoryEventsLink:g(d),categoryBlurb:function(t){return e("[data-category-treeId='"+t.treeId+"'] .category-blurb",b()).html(t.html),!0},mutableUpdates:function(t){return p(e("[data-event-treeId="+t.eventId+"]",b()),t.updates,t.eventId)},refreshPage:function(t){return function(){e(document).trigger("content.needReload",[{refreshPageUpdate:!0}])}},eventMenuItem:v,addedEventMenuItem:v},S=null,b=function(){return S||(S=e("[data-live-events-container]"),b=function(){return S}),S},C=b,I=[];return{UPDATE_REQUEST_TIMEOUT:18e4,currentAjaxReq:null,abortCurrentAjaxReq:function(){null!=this.currentAjaxReq&&this.currentAjaxReq.abort()},pushState:function(){I.push({myFavorites:n(),openMatchBettingsSilks:l(),scorecastState:o()})},popState:function(){if(0!=I.length){var e=I.pop();c(e.openMatchBettingsSilks),s(e.scorecastState)}},needProcessing:function(e){return!!e},needUpdate:function(e){return e&&(e.modified||e.removed||e.removedPopular)},setContent:function(t,n){var a=this;_(t.modified,function(i){if(!0!==i)return e.isFunction(i)?i():e(document).trigger("content.needReload",[{liveupdatesFailedProcessing:!0}]),void h();t.removed&&(LiveViewHelper.remove(t.removed),e(document).trigger("liveUpdate.removedIds",[t.removed])),t.removedPopular&&(LiveViewHelper.removePopular(t.removedPopular),e(document).trigger("liveUpdate.removedPopular",[t.removedPopular])),a.popState(),Markets.cleanOldFooters(),e(document).trigger("content.loaded",[t]),h(),n()})},getFullUrl:function(){var t=e.Page.location(),n=initData.liveUpdateDomain||t.host,a=initData.liveUpdatePath;return-1!=a.indexOf("liveupdate/favorites")&&(a+=initData.favorites.join(",")),t.protocol+"//"+n+A(a)+t.search},successResult:function(e){if(this.needProcessing(e))if(e&&e.updated&&(window.initData.updated=e.updated),this.needUpdate(e)){this.pushState();var t=this;this.setContent(e,function(){t.subscribe()})}else this.subscribe();else this.subscribe()},errorResult:function(e){102!=e&&this.subscribe()},sendRequest:function(){var t=this;if(initData.stopLiveUpdate)return t.currentAjaxReq=null,void this.subscribe();var n=Collapsible.getCollapsibleState(),a=Collapsible.getPopularCollapsibleState(),i=n.expandedSports.concat(n.expandedCategories),r=a.expandedSports.concat(a.expandedCategories);this.currentAjaxReq=e.ajax({type:"POST",url:t.getFullUrl(),dataType:initData.liveUpdateTransport||"JSON",data:{markets:Markets.getVisibleMarkets().toString(),expandedIds:i.toString(),expandedPopularIds:r.toString(),updated:window.initData.updated||0,oddsType:window.initData.oddsType,siteStyle:window.initData.siteStyle,region:window.initData.region},timeout:t.UPDATE_REQUEST_TIMEOUT,success:function(e){t.currentAjaxReq=null,t.successResult(e)},error:function(e){t.currentAjaxReq=null;try{t.errorResult(e.status)}catch(e){t.errorResult(500)}}})},extend:function(e){for(i in e)this[i]=e[i];return this},Init:function(){}}}}(jQuery),function(e){function t(t,n,a){void 0==a?(e("[data-selection-price][data-selection-key]:not([data-market-details] [data-selection-price][data-selection-key])",t).each(function(e,t){n(!0,t)}),e("[data-market-details] [data-selection-price][data-selection-key]",t).each(function(e,t){n(!1,t)})):e("[data-selection-price][data-selection-key]",t).each(function(e,t){n(a,t)})}function n(n,a,i){if(!r)return n;var s={mainRow:{},additionMarkets:{}};return t(a,function(t,n){s[t?"mainRow":"additionMarkets"][e(n).data("selection-key")]=n},i),t(n,function(t,n){var a=e(n).data("selection-key"),i=s[t?"mainRow":"additionMarkets"][a];if(i){var r=parseFloat(e(i).data("selection-price")),c=parseFloat(e(n).data("selection-price")),u=a+"_"+t,d=o[u];d||(d=l(a,function(){delete o[u]}),o[u]=d),d(n,r,c)}},i),n}function a(t){t&&(initData.isLogged?e.ajax({type:"post",url:initData.changeLiveTrendsVisualizationURL,dataType:"json",data:{pricestyle:t},timeout:18e4,success:function(t){t&&t.pricestyle&&(i(t.pricestyle),e(document).trigger("visualization.updated",[t.pricestyle]))}}):(i(t),e(document).trigger("visualization.updated",[t])))}function i(t){e.cookie(initData.trendVisualizationCookieName,t,{expires:365,path:"/",secure:!1}),e("[data-visualization-type-selected=true]").removeClass("select-item").attr("data-visualization-type-selected",!1),e("span:first",e("[data-visualization-type="+t+"]")).addClass("select-item").attr("data-visualization-type-selected",!0),r="ARROW"==t?c:"TEXT_COLOR"==t?s:void 0}var r,o={},s={showUp:function(t){e(t).closest("[data-coeff-uuid]").addClass("lt-text-color price-up")},showDown:function(t){e(t).closest("[data-coeff-uuid]").addClass("lt-text-color price-down")},clear:function(t){e(t).closest("[data-coeff-uuid]").removeClass("lt-text-color price-down price-up")}},c={showUp:function(t){e(t).closest("[data-coeff-uuid]").addClass("lt-arrow price-up")},showDown:function(t){e(t).closest("[data-coeff-uuid]").addClass("lt-arrow price-down")},clear:function(t){e(t).closest("[data-coeff-uuid]").removeClass("lt-arrow price-down price-up")}},l=function(t,n){function a(){c=setTimeout(function(){s(),n()},initData.liveTrendsVisualization.visibleTime)}function i(e){r&&r.showUp(e)}function o(e){r&&r.showDown(e)}function s(n){l=0,clearTimeout(c),r&&e('[data-selection-key="'+t+'"]',n).each(function(e,t){r.clear(t)})}var c,l=0;return function(e,t,n){n!==t?(s(e),n>t?(l=1,i(e)):(l=-1,o(e)),a()):0!=l&&(l>0?i(e):o(e))}};window.PriceHighlighter={highlightPrice:function(t){var a="";return n(e(t.html),t.currentDomEl,t.inMainRow).each(function(){var t=e(this).prop("outerHTML");t&&(a+=t)}),a}},e(document).on("visualization.update",function(e,t){a(t)}),e(document).ready(function(){initData.liveTrendsVisualization&&i(initData.liveTrendsVisualization.style)})}(jQuery),function(e){e(document).on("focus","[data-page-navigator] input[type=text]",function(){var t=e(this).data("pageUrl"),n=e(this).data("totalPages"),a=function(e,t){var n=String.fromCharCode(t>=96&&t<=105?t-48:t),a=e.ctrlKey||e.shiftKey||e.altKey||e.metaKey;return!(!/[\d]|[\x00-\x1F\x7F\x2E\x25\x27]/.test(n)||/[\d]/.test(n)&&a)||(e.returnValue=!1,e.preventDefault&&e.preventDefault(),!1)};this.onkeydown=function(i){var r=(i=i||window.event).keyCode||i.which;if(13!=r||isNaN(e(this).val())||""==e.trim(e(this).val()))return a(i,r);var o=parseInt(e(this).val(),10);o>0&&o<=n&&e("<a data-pager-link href='"+t.replace("%{0}",o)+"' style='display:none'></a>").insertAfter(this).click()},this.onchange=this.onkeyup=function(){var t=parseInt(e(this).val(),10);/[\d]+/.test(e(this).val())&&0<t&&n>=t?e(this).removeClass("error"):e(this).addClass("error")},this.onfocus=function(){e(this).val("").hasClass("error")&&e(this).removeClass("error")}})}(jQuery),function(e){function t(e){return e.length>0&&0!=e.indexOf("?")?"?"+e:e}function n(e){return void 0!=e&&"/"!=e[0]?"/"+e:e}var a=function(t){return e.isArray(t)?t.join(","):t},i=function(t){return"string"===e.type(t)?t.split(","):[]};e.extend({URLCodec:{toObject:function(t){var n,a={};if(!t||""==e.trim(t))return a;var r=e.trim(t);if(0==r.length)return a;r=r.split("&");for(var o in r)r.hasOwnProperty(o)&&(void 0===(n=r[o].split("="))[1]?a.default=n[0]:a[n[0]]=i(n[1]));return a},fromObject:function(t){var n=[];for(var i in t)if(t.hasOwnProperty(i)){var r="default"!=i?i+"=":"",o=e.trim(a(t[i]));o&&""!=o&&n.push(r+o)}return n.join("&")},parse:function(e){var t=document.createElement("a");t.href=e;var a=this;return{hash:t.hash,host:t.host,hostname:t.hostname,href:t.href,origin:t.origin,pathname:n(t.pathname),port:t.port,protocol:t.protocol,search:t.search,getParams:function(){return a.toObject(this.search.replace(/^\?/,""))},hashParams:function(){return a.toObject(this.hash.replace(/^#/,""))},pathSegments:function(){return this.pathname.replace(/^\//,"").split("/")}}},updateURL:function(e,n){"string"==typeof e&&(e=this.parse(e));for(var a in n)void 0!=e[a]&&(e[a]=n[a]);return e.host=e.hostname+(e.port?":"+e.port:""),e.search=t(e.search),e.href=e.protocol+"//"+e.host+e.pathname+e.search+("#"===e.hash?"":e.hash||""),e},updateSearchParams:function(e,n){return"string"==typeof e&&(e=this.parse(e)),n&&(e.search=t(this.fromObject(n(this.toObject(e.search.replace(/^\?/,"")))))),e.href=e.protocol+"//"+e.host+e.pathname+e.search+("#"===e.hash?"":e.hash||""),e}}})}(jQuery),function(e){var t={pagechange:[],hashchange:[]},n=new RegExp("#.*"),a=function(t,n,a){return a=e.extend(!0,{},a||{},{url:t,data:{pageAction:n||"default"}}),c&&!a.allowParallelRequests&&c.abort(),c=e.ajax(a).always(function(){c=null})},i=function(t,n,i,r){var o=e.Deferred(),s=e.Callbacks("once");return a.call(this,t,n,i).done(function(){s.fire.apply(s,arguments),r&&r.fire.apply(r,arguments),o.resolve.apply(this,arguments)}).fail(function(){o.reject.apply(this,arguments)}),e.extend({},o.promise(),{updateContent:s.add,abort:function(){c&&c.abort()}})},r=function(t,n,a){return i.call(this,t,n,a,e.Callbacks("once").add(function(){u&&l!=t&&(l=t,history.pushState(null,null,t))}))},o=function(){return history&&history.location||location},s=function(e){for(var t=o.call(this),n=["hash","hostname","pathname","port","protocol","search"],a=0;a<n.length;a++){var i=n[a];void 0===e[i]&&(e[i]=t[i])}return e.host=e.hostname+(e.port?":"+e.port:""),e.search=e.search.length>0&&0!=e.search.indexOf("?")?"?"+e.search:e.search,e.href=e.protocol+"//"+e.host+e.pathname+e.search+("#"===e.hash?"":e.hash||""),e};e.extend({Page:{location:function(){if(0==arguments.length)return o.call(this);var t=arguments[0];return"object"===e.type(t)&&(t=s.call(this,t).href),r.call(this,e.trim(t),arguments[1],arguments[2])},getHref:function(){return 1==arguments.length&&"object"===e.type(arguments[0])?s.call(this,arguments[0]).href:o.call(this).href},reload:function(e,t){return i.call(this,this.location().href,e,t)},on:function(n,a){if("function"!==e.type(a))throw new Error("Listener must be function.");if(!((n=n.toLowerCase())in t))throw new Error('Event "'+n+'" not find.');t[n].push(a)},off:function(n,a){if((n=n.toLowerCase())in t){var i=e.inArray(a,t[n]);-1!=i&&t[n].splice(i,1)}},pushState:function(t,n,a){"object"===e.type(a)&&(a=s.call(this,a).href),history.pushState(t,n,a),l=a},replaceState:function(t,n,a){"object"===e.type(a)&&(a=s.call(this,a).href),history.replaceState(t,n,a),l=a},startAutoPushHistory:function(){u=!0},stopAutoPushHistory:function(){u=!1}}});var c,l=e.Page.location().href,u=!0,d=function(){for(var n=0;n<t.pagechange.length;n+=1)t.pagechange[n](e.Page.location().href,l)};e(window).on("popstate",function(){var t=e.Page.location().href;t.replace(n,"")!=l.replace(n,"")&&d(),l=t}),e(window).on("hashchange",function(e){for(var n=0;n<t.hashchange.length;n+=1)t.hashchange[n](e.originalEvent.newURL,e.originalEvent.oldURL)}),e(document).ready(function(){history.emulate&&location.href.replace(n,"")!=e.Page.location().href.replace(n,"")&&d()})}(jQuery),function(e){function t(t){if(""===(t=e.trim(t)))return!1;var n=e.Page.location().href.replace(/#.*/,"");return 0==t.indexOf(n)&&""===(t=t.substr(n.length))||!a.test(t)}function n(e){for(var t=0;t<i.length;t++)if(i[t].regex.source===e.source)return t;return-1}var a=/^(javascript:|#)/i,i=[];e.extend({Links:{click:function(t,a){if("regexp"!==e.type(t)||"function"!==e.type(a))throw new Error("Wrong method arguments. First must be regex, second - function.");var r=n(t),o=null;-1!=r?o=i[r]:(o={regex:t,listeners:[]},i.push(o)),o.listeners.push(a)},offClick:function(t,a){var r=n(t),o=null;if(-1!=r){o=i[r];var s=e.inArray(a,o.listeners);-1!=s&&o.listeners.splice(s,1),0==o.listeners.length&&i.splice(r,1)}}}}),e(document).on("click","a",function(){var e=!0;if(0!=i.length&&"A"===this.tagName&&this.href&&t(this.href))for(var n=0;n<i.length;n++)if(i[n].regex.test(this.href))for(var a=i[n].listeners,r=0;r<a.length;r++)!1===a[r].call(this,this)&&(e=!1);return e})}(jQuery),window.DomainHelper=function(){function e(e){$.ajax({url:initData.base_dir+"/myaccount/authToken.htm",type:"POST",dataType:"json",success:function(n){n&&n.authToken&&$.URLCodec.updateSearchParams(t,function(e){return e.token=n.authToken,e}),e.success&&e.success()},complete:e.always})}var t;return{showPersonalDomainPopup:function(e,t){window.setTimeout(function(){showMessageInQueue(e,t,{onShow:function(){DomainHelper.setDomainCookie(window.initData.pt)}})},600)},showPopupWithActiveAuthToken:function(){var n=$("#personal_domain"),a=n.find("a");0!=a.length?(t=$.URLCodec.parse(a.attr("href")),e({success:function(){a.attr("href",t.href)},always:function(){panbetModal(n)}})):panbetModal(n)},addAuthTokenAndFollowLink:function(n){t=$.URLCodec.parse(n),e({always:function(){window.location=t.href}})},setDomainCookie:function(e){var t=$.cookie("domainPopupShowed");if(!t||-1==t.indexOf(e)){var n=t?t+"|"+e:e;$.cookie("domainPopupShowed",n,{expires:15330,path:"/"})}}}}(),$(document).on("click",".js-phone-prefix-widget .js-prefix-placeholder",function(e){e.stopPropagation();var t=$(this).siblings(".js-dropdown").first();t.length&&(void 0===t.data("isMenuOpen")?(t.data("isMenuOpen",!0),t.css("display","block"),$(document).on("click","body",function(){t.data("isMenuOpen")&&(t.data("isMenuOpen",!1),t.css("display","none"))}),$(document).on("click",".js-phone-prefix-widget .js-dropdown li",function(){var e=$(this).data("country"),t=$(this).data("prefix"),n=$(this).parents(".js-phone-prefix-widget");if(n.length){var a=$(".js-prefix-placeholder .flag",n),i=$(".js-prefix-placeholder .prefix-code",n),r=$('input[type="hidden"]',n);a.length&&i.length&&r.length&&(a.removeClass().addClass("flag flag-"+e),i.html("+"+t),r.val(t));var o=$(n).parents("form").find("input:visible");o.length&&o.first().focus()}})):t.data("isMenuOpen")?(t.data("isMenuOpen",!1),t.css("display","none")):(t.data("isMenuOpen",!0),t.css("display","block")))}),function(e){e.extend({blink:{run:function(t,n,a){return setInterval(function(){e(t).toggleClass(a)},n)}}}),e(document).ready(function(){e("[data-blink]").each(function(){e.blink.run(this,e(this).data("blink"),"blink")})})}(jQuery),function(e,t){var n=e.document,a=n.documentElement,i="ontouchmove"in n,r="WebkitOverflowScrolling"in a.style||"msOverflowStyle"in a.style||!i&&e.screen.width>800||function(){var t=e.navigator.userAgent,n=t.match(/AppleWebKit\/([0-9]+)/),a=n&&n[1],i=n&&a>=534;return t.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&i||t.match(/ Version\/([0-9]+)/)&&RegExp.$1>=0&&e.blackberry&&i||t.indexOf("PlayBook")>-1&&i&&-1===!t.indexOf("Android 2")||t.match(/Firefox\/([0-9]+)/)&&RegExp.$1>=4||t.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&i||t.match(/NokiaBrowser\/([0-9\.]+)/)&&7.3===parseFloat(RegExp.$1)&&n&&a>=533}();e.overthrow={},e.overthrow.enabledClassName="overthrow-enabled",e.overthrow.addClass=function(){-1===a.className.indexOf(e.overthrow.enabledClassName)&&(a.className+=" "+e.overthrow.enabledClassName)},e.overthrow.removeClass=function(){a.className=a.className.replace(e.overthrow.enabledClassName,"")},e.overthrow.set=function(){r&&e.overthrow.addClass()},e.overthrow.canBeFilledWithPoly=i,e.overthrow.forget=function(){e.overthrow.removeClass()},e.overthrow.support=r?"native":"none"}(this),function(e){e(document).ready(function(){e("[data-various-access-click]").click(function(){closeTopbar("#js_topbar_various_access","TopbarVariousAccessClosed",15330)}),e("[data-blocked-site-click]").click(function(){closeTopbar("#js_topbar_blocked_site","TopbarBlockedSiteClosed",15330)}),e("[data-unavailability-announce-click]").click(function(){closeTopbar("#js_topbar_unavailability_announce","TopbarUnavailabilitySpainAnnounceClosed",2)}),e("[data-message-denominationBYR-click]").click(function(){closeTopbar("#js_topbar_message_denominationBYR","MessageDenominationBYR",15330)})})}(window.jQuery),function(e){window.FavoritesSelector={CHECKED:{toString:function(){return this.valueOf()},valueOf:function(){return"CHECKED"},css:"checked"},UNCHECKED:{toString:function(){return this.valueOf()},valueOf:function(){return"UNCHECKED"},css:"unchecked"},HALF:{toString:function(){return this.valueOf()},valueOf:function(){return"HALF"},css:"half-checked"},setState:function(t,n){e(t).filter(function(){return e(this).data("favoritesState")!=n}).removeClass(this.CHECKED.css+" "+this.UNCHECKED.css+" "+this.HALF.css).addClass(this[n].css).data("favoritesState",n).trigger("modechange",[n])},getState:function(t){var n=e(t);if(n.size()>0)return this[e(n.get(0)).data("favoritesState")]}}}(jQuery),function(e){window.LiveViewHelper=function(){function t(t){return function(n,a){return e(n).filter(function(){return!t(this,a)}).toArray()}}function n(t,n){var a=t.length?t:e('[data-sport-treeid="'+t+'"]',n),i=!!a.length;return a.remove(),i}function a(t,a){var i=t.hasClass?t:e('[data-category-treeid="'+t+'"]',a),r=!!i.length;return i.each(function(){var a=e(this),i=a.closest("[data-sport-treeid]");a.next(".link-top").remove(),a.remove(),i.length&&!e("[data-category-treeid]",i).length&&n(i),e(document).trigger("view-changed",["remove.category",t])}),r}function i(t,n){e.each(t,function(t,i){var r=e('[data-event-treeid="'+i+'"]',n);e.each(r,function(){var t=e(this);t.prev().find("[data-event-header]").remove();var n=t.closest("[data-category-treeid]"),i=t.closest(".foot-market-border");t.remove(),i.each(function(){var t=e(this);t.find("[data-event-treeid]").length||t.remove()}),n.length&&!n.find("[data-event-treeid]").length&&a(n)})})}function r(e,t){var n=document;"selected"==t?n="#container_EVENTS":e=o(e||[],n),i(e=s(e||[],n),n)}var o=t(n),s=t(a);return{remove:function(e){r(e,"all")},removePopular:function(e){r(e,"selected")},getCategoriesEventTreeIds:function(t){e.isArray(t)||(t=[t]);var n=t.map(function(e){return'[data-category-treeid="'+e+'"] [data-event-treeid]'}).join(",");return e(n).map(function(){return e(this).data("eventTreeid")}).toArray()},getCategoryTreeIds:function(t){return e.isArray(t)||(t=[t]),t.map(function(t){return e('[data-category-treeid="'+t+'"]').data("categoryTreeid")||e('[data-event-treeid="'+t+'"]').parents("[data-category-treeid]:first").data("categoryTreeid")})}}}()}(jQuery),function(e){function t(e){return e&&n(e)}function n(t){return e.inArray(t,TrackingEngine.EVENTS_ARRAY)>-1}function a(e){return r+e.toLowerCase()}function i(){return initData.isTestMode}var r="TrackingEngine.";window.TR_COOKIE="trevnt";var o={VISIT_PAGE:"visit",LOGIN:"login",LOGOUT:"logout",JOIN:"join",DEPOSIT:"deposit",BET_PLACED:"betPlaced",BET_ABORTED:"betAborted",TOTO_BET_PLACED:"totoBetPlaced",TOTO_BATCH_BET_PLACED:"totoBatchBetPlaced",VISIT_TOTO_STATISTIC_PAGE:"totoStatisticsVisit",BANNER_CLICKED:"bannerClicked",JOIN_PAGE_VISIT:"joinPageVisit",REGISTRATION:"registration",CAPTCHA_VIEW:"captchaView",CAPTCHA_SUCCESS:"captchaSuccess",THREE_DS_MSG_ACCEPTED:"threeDsMessageAccepted",THREE_DS_MSG_CLOSED:"threeDsMessageClosed",LIVE_ANIMATION:"liveAnimation",LIVE_STATISTIC:"liveStatistic",LOYALTY_MESSAGE_SHOWED:"loyaltyMessageShowed",LOYALTY_MESSAGE_CLOSED:"loyaltyMessageClosed",LOYALTY_BUY:"loyaltyBuy",LOYALTY_UP_LEVEL:"loyaltyUpLevel",LOYALTY_SHOW_CATALOG:"loyaltyShowCatalog",OPEN_EVENT_NAME_SEPARATELY:"openEventNameSeparately",OPEN_ADDITIONAL_MARKETS_SEPARATELY:"openAdditionalMarketsSeparately",EVENT_OPEN_ALL_MARKETS:"eventOpenAllMarkets",INCORRECT_LOGIN_OR_PASSWORD:"incorrectLoginOrPassword",MARKET_CHOICE_CLICKED:"marketChoiceClicked",BETSLIP_REMOVE_CHOICE_CLICKED:"betslipRemoveChoiceClicked",BETSLIP_REMOVE_ALL_CHOICES_CLICKED:"betslipRemoveAllChoicesClicked",BETSLIP_CHOICE_ADDED:"betslipChoiceAdded",BETSLIP_CHOICE_REMOVED:"betslipChoiceRemoved",BETSLIP_ALL_CHOICES_REMOVED:"betslipAllChoicesRemoved"},s=["PAN-31313"],c=Log.getLogger("TE.logger");window.TrackingEngine={EVENT:o,EVENTS_ARRAY:e.map(o,function(e,t){return[e]}),previousEvents:[],on:function(n,i){if(t(n)&&i){var r=a(n);c.debug("TrackingEngine.subscribing callback on event "+r+": "+i.toString());var o=function(){try{i.apply(this,arguments)}catch(e){c.error("TrackingEngine callback invocation error on event: "+r+", callback: "+i.toString()+"\n Error: "+e.message)}};TrackingEngine.previousEvents.length>0&&e(TrackingEngine.previousEvents).each(function(){r==this.event&&o(this.params)}),e(document).bind(r,o)}else c.warn("TrackingEngine invalid subscribing parameters. Event: "+n+", callback: "+i)},trigger:function(n,r){if(t(n)){var o=a(n);if(c.debug("TrackingEngine.triggering event "+o+(r?", parameters: "+r:"")),i())return;TrackingEngine.previousEvents.push({event:o,params:r}),e(document).trigger(o,r)}else c.warn("TrackingEngine invalid event "+n+" not triggered.")},processServeSideTrackingEvents:function(){var t=e.cookie(window.TR_COOKIE);if(t){c.debug("TrackingEngine detects event cookie: "+t);var n=t.split("||");e.each(n,function(e,t){var n=t.split("|");window.TrackingEngine.trigger(n.shift(),n)}),e.cookie(window.TR_COOKIE,null,{path:"/"})}},isVersionActive:function(t){return e.inArray(t,s)>-1}},e(window).load(function(){window.TrackingEngine.processServeSideTrackingEvents()})}(jQuery),function(e){function t(){return e.Deferred().resolve().promise()}function n(t,n){return t?(-1==e.inArray(n,t)&&t.push(n),t):[n]}function a(t,n){if(t){var a=e.inArray(n,t);-1!=a&&t.splice(a,1)}return t}function i(e){return e.data("collapsible")}function r(t){var n={collapsedSports:[],expandedSports:[],collapsedCategories:[],expandedCategories:[]};return e("[data-collapsible]",t).each(function(){var t=e(this),a=t.is("[data-sport-treeid]");o.getState(t)==o.STATE.DISPLAYED?n[a?"expandedSports":"expandedCategories"].push(i(t)):n[a?"collapsedSports":"collapsedCategories"].push(i(t))}),n}var o={STATE:{COLLAPSED:1,DISPLAYED:2},getState:function(e){return e.data("collapsibleState")||this.STATE.DISPLAYED},setState:function(t,n,a){a=a||"collapsed";var i=this;t.each(function(){var t=e(this);i.getState(t)!=n&&(t.data("collapsibleState",n),n==i.STATE.DISPLAYED?t.removeClass(a):t.addClass(a))})},toggle:function(t,n){var a=this;t.each(function(){var t=e(this),i=a.getState(t)==a.STATE.COLLAPSED?a.STATE.DISPLAYED:a.STATE.COLLAPSED;a.setState(t,i,n)})}},s=function(){function t(){return e.URLCodec.toObject(e.Page.location().hash.substr(1))}function n(t){e.Page.location().hash=e.URLCodec.fromObject(t)}return{getState:function(e){return t()[e]||[]},setState:function(e,a){var i=t();i[e]=a,n(i)}}}(),c=function(){function t(){return e.URLCodec.toObject(e.Page.location().search.substr(1))}function n(t){e.Page.pushState(null,null,{search:e.URLCodec.fromObject(t)})}return{getState:function(e){return t()[e]||[]},setState:function(e,a){var i=t();i[e]=a,n(i)}}}(),l=function(t,i,r){function o(t){return e.map(e.isArray(t)?t:[t],function(e){return""+e})}function s(t,i,r){e.each(o(r),function(r,o){-1!=e.inArray(o,t)?a(t,o):i[0]!==c&&n(i,o)})}var c="all";return{expandIds:function(e){var n=t.getState(i),a=t.getState(r);s(a,n,e),t.setState(i,n),t.setState(r,a)},collapseIds:function(e){var n=t.getState(i),a=t.getState(r);s(n,a,e),t.setState(i,n),t.setState(r,a)},expandAll:function(){t.setState(i,[c]),t.setState(r,void 0)},collapseAll:function(){t.setState(i,void 0),t.setState(r,[c])},isAllCollapsed:function(){return t.getState(r)[0]===c},removeIds:function(n){var s=t.getState(i),c=t.getState(r);e.each(o(n),function(e,t){a(s,t),a(c,t)}),t.setState(i,s),t.setState(r,c)},isCollapsed:function(n){return n=""+n,this.isAllCollapsed()?-1==e.inArray(n,t.getState(i)):-1!=e.inArray(n,t.getState(r))}}};window.Collapsible={urlHashStateStorage:s,urlSearchStateStorage:c,objectStateStorage:function(e){return{getState:function(t){return e[t]||[]},setState:function(t,n){e[t]=n}}},Manager:function(){function n(n,i){var r=[];return e.each(a,function(e,a){var o=a[n];o&&r.push(o.apply(a,i)||t())}),e.when.apply(e,r)}var a=Array.from(arguments);return{toggle:function(e){for(var n=0;n<a.length;n++)if(a[n].test(e))return this[o.getState(e)==o.STATE.COLLAPSED?"open":"close"](e);return t()},open:function(n){if(o.getState(n)==o.STATE.COLLAPSED)for(var i=0;i<a.length;i++){var r=a[i];if(r.test(n)){var s=e(".collapse-button:first",n).addClass("loading");return r.openBehavior(n).done(function(){o.setState(n,o.STATE.DISPLAYED)}).always(function(){s.removeClass("loading")})}}return t()},close:function(n){if(o.getState(n)==o.STATE.DISPLAYED)for(var i=0;i<a.length;i++){var r=a[i];if(r.test(n)){var s=e(".collapse-button:first",n).addClass("loading");return r.closeBehavior(n).done(function(){o.setState(n,o.STATE.COLLAPSED)}).always(function(){s.removeClass("loading")})}}return t()},allStateChange:function(e,a){function i(){return n("afterAllStateChange",[e])}return n("beforeAllStateChange",[e]).pipe(function(){return a?a(e):t()}).pipe(function(){return n("allStateChangeBehavior",[e])}).pipe(i,i)},update:function(){return n("updateBehavior")},removeIds:function(e){return n("removeIds",[e])},removePopularIds:function(e){return n("removePopularIds",[e])}}},LiveCategoriesProcessor:function(n){function a(){return e("[data-live-events-container] #container_EVENTS")}var r,s=l(n,"ecids","ccids");return{test:function(e){return e.is("[data-collapsible][data-category-treeid]")&&a().has(e).length},openBehavior:function(t){var n=i(t);return e.Page.reload("expandCategory",{data:{expandTreeId:n},allowParallelRequests:!0}).done(function(a){e("[data-content]:first",t).html(a),s.expandIds(n)})},closeBehavior:function(n){var a=i(n);return e("[data-content]:first",n).empty(),s.collapseIds(a),t()},beforeAllStateChange:function(t){s[t?"collapseAll":"expandAll"](),r=e("[data-category-treeid] .category-header .collapse-button",a()).addClass("loading")},allStateChangeBehavior:function(n){var i=a();return i.length&&n&&(e("[data-category-treeId] [data-content]",i).empty(),o.setState(e("[data-category-treeId]",i),o.STATE.COLLAPSED)),t()},afterAllStateChange:function(e){r.removeClass("loading")},updateBehavior:function(){return e("[name=collapseAllCategoriesCheckbox]").prop("checked",s.isAllCollapsed()),t()},removeIds:function(e){return s.removeIds(e),t()}}},LivePopularCategoriesProcessor:function(n){function a(){return e("[data-live-events-container] #container_POPULAR_EVENTS")}var r,s=l(n,"epcids","cpcids");return{test:function(e){return e.is("[data-collapsible][data-category-treeid]")&&a().has(e).length},openBehavior:function(t){var n=i(t);return e.Page.reload("expandPopularCategory",{data:{expandTreeId:n},allowParallelRequests:!0}).done(function(a){e("[data-content]:first",t).html(a),s.expandIds(n)})},closeBehavior:function(n){var a=i(n);return e("[data-content]:first",n).empty(),s.collapseIds(a),t()},beforeAllStateChange:function(t){s[t?"collapseAll":"expandAll"](),r=e("[data-category-treeid] .category-header .collapse-button",a()).addClass("loading")},allStateChangeBehavior:function(n){var i=a();return i.length&&n&&(e("[data-category-treeId] [data-content]",i).empty(),o.setState(e("[data-category-treeId]",i),o.STATE.COLLAPSED)),t()},afterAllStateChange:function(e){r.removeClass("loading")},updateBehavior:function(){return e("[name=collapseAllCategoriesCheckbox]").prop("checked",s.isAllCollapsed()),t()},removePopularIds:function(e){return s.removeIds(e),t()}}},LiveSportsProcessor:function(n){function a(){return e("[data-live-events-container] #container_EVENTS")}var r,s=l(n,"esids","csids");return{test:function(e){return e.is("[data-collapsible][data-sport-treeid]")&&a().has(e).length},openBehavior:function(t){var n=i(t);return e.Page.reload("expandSport",{data:{expandTreeId:n},allowParallelRequests:!0}).done(function(a){e("[data-content]:first",t).html(a),s.expandIds(n)})},closeBehavior:function(n){var a=i(n);return e("[data-content]:first",n).empty(),s.collapseIds(a),t()},beforeAllStateChange:function(t){s[t?"collapseAll":"expandAll"](),r=e("[data-sport-treeid] .sport-category-header .collapse-button",a()).addClass("loading")},allStateChangeBehavior:function(n){var i=a();return i.length&&n&&(e("[data-sport-treeId] [data-content]",i).empty(),o.setState(e("[data-sport-treeId]",i),o.STATE.COLLAPSED)),t()},afterAllStateChange:function(e){r.removeClass("loading")},updateBehavior:function(){return e("[name=collapseAllSportsCheckbox]").prop("checked",s.isAllCollapsed()),t()},removeIds:function(e){return s.removeIds(e),t()}}},PrematchCategoriesProcessor:function(n,a){var r=l(n,"epcids","cpcids");return{test:function(e){return e.is("[data-collapsible][data-category-treeid]")&&0==e.parents("#liveCategoriesContainer:first").length},openBehavior:function(n){if(o.getState(n)==o.STATE.COLLAPSED){var s=i(n),c=e("[data-content]:first",n);if("absent"==c.data("content"))return e(".collapse-button:first",n).addClass("loading"),e.ajax({url:a(),type:"POST",data:{expandTreeId:s}}).done(function(e){c.parents("[data-category-treeid]:first").replaceWith(e),r.expandIds(s),o.setState(n,o.STATE.DISPLAYED)});r.expandIds(s),o.setState(n,o.STATE.DISPLAYED)}return t()},closeBehavior:function(e){if(o.getState(e)==o.STATE.DISPLAYED){var n=i(e);r.collapseIds(n),o.setState(e,o.STATE.COLLAPSED)}return t()},beforeAllStateChange:function(t){e(".collapse-all-categories-checkbox").addClass("loading"),r[t?"collapseAll":"expandAll"]()},allStateChangeBehavior:function(e){return this.updateBehavior(),t()},afterAllStateChange:function(t){e(".collapse-all-categories-checkbox").removeClass("loading")},updateBehavior:function(){e("[name=collapseAllCategoriesCheckbox]").prop("checked",r.isAllCollapsed());var n=this;return e("[data-collapsible][data-category-treeid]:not([data-live-events-container] [data-collapsible][data-category-treeid])").each(function(){r.isCollapsed(i(e(this)))?n.closeBehavior(e(this)):n.openBehavior(e(this))}),t()}}},PrematchSportsProcessor:function(n,a){var r=l(n,"epsids","cpsids");return{test:function(e){return e.is("[data-collapsible][data-sport-treeid]")&&0==e.parents("#liveCategoriesContainer:first").length},openBehavior:function(n){if(o.getState(n)==o.STATE.COLLAPSED){var s=i(n),c=e("[data-content]:first",n);if("absent"==c.data("content")){var l=e(".collapse-button:first",n).addClass("loading");return e.ajax({url:a(),type:"POST",data:{expandTreeId:s}}).done(function(e){c.data("content","present").html(e),r.expandIds(s),l.removeClass("loading"),o.setState(n,o.STATE.DISPLAYED)})}r.expandIds(s),o.setState(n,o.STATE.DISPLAYED)}return t()},closeBehavior:function(e){return o.getState(e)==o.STATE.DISPLAYED&&(r.collapseIds(i(e)),o.setState(e,o.STATE.COLLAPSED)),t()},beforeAllStateChange:function(t){e(".collapse-all-sports-checkbox").addClass("loading"),r[t?"collapseAll":"expandAll"]()},allStateChangeBehavior:function(e){return this.updateBehavior(),t()},afterAllStateChange:function(t){e(".collapse-all-sports-checkbox").removeClass("loading")},updateBehavior:function(){e("[name=collapseAllSportsCheckbox]").prop("checked",r.isAllCollapsed());var n=this;return e("[data-collapsible][data-sport-treeid]:not([data-live-events-container] [data-collapsible][data-sport-treeid])").each(function(){r.isCollapsed(i(e(this)))?n.closeBehavior(e(this)):n.openBehavior(e(this))}),t()}}},getCollapsibleState:function(){return r("[data-live-events-container] #container_EVENTS")},getPopularCollapsibleState:function(){return r("[data-live-events-container] #container_POPULAR_EVENTS")}}}(jQuery),function(e){window.FullCategoryLinks={STATE:{SHOW_FULL_CATEGORY:"showFullCategory",SHOW_SELECTED_EVENTS:"showSelectedEvents",HIDE:"hide"},updateState:function(t,n,a,i){var r=e('[data-category-treeId="'+t+'"] [data-category-events-link-container]',n),o=!0;i&&"function"==typeof i&&(o=i(r.data("state"))),o&&(r.data("state",a),this.STATE.HIDE==a?r.removeClass("show-full-category show-selected-events"):(this.STATE.SHOW_FULL_CATEGORY==a&&r.addClass("show-full-category").removeClass("show-selected-events"),this.STATE.SHOW_SELECTED_EVENTS==a&&r.addClass("show-selected-events").removeClass("show-full-category")))}}}(jQuery),function(e){function t(t){return{id:t.data("sticky"),$el:t,isFixed:function(){return"relative"==this.$el.css("position")},fixed:function(e,t){e?this.$el.css({position:"relative",top:t+"px","z-index":"101"}).data("stickyState"):this.$el.css({position:"","z-index":"",top:0})},getDummy:function(){var t=this.$el.prev("#"+this.id+"-dummy:first");return t.length?t:e("<div/>",{id:this.id+"-dummy"}).css({width:0,height:0}).insertBefore(this.$el)},getTop:function(){return this.isFixed()?this.getDummy().offset().top:this.$el.offset().top},getHeight:function(){return this.$el.outerHeight(!0)}}}function n(e,t){if(e.before.length){var n,a=[],i=e.before.slice(0),r=e.after.slice(0);for((n=i.pop()).delta=t-n.getTop(),t+=n.getHeight(),a.push(n);r.length&&t>r[0].getTop();)(n=r.shift()).delta=t-n.getTop(),t+=n.getHeight(),a.push(n);if(a.length<3)return{fixed:a,before:i,after:r}}return e}window.StickyTop=function(a){var i=0;a&&(i=a);for(var r=e("[data-sticky]"),o={before:[],after:[]},s=0;s<r.length;s++){var c=t(e(r.get(s)));i>=c.getTop()?o.before.push(c):o.after.push(c)}(o=n(o,i)).fixed&&e.each(o.fixed,function(){this.fixed(!0,this.delta)}),e.each(o.before,function(){this.fixed(!1)}),e.each(o.after,function(){this.fixed(!1)})}}(jQuery),function(e){window.ScorecastManager=(_save=function(){var t={};return e("[data-selected-scorecast-code]").each(function(){var n=e(this).children(".price").not(".scorecast-hidden").data("mutable-id");null!=n&&(t[e(this).data("selected-scorecast-code")]=n)}),t},_restore=function(t){e.each(t,function(e,t){Markets.hideScorecastSelections(e),Markets.showScorecastSelection(t)})},_bindActions=function(){e(document).on("click","[data-scorecast-selection]",function(){Markets.hideScorecastSelections(e(this).data("scorecast-code")),Markets.showScorecastSelection(e(this).data("mutable-id")),Markets.hidePlayersLinks()}),e(document).on("click","[data-selection-link]",function(){Markets.refreshMenuBars(),Markets.hideScorecastSelections(e(this).data("scorecast-code")),Markets.showScorecastSelection(e(this).data("scorecast-selection-id")),Markets.hidePlayersLinks()}),e(document).on("click","[data-plus-players]",function(){Markets.refreshMenuBars(),Markets.hidePlayersLinks(),Markets.showPlayersLink(e(this).data("scorecast-code"))})},{save:_save,restore:_restore,bindActions:_bindActions}),window.ScorecastManager.bindActions()}(window.jQuery),function(e){e(document).on("click","[data-tab-button-container] [data-tab-button]",function(){var t=e(this).parents("[data-tab-button-container]:first");if(t.length){var n=e(this).data("tabButton");e("[data-tab-button]",t).each(function(){var t=e(this).data("tabButton");n==t?e(this).addClass("active"):e(this).removeClass("active")}),e(document).trigger("tab-button-click",[t.data("tabButtonContainer"),n])}})}(jQuery),function(e){window.EventsHelper={getLiveEventPagePath:function(e){return initData.base_dir+"/live/"+e},broadcastIconMouseenterHandler:function(t){initData.isLogged&&e(t.currentTarget).toggleClass("broadcast-enabled",initData.isStreamingIconEnabled);var n=e("[data-tooltip-streaming-icon]",e(t.currentTarget));n[0].isTooltip=!1,initData.isStreamingIconEnabled?n.PanbetTooltip("tooltipForStreamingIcon"):n.PanbetTooltip("tooltipForStreamingIcon",{tooltipText:PanbetConst.Hint.ZERO_BALANCE_STREAMING_IMG_HINT})},subscribeStreamingIconStateUpdate:function(){if(initData.streamingIconAvailableRefreshEnabled){var e=window.Log.getLogger("punterMainBalanceRefresh");StompFactory.subscribe(initData.stomp.punterMainBalanceChangesPath,function(t){if(t&&t.body){var n=JSON.parse(t.body);e.debug(["punterMainBalanceRefresh","onMessage() callback receive data",n]),n&&n.balance&&(initData.isStreamingIconEnabled=PanbetPunterBalance.parseBalanceValue(n.balance)>0)}})}}}}(jQuery),function(e){window.Banners={},Banners.BaseController=Class.extend({BLOCK_SELECTOR:"#banners_block",DATA_ID:"data-id",DATA_VERSION:"data-version",DATA_TYPE:"data-type",TYPE_IMG:"IMG",TYPE_IMG_HELP:"IMG_HELP",TYPE_HTML:"HTML",TYPE_GAME_IFORIUM:"GAME_IFORIUM",TYPE_MARKET:"MARKET",logLevels:{DEBUG:!0,INFO:!0,WARN:!0,ERROR:!0,DISABLED:!0},defaultLogLevel:null,onReady:function(){},isEnabled:function(){return 1==e(this.BLOCK_SELECTOR).length},getInitDataParam:function(e,t){return"undefined"!=typeof initData&&initData[e]||t},getInitDataBaseDir:function(){return this.getInitDataParam("base_dir","")},getLoggerName:function(){return"banners"},debug:function(){this.getLogger().isDebugEnabled()&&this.log("debug",arguments)},info:function(){this.getLogger().isInfoEnabled()&&this.log("info",arguments)},warn:function(){this.getLogger().isWarnEnabled()&&this.log("warn",arguments)},error:function(){this.getLogger().isErrorEnabled()&&this.log("error",arguments)},getLogLevelFromUrl:function(e){try{var t=getUrlVar("log.level."+e);if(this.logLevels[t])return t}catch(e){}return null},getDefaultLogLevel:function(){return this.defaultLogLevel||(this.defaultLogLevel=this.getLogLevelFromUrl("banners.all"),this.logLevels[this.defaultLogLevel]||(this.defaultLogLevel="ERROR")),this.defaultLogLevel},getLogger:function(){var e=this.getLoggerName(),t=Log.getLogger(e,!0);if(!t){var n=this.getLogLevelFromUrl(e)||this.getDefaultLogLevel();(t=Log.getLogger(e,!1)).setLogLevel(Log[n])}return t},log:function(t,n){if("undefined"!=typeof console)try{var a=console[t];if(a||(a=console.log),!a)return;var i=[];i.push(this.getDateFormatted()),i.push(t+"("+this.getLoggerName()+")"),e.each(n,function(e,t){i.push(t)}),a.apply(console,i)}catch(e){}},getDateFormatted:function(){var e=new Date,t=""+e.getFullYear(),n=""+(e.getMonth()+1);1==n.length&&(n="0"+n);var a=""+e.getDate();1==a.length&&(a="0"+a);var i=""+e.getHours();1==i.length&&(i="0"+i);var r=""+e.getMinutes();1==r.length&&(r="0"+r);var o=""+e.getSeconds();return 1==o.length&&(o="0"+o),t+"-"+n+"-"+a+" "+i+":"+r+":"+o}})}(jQuery),Banners.BaseModel=Banners.BaseController.extend({values:{},init:function(e){e?this.values=e:this.error("Values required")},getLoggerName:function(){return"banners.model"},get:function(e){return e in this.values||this.error('Key "'+e+'" not exist',this.values),this.values[e]}}),Banners.BannerModel=Banners.BaseModel.extend({getId:function(){return this.get("id")},getType:function(){return this.get("type")},getVersion:function(){return this.get("version")}}),Banners.ImgModel=Banners.BannerModel.extend({getImgSrc:function(){return this.get("imgSrc")},getTargetUrl:function(){return this.get("targetUrl")},getTargetFrame:function(){return this.get("targetFrame")},getStatisticKey:function(){return this.get("statisticKey")},getWidth:function(){return this.get("width")},getHeight:function(){return this.get("height")},getAlt:function(){return this.get("alt")}}),Banners.ImgHelpModel=Banners.ImgModel.extend({}),Banners.MarketModel=Banners.ImgModel.extend({}),Banners.HtmlModel=Banners.BannerModel.extend({getIframeSrc:function(){return this.get("iframeSrc")},getWidth:function(){return this.get("width")},getHeight:function(){return this.get("height")}}),Banners.GameIForiumGameModel=Banners.BaseModel.extend({getId:function(){return this.get("id")},getTitle:function(){return this.get("title")},getImg:function(){return this.get("img")},getProvider:function(){return this.get("provider")},getGameId:function(){return this.get("gameId")},getGameId2:function(){return this.get("gameId2")},getAspectRatio:function(){return this.get("aspectRatio")},getBalanceReloadTimeout:function(){return this.get("balanceReloadTimeout")},getLoadDelay:function(){return this.get("loadDelay")},getMarginTop:function(){return this.get("marginTop")},getMarginRight:function(){return this.get("marginRight")},getMarginBottom:function(){return this.get("marginBottom")},getMarginLeft:function(){return this.get("marginLeft")}}),Banners.GameIForiumModel=Banners.BannerModel.extend({getGames:function(){return this.get("games")},getBrandId:function(){return this.get("brandId")},getPlatformKey:function(){return this.get("platformKey")},getGameflexUrl:function(){return this.get("gameflexUrl")},getAuthTokenUrl:function(){return this.get("authTokenUrl")},getKeepAliveTimeout:function(){return this.get("keepAliveTimeout")},getClosed:function(){return this.get("closed")},getCurrencyCode:function(){return this.get("currencyCode")},getName:function(){return this.get("name")},getDownloadFlashPlayer:function(){return this.get("downloadFlashPlayer")},getNewApiEnabled:function(){return this.get("newApiEnabled")},getRealityCheckUpdateInterval:function(){return this.get("realityCheckUpdateInterval")},getRealityCheckEnabled:function(){return this.get("realityCheckEnabled")}}),Banners.ModelFactory=Banners.BaseController.extend({create:function(e){switch(e.type){case this.TYPE_IMG:return new window.Banners.ImgModel(e);case this.TYPE_IMG_HELP:return new window.Banners.ImgHelpModel(e);case this.TYPE_HTML:return new window.Banners.HtmlModel(e);case this.TYPE_GAME_IFORIUM:return new window.Banners.GameIForiumModel(e);case this.TYPE_MARKET:return new window.Banners.MarketModel(e)}return this.error("Wrong banner type",e),null}}),function(e){var t=Banners.BaseController.extend({link:function(e){return 0==e.indexOf("/")&&0!=e.indexOf("//")&&0!=e.indexOf(this.getInitDataBaseDir())?this.getInitDataBaseDir()+e:e},applyStatistic:function(e){try{TrackingEngine.trigger(TrackingEngine.EVENT.BANNER_CLICKED,[e,this.getInitDataParam("localeLanguage","en")])}catch(e){}}});Banners.BannerHelper=new t,Banners.BannerController=Banners.BaseController.extend({getType:function(){throw Error("type not defined")},onReady:function(){},create:function(e){},afterCreate:function(e){},remove:function(e){this.getType()==e.attr(this.DATA_TYPE)?e.remove():this.error("Failed to remove: wrong banner type",e)},toMap:function(){var e={};if(!arguments.length)return this.error("toMap: arguments required"),e;if(arguments.length%2!=0)return this.error("toMap: arguments count must be even"),e;var t,n;for(t=0;t<arguments.length/2;t++)e[arguments[n=2*t]]=arguments[n+1];return e},getBannerBaseAttr:function(e){return this.toMap(this.DATA_ID,e.getId(),this.DATA_VERSION,e.getVersion(),this.DATA_TYPE,e.getType())}}),Banners.ImgBannerController=Banners.BannerController.extend({getLoggerName:function(){return"banners.img"},getType:function(){return this.TYPE_IMG},create:function(t){this.debug("create",t);var n=this.getImg(t),a=this.getBannerBaseAttr(t);return t.getTargetUrl()?(a.href=Banners.BannerHelper.link(t.getTargetUrl()),a.title="",a.alt="",t.getTargetFrame()&&(a.target=t.getTargetFrame()),e("<a />").attr(a).click(this.onClick(t.getStatisticKey())).append(n)):e("<div />").addClass("banner-wrapper").attr(a).append(n)},getImg:function(t){var n=t.getImgSrc(),a=t.getWidth(),i=t.getHeight(),r={src:n};return a&&(r.width=a),i&&(r.height=i),e("<img />").attr(r)},onClick:function(e){return function(){Banners.BannerHelper.applyStatistic(e)}}}),Banners.ImgHelpBannerController=Banners.ImgBannerController.extend({DATA_SHOW_HELP:"data-show-help",getLoggerName:function(){return"banners.img_help"},getType:function(){return this.TYPE_IMG_HELP},create:function(t){this.debug("create",t);var n=this.getImg(t),a=this.getBannerBaseAttr(t);return t.getTargetUrl()?(a[this.DATA_SHOW_HELP]=t.getTargetUrl(),a.title="",a.alt="",e("<span />").attr(a).addClass("show-help-link").click(this.onClick(t.getStatisticKey())).append(n)):e("<div />").addClass("banner-wrapper").attr(a).append(n)}}),Banners.MarketController=Banners.ImgBannerController.extend({getLoggerName:function(){return"banners.img_help"},getType:function(){return this.TYPE_MARKET}}),Banners.HtmlBannerController=Banners.BannerController.extend({getLoggerName:function(){return"banners.html"},getType:function(){return this.TYPE_HTML},create:function(t){this.debug("create",t);var n=this.getBannerBaseAttr(t);return n.src=t.getIframeSrc(),n.scrolling="no",n.frameborder=0,e("<iframe />").attr(n)}}),Banners.GameIForiumBannerController=Banners.BannerController.extend({BANNER_CLASS:"banner-type-game-iforium",HEADER_CLASS:"game-header",HEADER_HOME_CLASS:"home",HEADER_ARROW_CONTAINER_CLASS:"arrow-container",LOBBY_CLASS:"lobby",GAMES_CLASS:"games",GAME_CLASS:"game",CONTAINER_CLASS:"game-container",GAME_PLAYED_CLASS:"game-played",LOADER_CLASS:"loader",LOADER_ICON_CLASS:"loader-icon",IFRAME_SELECTOR:"iframe",ERROR_CLASS:"error",REALITY_CHECK_NOTIFICATION_ID:"reality-check-notification",NO_REALITY_SETTINGS_NOTIFICATION_SELECTOR:"#no-reality-settings-notification",STOP_PLAYING_BUTTON_CLASS:"stop-playing-button",CONTINUE_PLAYING_BUTTON_CLASS:"continue-playing-button",REALITY_CHECK_SETTINGS_BUTTON_CLASS:"reality-check-settings-button",BET_HISTORY_BUTTON_CLASS:"reality-bet-history-button",CLOSED_CLASS:"closed",CLOSED_COOKIE:"bannersGameClosed",DATA_NEW_API_ENABLED:"data-new-api-enabled",DATA_BRAND_ID:"data-brand-id",DATA_PROVIDER:"data-provider",DATA_GAME_ID:"data-game-id",DATA_GAME_ID2:"data-game-id2",DATA_PLATFORM_KEY:"data-platform-key",DATA_GAMEFLEX_URL:"data-gameflex-url",DATA_AUTH_TOKEN_URL:"data-auth-token-url",DATA_BALANCE_RELOAD_TIMEOUT:"data-balance-reload-timeout",DATA_CURRENCY_CODE:"data-currency-code",DATA_ASPECT_RATIO:"data-aspect-ratio",DATA_LOAD_DELAY:"data-load-delay",DATA_KEEP_ALIVE_TIMEOUT:"data-keep-alive-timeout",DATA_DOWNLOAD_FLASH_PLAYER:"data-download-flash-player",DATA_MARGIN_TOP:"data-margin-top",DATA_MARGIN_RIGHT:"data-margin-right",DATA_MARGIN_BOTTOM:"data-margin-bottom",DATA_MARGIN_LEFT:"data-margin-left",DATA_REALITY_CHECK_ENABLED:"data-reality-check-enabled",DATA_REALITY_CHECK_UPDATE_INTERVAL:"data-reality-check-update-interval",GAME_CAN_RESIZE:"canResize",GAME_ENGAGE_OBJECT:"gameflexEngageObject",GAME_ASPECT_RATIO:"aspectRatio",GAME_RELOAD_BALANCE_TIMER:"reloadBalanceTimer",GAME_LOAD_DELAY_TIMER:"loadDelayTimer",GAME_KEEP_ALIVE_URL:"keepAliveUrl",GAME_KEEP_ALIVE_TIMER:"keepAliveTimer",GAME_MARGIN_TOP:"marginTop",GAME_MARGIN_RIGHT:"marginRight",GAME_MARGIN_BOTTOM:"marginBottom",GAME_MARGIN_LEFT:"marginLeft",GAMEFLEX_LOADER_PATH:"express/gameflexExpressLibraryLoader.js",AUTH_STATUS_GUEST:"Guest",AUTH_STATUS_AUTHENTICATED:"Authenticated",ERROR_CODE_NO_FLASH:"ERROR_CODE_NO_FLASH",ERROR_CODE_NO_FLASH_DESCRIPTION:"SWFObject could not launch game",GAMEFLEX_URL_PREFIX:"https://gameflex.",GAMEFLEX_URL_POSTFIX:"/gamelaunch/",GAMEFLEX_URL:null,API_URL_REAL_MODE:"/gi/reference/secure/open/minigame/",API_URL_DEMO_MODE:"/gi/reference/insecure/open/minigame/",API_URL_REALITY_CHECK_PREFIX:"/gi/reference/secure/reality-check/",API_URL_REALITY_CHECK_POSTFIX:"/check",API_URL_REALITY_CHECK_CLEAR:"/gi/reference/secure/reality-check/clear",API_URL_SHOW_REALITY_CHECK_POPUP:"/gi/reference/casino/showDurationRealityCheckPopUp",REALITY_CHECK_SETTINGS_URL:"/myaccount/protection.htm",CASINO_BET_HISTORY_URL:"/myaccount/casinohistory.htm",EVENT_RESIZED:"bannerResized",games:{},resizeTimer:null,gameflexExpressLibrary:null,LANGUAGE_CODE_DEFAULT:"en",languageCode:null,timerId:null,showDurationRealityCheckPopUp:!0,getLoggerName:function(){return"banners.game.iforium"},getType:function(){return this.TYPE_GAME_IFORIUM},onReady:function(){this.resize(this.getBanners()),this.initLanguageCode(),this.initGameFlexUrl(),this.initShowHide(),this.initHome(),this.initGamePlayed(),this.initRunGame(),this.initAutoResize();var t=e(this.BLOCK_SELECTOR+" ."+this.BANNER_CLASS);"true"===t.attr(this.DATA_REALITY_CHECK_ENABLED)&&"true"===t.attr(this.DATA_NEW_API_ENABLED)&&this.getInitDataParam("isLogged",!1)?(this.initRealityCheckHandlers(t),this.initShowDurationRealityCheckPopUp()):this.showGamesBlock()},create:function(t){this.debug("create",t);var n=this,a=e.extend({},this.getBannerBaseAttr(t),this.toMap(this.DATA_BRAND_ID,t.getBrandId(),this.DATA_PLATFORM_KEY,t.getPlatformKey(),this.DATA_GAMEFLEX_URL,t.getGameflexUrl(),this.DATA_AUTH_TOKEN_URL,t.getAuthTokenUrl(),this.DATA_KEEP_ALIVE_TIMEOUT,t.getKeepAliveTimeout(),this.DATA_CURRENCY_CODE,t.getCurrencyCode(),this.DATA_DOWNLOAD_FLASH_PLAYER,t.getDownloadFlashPlayer(),this.DATA_NEW_API_ENABLED,t.getNewApiEnabled(),this.DATA_REALITY_CHECK_ENABLED,t.getRealityCheckEnabled(),this.DATA_REALITY_CHECK_UPDATE_INTERVAL,t.getRealityCheckUpdateInterval())),i=t.getGames(),r=i.length,o=e("<tbody />");return e.each(i,function(t,a){var i=new window.Banners.GameIForiumGameModel(a);t>=4||(t%2==0&&o.append(e("<tr />")),o.find("tr").last().append(e("<td />").addClass(n.GAME_CLASS).addClass("game-index-"+t).attr(n.toMap(n.DATA_ID,i.getId(),n.DATA_PROVIDER,i.getProvider(),n.DATA_GAME_ID,i.getGameId(),n.DATA_GAME_ID2,i.getGameId2(),n.DATA_ASPECT_RATIO,i.getAspectRatio(),n.DATA_LOAD_DELAY,i.getLoadDelay(),n.DATA_BALANCE_RELOAD_TIMEOUT,i.getBalanceReloadTimeout(),n.DATA_MARGIN_TOP,i.getMarginTop(),n.DATA_MARGIN_RIGHT,i.getMarginRight(),n.DATA_MARGIN_BOTTOM,i.getMarginBottom(),n.DATA_MARGIN_LEFT,i.getMarginLeft())).append(e("<div />").addClass("game-img").append(e("<img />").attr({src:i.getImg()})),e("<div />").addClass("game-title").text(i.getTitle()))))}),r<4&&r%3==0&&o.find("tr").last().append(e("<td />").addClass("game").addClass("game-empty").addClass("game-index-"+r)),e("<div />").attr(a).addClass(this.BANNER_CLASS+(t.getClosed()?" "+this.CLOSED_CLASS:"")).append(e("<div />").addClass(this.HEADER_CLASS).text(t.getName()).prepend(e("<span />").addClass(this.HEADER_HOME_CLASS)).append(e("<div />").addClass(this.HEADER_ARROW_CONTAINER_CLASS).append(e("<span />").addClass("arrow"))),e("<div />").addClass(this.CONTAINER_CLASS).append(e("<div />").addClass(this.LOBBY_CLASS).append(e("<table />").append(e("<tbody />").append(e("<tr />").append(e("<td />").append(e("<div />").addClass(this.GAMES_CLASS).addClass(1==r?"games-single":"").append(e("<table />").append(o)))))))))},afterCreate:function(e){this.debug("afterCreate",e),this.onReady()},remove:function(e){this.debug("remove",e),this.getType()==e.attr(this.DATA_TYPE)?(this.stopGame(e),e.remove()):this.error("Failed to remove: wrong banner type",e)},runGame:function(t,n){PunterLegalAgreementDialogHelper.isConfirmationRequired()?PunterLegalAgreementDialogHelper.showLegalAgreementPopup():"true"==t.attr(this.DATA_NEW_API_ENABLED)?"true"===t.attr(this.DATA_REALITY_CHECK_ENABLED)&&this.getInitDataParam("isLogged",!1)&&this.showDurationRealityCheckPopUp?(e.modal.close(),e(this.NO_REALITY_SETTINGS_NOTIFICATION_SELECTOR).modal({position:["20%"],escClose:!1})):this.runGameNewApi(t,n):this.runGameOldApi(t,n)},runGameNewApi:function(t,n){var a=this,i=(this.getInitDataParam("isLogged",!1)?this.API_URL_REAL_MODE:this.API_URL_DEMO_MODE)+this.getLanguageCode(),r=n.attr(this.DATA_PROVIDER),o=n.attr(this.DATA_GAME_ID2);e.ajax({type:"GET",dataType:"json",timeout:3e4,cache:!1,url:i,data:{provider:r,gameId:o},success:function(e){a.debug("loadGameUrlFromApi.success",r,o,e),e&&e.url?(a.loadGame(t,n,e.url),a.getInitDataParam("isLogged",!1)&&"true"===t.attr(a.DATA_REALITY_CHECK_ENABLED)&&a.startPolling(t)):a.switchToLobby(t)},error:function(e,n,i){a.debug("loadGameUrlFromApi.error",e,n,i),a.switchToLobby(t)}})},startPolling:function(t){if(this.timerId&&this.stopPolling(),t.attr(this.DATA_REALITY_CHECK_ENABLED)&&t.attr(this.DATA_REALITY_CHECK_UPDATE_INTERVAL)){var n=this;this.timerId=setInterval(function(){e.ajax({type:"GET",url:n.API_URL_REALITY_CHECK_PREFIX+n.getLanguageCode()+n.API_URL_REALITY_CHECK_POSTFIX,dataType:"JSON",success:function(t){t&&t.remind&&(n.stopPolling(),e.modal.close(),showMessage(n.REALITY_CHECK_NOTIFICATION_ID,e.validator.format(PanbetConst.Messages.REALITY_SESSION_ALERT_MESSAGE,t.duration),{escClose:!1}))},error:function(){n.debug("realityCheck.error"),n.stopPolling(),n.hideGamesBlock()}})},t.attr(n.DATA_REALITY_CHECK_UPDATE_INTERVAL))}},stopPolling:function(){this.timerId&&(clearInterval(this.timerId),this.timerId=null)},clearRealityTimeout:function(){var t=this;e.ajax({type:"GET",url:t.API_URL_REALITY_CHECK_CLEAR,dataType:"JSON",success:function(){t.debug("Success clear reality timeout")},error:function(){t.debug("Error clear reality timeout"),t.hideGamesBlock()}})},initRealityCheckHandlers:function(t){var n=this,a="#"+this.REALITY_CHECK_NOTIFICATION_ID;e(document).on("click",a+" ."+n.STOP_PLAYING_BUTTON_CLASS,function(){n.clearRealityTimeout(),n.switchToLobby(t)}),e(document).on("click",a+" ."+n.CONTINUE_PLAYING_BUTTON_CLASS,function(){n.clearRealityTimeout(),n.startPolling(t)}),e(document).on("click",a+" ."+n.REALITY_CHECK_SETTINGS_BUTTON_CLASS,function(){n.clearRealityTimeout(),window.location.href=window.location.protocol+"//"+window.location.host+initData.base_dir+n.REALITY_CHECK_SETTINGS_URL}),e(document).on("click",a+" ."+n.BET_HISTORY_BUTTON_CLASS,function(){n.clearRealityTimeout(),window.location.href=window.location.protocol+"//"+window.location.host+initData.base_dir+n.CASINO_BET_HISTORY_URL}),e(document).on("click",n.NO_REALITY_SETTINGS_NOTIFICATION_SELECTOR+" ."+n.REALITY_CHECK_SETTINGS_BUTTON_CLASS,function(){window.location.href=window.location.protocol+"//"+window.location.host+initData.base_dir+n.REALITY_CHECK_SETTINGS_URL})},showGamesBlock:function(){e(this.BLOCK_SELECTOR+" ."+this.BANNER_CLASS).show(),this.resize(this.getBanners())},hideGamesBlock:function(){e(this.BLOCK_SELECTOR+" ."+this.BANNER_CLASS).hide()},initShowDurationRealityCheckPopUp:function(){var t=this;e.ajax({type:"GET",url:t.API_URL_SHOW_REALITY_CHECK_POPUP,dataType:"JSON",success:function(e){e?(t.showDurationRealityCheckPopUp=e.showDurationRealityCheckPopUp,t.showGamesBlock()):(t.showDurationRealityCheckPopUp=!0,t.hideGamesBlock())},error:function(){t.debug("Error get info about reality timeout changed"),t.showDurationRealityCheckPopUp=!0,t.hideGamesBlock()}})},loadGame:function(t,n,a){var i=this,r=t.attr(this.DATA_ID);if(!this.games[r]){var o={};o[this.GAME_ASPECT_RATIO]=parseFloat(n.attr(this.DATA_ASPECT_RATIO),10),o[this.GAME_CAN_RESIZE]=o[this.GAME_ASPECT_RATIO]>0,o[this.GAME_MARGIN_TOP]=parseInt(n.attr(this.DATA_MARGIN_TOP),10),o[this.GAME_MARGIN_RIGHT]=parseInt(n.attr(this.DATA_MARGIN_RIGHT),10),o[this.GAME_MARGIN_BOTTOM]=parseInt(n.attr(this.DATA_MARGIN_BOTTOM),10),o[this.GAME_MARGIN_LEFT]=parseInt(n.attr(this.DATA_MARGIN_LEFT),10),this.games[r]=o,this.addLoader(t,n);var s=e("<iframe />").attr({scrolling:"no",frameborder:"0"}).on("load",function(){i.debug("loadGame.success",r),i.onGameLoaded(t,n)});s.attr("src",a),t.find(this.IFRAME_SELECTOR).remove(),t.find("."+this.GAME_PLAYED_CLASS).append(s)}},onGameLoaded:function(e,t){var n=this,a=e.attr(this.DATA_ID),i=n.games[a],r=parseInt(t.attr(this.DATA_LOAD_DELAY),10),o=r>0;o?(n.debug("loadDelay.create",r),i[n.GAME_LOAD_DELAY_TIMER]=setTimeout(function(){n.debug("loadDelay"),n.games[e.attr(n.DATA_ID)][n.GAME_LOAD_DELAY_TIMER]=null,e.find(n.IFRAME_SELECTOR).css({visibility:"visible"}),n.removeLoader(e),n.resize(e)},r)):i[this.GAME_LOAD_DELAY_TIMER]=null,n.games[a]=i,e.find("."+n.LOBBY_CLASS).hide(),e.find(n.IFRAME_SELECTOR).show(),e.find("."+n.GAME_PLAYED_CLASS).show(),o?e.find(n.IFRAME_SELECTOR).css({visibility:"hidden"}):n.removeLoader(e),n.resize(e),n.debug("games",n.games)},runGameOldApi:function(t,n){var a=this,i=a.GAMEFLEX_URL||t.attr(a.DATA_GAMEFLEX_URL);a.isGameflexExpressLibraryLoaded()?a.initGame(t,n,i):(this.debug("Download Gameflex Express Loader"),e.getScript(i+a.GAMEFLEX_LOADER_PATH,function(){a.initGame(t,n,i)}))},initGame:function(e,t,n){var a=this,i=e.attr(this.DATA_ID);if(!this.games[i]){var r={};r[this.GAME_ASPECT_RATIO]=parseFloat(t.attr(this.DATA_ASPECT_RATIO),10),r[this.GAME_CAN_RESIZE]=r[this.GAME_ASPECT_RATIO]>0,r[this.GAME_MARGIN_TOP]=parseInt(t.attr(this.DATA_MARGIN_TOP),10),r[this.GAME_MARGIN_RIGHT]=parseInt(t.attr(this.DATA_MARGIN_RIGHT),10),r[this.GAME_MARGIN_BOTTOM]=parseInt(t.attr(this.DATA_MARGIN_BOTTOM),10),r[this.GAME_MARGIN_LEFT]=parseInt(t.attr(this.DATA_MARGIN_LEFT),10),this.games[i]=r,this.addLoader(e,t);var o={platformKey:e.attr(this.DATA_PLATFORM_KEY),brandID:e.attr(this.DATA_BRAND_ID),domainLaunchUrl:n,libraryUrl:n,success:function(n){a.debug("initialise.success",arguments),a.gameflexExpressLibrary=n,a.getInitDataParam("isLogged",!1)?a.authenticate(e,t,n):a.launchGame(e,t,n,null)},error:function(){a.debug("initialise.error",arguments),e.find("."+this.GAME_PLAYED_CLASS).hide(),e.find("."+this.LOBBY_CLASS).show(),a.removeLoader(e)}};this.isGameflexExpressLibraryLoaded()?o.success(this.gameflexExpressLibrary):gameflexExpressLibraryLoader.initialise(o)}},authenticate:function(t,n,a){var i=this,r=t.attr(this.DATA_AUTH_TOKEN_URL);e.ajax({type:"GET",dataType:"jsonp",jsonp:"Callback",timeout:3e4,cache:!1,url:r,data:{LanguageCode:this.getLanguageCode()},success:function(e){i.debug("authenticate.success",arguments);var o=e.Status;if(!o||o!=i.AUTH_STATUS_GUEST&&o!=i.AUTH_STATUS_AUTHENTICATED)i.switchToLobby(t);else{var s=null;if(o==i.AUTH_STATUS_AUTHENTICATED){s=e.Token;var c=e.KeepAliveUrl;if(0==r.indexOf("/")&&0!=c.indexOf("/")){var l=r.substr(1,r.indexOf("/",1)-1),u=c.indexOf("://")+2;l==c.substr(u+1,c.indexOf("/",u+1)-1)&&(c=c.substr(u))}i.games[t.attr(i.DATA_ID)][i.GAME_KEEP_ALIVE_URL]=c}i.launchGame(t,n,a,s)}},error:function(){i.debug("authenticate.error",arguments),i.switchToLobby(t)}})},launchGame:function(t,n,a,i){var r=this,o=t.attr(this.DATA_ID),s=!!i,c={gameID:n.attr(this.DATA_GAME_ID),languageCode:this.getLanguageCode(),gameContainer:t.find("."+this.GAME_PLAYED_CLASS).get(0),success:function(a){r.debug("launchGame.success",arguments);var i=r.games[o],c=a.features.get(),l=a.game.dimensions.get(),u=r.getObjectKey(c,!0,"game","dimensions","canResize"),d=parseInt(n.attr(r.DATA_LOAD_DELAY),10),h=parseInt(n.attr(r.DATA_BALANCE_RELOAD_TIMEOUT),10),p=s&&h&&r.getObjectKey(c,!1,"game","balance","canReloadBalance"),f=parseInt(t.attr(r.DATA_KEEP_ALIVE_TIMEOUT),10),_=i[r.GAME_KEEP_ALIVE_URL];r.debug("features",c),r.debug("dimensions",l),i[r.GAME_ENGAGE_OBJECT]=a,i[r.GAME_RELOAD_BALANCE_TIMER]=null,i[r.GAME_LOAD_DELAY_TIMER]=null,i[r.GAME_KEEP_ALIVE_TIMER]=null,i[r.GAME_CAN_RESIZE]=u,u&&(i[r.GAME_ASPECT_RATIO]=l.aspectRatio),p&&(r.debug("balance.reload.create",h),i[r.GAME_RELOAD_BALANCE_TIMER]=setInterval(function(){r.debug("balance.reload"),a.game.balance.reload()},h)),d&&(r.debug("loadDelay.create",d),i[r.GAME_LOAD_DELAY_TIMER]=setTimeout(function(){r.debug("loadDelay"),r.games[t.attr(r.DATA_ID)][r.GAME_LOAD_DELAY_TIMER]=null,t.find(r.IFRAME_SELECTOR).css({visibility:"visible"}),r.removeLoader(t),r.resize(t)},d)),s&&f&&_&&(r.debug("keepAlive.create",f),i[r.GAME_KEEP_ALIVE_TIMER]=setInterval(function(){r.debug("keepAlive"),e.ajax({type:"GET",dataType:"jsonp",jsonp:"Callback",timeout:3e4,cache:!1,url:_,data:{},success:function(e){r.debug("keepAlive.success",arguments)},error:function(){r.debug("keepAlive.error",arguments)}})},f)),r.games[o]=i,t.find("."+r.LOBBY_CLASS).hide(),t.find(r.IFRAME_SELECTOR).show(),t.find("."+r.GAME_PLAYED_CLASS).show(),d?t.find(r.IFRAME_SELECTOR).css({visibility:"hidden"}):r.removeLoader(t),r.resize(t),r.debug("games",r.games)},error:function(n){r.debug("launchGameGuest.error",arguments);var a="";switch(e.isArray(n)&&e.each(n,function(t,n){e.isPlainObject(n)&&n.Description&&n.Description.indexOf(r.ERROR_CODE_NO_FLASH_DESCRIPTION)>=0&&(a=r.ERROR_CODE_NO_FLASH)}),a){case r.ERROR_CODE_NO_FLASH:r.showErrorNoFlash(t);break;default:r.switchToLobby(t)}}};a.common&&(c.launchLocation={deviceChannel:a.common.deviceChannels.web,productChannel:a.common.productChannels.casino,categoryPath:["tbc"],position:1}),s?(c.sessionToken=i,a.games.launchDesktopForRealBySessionToken(c)):(c.currencyCode=t.attr(this.DATA_CURRENCY_CODE),a.games.launchDesktopForFun(c))},showErrorNoFlash:function(t){this.debug("showErrorNoFlash");var n=t.find("."+this.GAME_PLAYED_CLASS),a=t.attr(this.DATA_DOWNLOAD_FLASH_PLAYER);n.append(e('<div class="error"><div class="no-flash-container"><a href="http://www.adobe.com/go/getflashplayer" target="_blank"><span class="icon"></span><span class="message">'+a+"</span></a></div></div>")),this.removeLoader(t)},removeError:function(e){e.find("."+this.GAME_PLAYED_CLASS+" ."+this.ERROR_CLASS).remove()},isInitAutoResize:!1,initAutoResize:function(){if(!this.isInitAutoResize){this.isInitAutoResize=!0;var t=this;e(window).resize(function(){t.resizeTimer&&clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){t.resize(t.getBanners())},100)})}},isGameflexExpressLibraryLoaded:function(){return null!=this.gameflexExpressLibrary},resize:function(t){if(this.debug("resize",t),t){var n=this;t.each(function(){var t=e(this),a=t.find("."+n.LOBBY_CLASS),i=a.find("."+n.GAMES_CLASS),r=t.find("."+n.GAME_PLAYED_CLASS),o=t.find(n.IFRAME_SELECTOR),s=t.attr(n.DATA_ID),c=n.games[s],l=i.find("."+n.GAME_CLASS).first(),u=parseInt(l.attr(n.DATA_MARGIN_TOP),10),d=parseInt(l.attr(n.DATA_MARGIN_RIGHT),10),h=parseInt(l.attr(n.DATA_MARGIN_BOTTOM),10),p=parseInt(l.attr(n.DATA_MARGIN_LEFT),10),f=parseFloat(l.attr(n.DATA_ASPECT_RATIO),10),_=n.calibrate(a.width()),g=_+p+d,E=n.calibrate(g/f),m=E-u-h;if(n.debug("resize",s,"lobbyHeight",m,"aspectRatio",f),a.height(m),!c||!c[n.GAME_CAN_RESIZE])return r.height(m),n.debug("resize",s,"game","not available"),void n.onResized(t);if(u=c[n.GAME_MARGIN_TOP],d=c[n.GAME_MARGIN_RIGHT],h=c[n.GAME_MARGIN_BOTTOM],p=c[n.GAME_MARGIN_LEFT],f=c[n.GAME_ASPECT_RATIO],_=n.calibrate(r.width()),g=_+p+d,E=n.calibrate(g/f),m=E-u-h,n.debug("resize",s,"bannerWidth",_,"bannerHeight",m,"iframeWidth",g,"iframeHeight",E),r.height(m),!c[n.GAME_LOAD_DELAY_TIMER]&&o.length){if(o.css({top:-1*u+"px",right:-1*d+"px",bottom:-1*h+"px",left:-1*p+"px"}),o.height(E),o.width(g),"true"!=t.attr(n.DATA_NEW_API_ENABLED)){var v=c[n.GAME_ENGAGE_OBJECT];v&&v.game.dimensions.resize()}n.onResized(t)}})}},onResized:function(t){e(document).trigger(this.EVENT_RESIZED),this.debug("onResized",this.EVENT_RESIZED)},isInitShowHide:!1,initShowHide:function(){if(!this.isInitShowHide){this.isInitShowHide=!0;var t=this;e("body").on("click",this.BLOCK_SELECTOR+" ."+this.BANNER_CLASS+" ."+this.HEADER_CLASS+" ."+this.HEADER_ARROW_CONTAINER_CLASS,function(){var n=e(this).closest("."+t.BANNER_CLASS);n.hasClass(t.CLOSED_CLASS)?(n.removeClass(t.CLOSED_CLASS),t.switchToLobby(n),e.cookie(t.CLOSED_COOKIE,null,{expires:-1,path:"/"})):(n.addClass(t.CLOSED_CLASS),e.cookie(t.CLOSED_COOKIE,1,{expires:100,path:"/"}),t.stopPolling())})}},isInitHome:!1,initHome:function(){if(!this.isInitHome){this.isInitHome=!0;var t=this;e("body").on("click",this.BLOCK_SELECTOR+" ."+this.BANNER_CLASS+" ."+this.HEADER_HOME_CLASS,function(){var n=e(this).closest("."+t.BANNER_CLASS);t.switchToLobby(n)})}},switchToLobby:function(e){e.find("."+this.GAME_PLAYED_CLASS).hide(),e.find("."+this.LOBBY_CLASS).show(),this.stopGame(e),this.removeLoader(e),this.removeError(e),this.resize(e),this.stopPolling()},stopGame:function(e){e.find(this.IFRAME_SELECTOR).remove();var t=e.attr(this.DATA_ID);if(this.games[t]){var n=this.games[t];n[this.GAME_RELOAD_BALANCE_TIMER]&&clearInterval(n[this.GAME_RELOAD_BALANCE_TIMER]),n[this.GAME_LOAD_DELAY_TIMER]&&clearTimeout(n[this.GAME_LOAD_DELAY_TIMER]),n[this.GAME_KEEP_ALIVE_TIMER]&&clearInterval(n[this.GAME_KEEP_ALIVE_TIMER]),delete this.games[t]}},isInitRunGame:!1,initRunGame:function(){if(!this.isInitRunGame){this.isInitRunGame=!0;var t=this;e("body").on("click",this.BLOCK_SELECTOR+" ."+this.BANNER_CLASS+" ."+this.LOBBY_CLASS+" ."+this.GAME_CLASS,function(){t.debug("onRunGame");var n=e(this).closest("."+t.BANNER_CLASS),a=e(this);t.runGame(n,a)})}},initGamePlayed:function(){var t=this,n=this.getBanners();n&&n.each(function(){var n=e(this);n.find("."+t.GAME_PLAYED_CLASS).length||e("<div />").addClass(t.GAME_PLAYED_CLASS).appendTo(n.find("."+t.CONTAINER_CLASS))})},initGameFlexUrl:function(){var e=window.location.href.match(/https?:\/\/[^.]+\.([^.]+\.[^.:/]+)\/.*/);e&&(this.GAMEFLEX_URL=this.GAMEFLEX_URL_PREFIX+e[1]+this.GAMEFLEX_URL_POSTFIX,this.debug("GAMEFLEX_URL",this.GAMEFLEX_URL))},addLoader:function(t,n){var a=n.find("img");t.find("."+this.GAME_PLAYED_CLASS).addClass(this.LOADER_CLASS).append(e("<img />").addClass(this.LOADER_ICON_CLASS).attr({src:a.attr("src")}).css({marginTop:"-"+Math.round(a.height()/2)+"px",marginLeft:"-"+Math.round(a.width()/2)+"px"}).width(a.width()).height(a.height())),t.find("."+this.LOBBY_CLASS).hide(),t.find("."+this.GAME_PLAYED_CLASS).show(),this.resize(t)},removeLoader:function(e){e.find("."+this.GAME_PLAYED_CLASS).removeClass(this.LOADER_CLASS).find("."+this.LOADER_ICON_CLASS).remove()},getBanners:function(){var t=e(this.BLOCK_SELECTOR+" ."+this.BANNER_CLASS);return t.length?t:null},calibrate:function(e){var t=0;return e-Math.floor(e)&&t++,t+Math.floor(e)},getLanguageCode:function(){return this.languageCode},initLanguageCode:function(){var e=this.getDisabledLanguageCodes(),t=this.getInitDataParam("locale_name",this.LANGUAGE_CODE_DEFAULT);this.languageCode=null===e[t]?this.LANGUAGE_CODE_DEFAULT:t,this.debug("languageCode = "+this.languageCode)},getDisabledLanguageCodes:function(){return{}},getObjectKey:function(){if(arguments.length<3)return null;var e,t=arguments[0],n=arguments[1];for(e=2;e<arguments.length;e++){if(!("object"==typeof t&&arguments[e]in t)){e=0;break}t=t[arguments[e]]}return e==arguments.length?t:n}})}(jQuery),function(e){Banners.RefreshController=Banners.BaseController.extend({URL:"/banners/banners.htm",DATA_SITE_PART_CODE:"data-site-part-code",DATA_FILTER_BANNER_TYPE:"data-filter-banner-type",EVENT_ADDED:"bannerAdded",EVENT_REMOVED:"bannerRemoved",controllers:{},modelFactory:null,getLoggerName:function(){return"banners.refresh"},addController:function(e){this.controllers[e.getType()]=e},setModelFactory:function(e){this.modelFactory=e},onReady:function(){var t=this,n=this.getInitDataParam("bannersRefreshInterval",6e5);t.debug("refreshInterval",n),setInterval(function(){var n=t.getBlock(),a=n.attr(t.DATA_SITE_PART_CODE),i=n.attr(t.DATA_VERSION),r=t.getInitDataBaseDir()+t.URL+"?sitePartCode="+a+"&version="+i;e.ajax({type:"GET",url:r,dataType:"JSON",timeout:5e3,success:function(e){t.onSuccess(e)},error:function(){t.error("Failed to load banners data")}})},n)},onSuccess:function(t){if(t&&t.banners){var n=this,a=n.getBlock(),i=a.attr(this.DATA_FILTER_BANNER_TYPE),r=[],o={};e.each(t.banners,function(e,t){var a=n.modelFactory.create(t);if(a){if(i&&a.getType()!=i)return;r.push(a),o[a.getId()]=!0}}),a.attr(this.DATA_VERSION,t.version),n.debug("on change","models",r,"ids",o),n.getBanners().each(function(){var t=e(this),a=t.attr(n.DATA_ID);o[a]||(n.remove(t),n.onRemoved(t))}),e.each(r,function(e,t){var a=t.getId();n.getById(a)||(n.create(e,t),n.onAdded(t))}),e.each(r,function(e,t){var a=t.getId(),i=n.getById(a),r=n.getByIndex(e);r&&r.attr(n.DATA_ID)==a||n.move(e,i)}),e.each(r,function(e,t){var a=t.getId(),i=t.getVersion(),r=n.getById(a);r.attr(n.DATA_VERSION)!=i&&(n.debug("update","index",e,"id",a,"model",t),n.remove(r),n.create(e,t))})}},remove:function(e){this.debug("remove","id",e.attr(this.DATA_ID),e);var t=e.attr(this.DATA_TYPE),n=this.getController(t);n&&n.remove(e)},create:function(e,t){this.debug("create","index",e,"id",t.getId(),"model",t);var n=t.getType(),a=this.getController(n);if(a){var i=a.create(t);i&&(this.move(e,i),a.afterCreate(i))}},move:function(e,t){if(this.debug("move","index",e,"id",t.attr(this.DATA_ID),"banner",t),0!=e){var n=this.getByIndex(e);n?n.before(t):this.getBlock().append(t)}else this.getBlock().prepend(t)},getController:function(e){return this.controllers[e]?this.controllers[e]:(this.error('Controller for banner type "'+e+'" not exists'),null)},getBlock:function(){return e(this.BLOCK_SELECTOR)},getBanners:function(){return this.getBlock().children()},getById:function(t){var n=e(this.BLOCK_SELECTOR+" ["+this.DATA_ID+"='"+t+"']");return n.length?n:null},getByIndex:function(e){var t=this.getBanners().eq(e);return t.length?t:null},onAdded:function(t){e(document).trigger(this.EVENT_ADDED),this.debug("onAdded",this.EVENT_ADDED)},onRemoved:function(t){e(document).trigger(this.EVENT_REMOVED),this.debug("onRemoved",this.EVENT_REMOVED)}})}(jQuery),Banners.PostMessageController=Banners.BaseController.extend({ACTION_OPEN_IN_CURRENT_WINDOW:"OPEN_IN_CURRENT_WINDOW",ACTION_OPEN_IN_TAB:"OPEN_IN_TAB",ACTION_OPEN_IN_NEW_WINDOW:"OPEN_IN_NEW_WINDOW",BANNER_TYPE_IMG:"IMG",BANNER_TYPE_EVENT:"EVENT",BANNER_TYPE_TOTO:"TOTO",BANNER_TYPE_HELP:"HELP",BANNER_TYPE_EVENT_URL:"/events.htm?id=",BANNER_TYPE_TOTO_URL:"/toto/redirectbydrawtype.htm?drawType=",urlActions:{},getLoggerName:function(){return"banners.postMessage"},onReady:function(){var e=this;this.urlActions[this.ACTION_OPEN_IN_CURRENT_WINDOW]=!0,this.urlActions[this.ACTION_OPEN_IN_TAB]=!0,this.urlActions[this.ACTION_OPEN_IN_NEW_WINDOW]=!0,window.addEventListener?window.addEventListener("message",function(t){e.receiveMessage(t)}):window.attachEvent&&window.attachEvent("onmessage",function(t){e.receiveMessage(t)})},receiveMessage:function(e){if(e&&e.data){var t;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){t={}}else t=e.data;"BANNER"==(t.type||"")&&this.process(t)}},process:function(e){this.debug("process",e);var t=e.data,n=t.action;if(this.urlActions[n]){var a,i=t.type,r=t.statisticKey,o=this.getInitDataBaseDir();switch(i){case this.BANNER_TYPE_IMG:case this.BANNER_TYPE_HELP:a=Banners.BannerHelper.link(t.url);break;case this.BANNER_TYPE_EVENT:a=o+this.BANNER_TYPE_EVENT_URL+t.resolvedTreeId;break;case this.BANNER_TYPE_TOTO:a=o+this.BANNER_TYPE_TOTO_URL+t.drawType}if(a)switch(Banners.BannerHelper.applyStatistic(r),n){case this.ACTION_OPEN_IN_CURRENT_WINDOW:window.location=a;break;case this.ACTION_OPEN_IN_TAB:window.open(a,"_blank");break;case this.ACTION_OPEN_IN_NEW_WINDOW:var s=t.newWindow,c="";for(var l in s)""!=c&&(c+=", "),c+=l+"="+s[l];window.open(a,"_blank",c)}}}}),function(e){var t=Banners.BaseController.extend({getLoggerName:function(){return"banners.manager"},onReady:function(){var t=this.isEnabled();if(this.debug("isEnabled",t),!t)return t;var n=[new Banners.ImgBannerController,new Banners.ImgHelpBannerController,new Banners.HtmlBannerController,new Banners.GameIForiumBannerController,new Banners.MarketController],a=new Banners.RefreshController;a.setModelFactory(new Banners.ModelFactory);var i=new Banners.PostMessageController;e.each(n,function(e,t){t.onReady(),a.addController(t)}),a.onReady(),i.onReady()}});e(document).ready(function(){(new t).onReady()})}(jQuery),window.PanbetPunterBalance={parseBalanceValue:function(e){try{return parseFloat((e+"").replace(/,/g,""))}catch(t){window.Log.getLogger("Can`t parse balance value:",e,t)}return null},formatFloat:function(e){try{return e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(t){window.Log.getLogger("Can`t format float value:",e,t)}return null},getBalanceValue:function(e){return e&&e.length?this.parseBalanceValue(e.data("punterBalanceValue")):null},updateBalance:function(e,t,n){function a(e,t){return"#"+e+" [data-punter-balance-type='"+t+"']"}function i(e,t,n){(t=d.formatFloat(t))&&(e.html(t),e.data("punterBalanceValue",t),s.debug([o,"new",n,"balance value",t]))}var r,o=n.loggerName,s=window.Log.getLogger(o),c=n.containerId,l=n.totalBalanceContainerId,u=n.updateTotalBalance;$.isFunction(n.onBalanceUpdated)&&(r=n.onBalanceUpdated);var d=this,h=$(a(c,e));if(h.length){var p=this.parseBalanceValue(t);if(null!=p){var f=this.getBalanceValue(h);f!=p&&(i(h,p,e),r&&r(h,p,e),u&&null!=f&&function(e){var t=$(a(l||c,"total"));if(t.length){var n=d.getBalanceValue(t);null!=n&&i(t,n+e,"total")}}(p-f))}}}},function(e){window.PunterBalanceRefreshSubscriber={subscribe:function(e){var t=e.loggerName,n=window.Log.getLogger(t),a=e.enabled;n.debug([t,"enabled",a]),a&&StompFactory.subscribe(e.destination,function(a){var i=JSON.parse(a.body);n.debug([t,"onMessage() callback receive data",i]),i&&i.type&&i.balance&&window.PanbetPunterBalance.updateBalance(i.type,i.balance,e)})}},e(document).ready(function(){var t=initData.balanceRefreshEnabled,n=initData.showPunterBalanceDetails,a=initData.showPunterBonusBalanceDetails,i=initData.withdrawalBalanceEnabled,r=null;if(a){var o=function(e,t){var n=e.closest("[data-punter-balance-row]");t?n.show():n.hide()},s=function(){if(!i){var t=0;e("#header_balance_details").find("[data-punter-balance-is-bonus]").each(function(n,a){var i=window.PanbetPunterBalance.getBalanceValue(e(a))||0;t+=i});var n=e("#header_balance").find("[data-header-balance-hint-icon]");t?n.show():n.hide()}};r=function(e,t,n){o(e,t),s()}}PunterBalanceRefreshSubscriber.subscribe({loggerName:"MainBalanceRefresh",enabled:t,destination:initData.stomp.punterMainBalanceChangesPath,containerId:n?"header_balance_details":"header_balance",totalBalanceContainerId:"header_balance",updateTotalBalance:n}),PunterBalanceRefreshSubscriber.subscribe({loggerName:"WithdrawableBalanceRefresh",enabled:t&&i,destination:initData.stomp.punterWithdrawableBalanceChangesPath,containerId:"header_balance_details",updateTotalBalance:!1}),PunterBalanceRefreshSubscriber.subscribe({loggerName:"BonusBalanceRefresh",enabled:t&&a,destination:initData.stomp.punterBonusBalanceChangesPath,containerId:"header_balance_details",totalBalanceContainerId:"header_balance",updateTotalBalance:!0,onBalanceUpdated:r})})}(jQuery),function(){function e(){return r.now()}function t(e){r.error&&r.error(e)}function n(){var e=r.storage.getItem(r.dataKey),n={offset:0,timestamp:0};try{n=e?JSON.parse(e):n}catch(e){t(e)}return n}var a={},i={now:function(){return(new Date).getTime()},ajax:function(){return $.ajax.apply(this,arguments)},url:"synctime",method:"GET",minRequestsCount:5,resyncInterval:0,maxOffsetsCount:20,storage:{getItem:function(e){for(var t=document.cookie.split(";"),n=0;n<t.length;++n){var a=t[n].split("=");if(a[0].trim()===e)return a[1]}return null},setItem:function(e,t){var n=new Date;n.setTime(n.getTime()+6048e5),document.cookie=e+"="+t+"; expires="+n.toGMTString()+"; path=/"}},dataKey:"SyncTimeData"},r=i,o=[];a.init=function(e){var t=$.extend({},i,e||{});if("function"!=typeof t.now)throw"Option 'now' must be a function that returns a number";if("number"!=typeof t.now())throw"Option 'now' must return a number";r=t,o=[]},a.newDate=function(){var e=new Date;return e.setTime(a.now()),e},a.getTime=function(){return a.now()},a.now=function(){var t=n();return e()+(t&&t.offset?t.offset:0)},a.sync=function(t){var n=e();r.ajax({url:r.url,method:r.method,data:{t:n},dataType:"JSON"}).done(function(n){var i=e(),s=(i-n.origtime)/2,c=n.offset-s;if(o.push(c),o.length<r.minRequestsCount)a.sync(t);else{o.length>r.maxOffsetsCount&&o.shift();var l=0;if(o.length>1){for(var u=0;u<o.length;++u)l+=o[u];l=Math.round(l/o.length)}else l=o[0];r.storage.setItem(r.dataKey,JSON.stringify({offset:l,timestamp:i})),t&&"function"==typeof t&&t(l)}})},a.scheduleSync=function(e){a.sync(e),r.resyncInterval>0&&setTimeout(function(){try{a.scheduleSync(e)}catch(e){}},1e3*r.resyncInterval)},window.SyncTime=a}(),jQuery,window.LoyaltyClubHelpLinkHandler={onClick:function(e,t,n){e.stopPropagation();var a=t.data("loyaltyHelpLink");showHelpForURL("/"==a.substring(0,1)?n+a:n+"/"+a)}},function(e){window.PunterLegalAgreementDialogHelper=function(){function t(t){e("#top_bar_legal_agreement_message").toggleClass("hidden",!t),checkView()}function n(){e("#legal_agreement_dialog").addModalToViewQueue({escClose:!1,onClose:function(){e.cookie("showLegalAgreement",null,{path:"/"}),e.modal.close()}})}function a(){e.ajax({url:initData.confirmLegalAgreementPageURL,type:"POST"}).done(function(){initData.punterNeedConfirmLegalAgreement=!1})}function i(){var t=e(this).data("showLegalAgreementHelp");return showHelpForURL(initData.helpBaseURL+("/"==t.substring(0,1)?"":"/")+t),!1}function r(){e(document).on("click","#legal_agreement_dialog [data-show-legal-agreement-help]",i),e(document).on("click","#legal_agreement_dialog [data-legal-agreement-agree-checkbox]",function(){var t=e(this).is(":checked");e("#legal_agreement_dialog").find("[data-legal-agreement-button-yes]").prop("disabled",!t)}),e(document).on("click","#legal_agreement_dialog [data-legal-agreement-button-yes]",function(){e.modal.close(),a(),t(!1)}),e(document).on("click","#legal_agreement_dialog [data-legal-agreement-button-no]",function(){e.modal.close(),t(!0)})}function o(){e(document).on("click","#top_bar_legal_agreement_message [data-show-legal-agreement-help]",i),e(document).on("click","#top_bar_legal_agreement_message [data-legal-agreement-agree-checkbox]",function(){var t=e(this).is(":checked");e("#top_bar_legal_agreement_message").find("[data-legal-agreement-button-yes]").prop("disabled",!t)}),e(document).on("click","#top_bar_legal_agreement_message [data-legal-agreement-button-yes]",function(){t(!1),a()})}return{initHandlers:function(){r(),o()},showLegalAgreementPopup:function(){n()},isConfirmationRequired:function(){return initData.punterNeedConfirmLegalAgreement||!1},setConfirmationRequired:function(e){initData.punterNeedConfirmLegalAgreement=e}}}(),e(document).ready(function(){PunterLegalAgreementDialogHelper.initHandlers(),(initData.showPunterLegalAgreementPopup||!1)&&PunterLegalAgreementDialogHelper.showLegalAgreementPopup()})}(jQuery);
//# sourceMappingURL=panbet.map